function loadJS(e,o,t){var i=!!window.ActiveXObject,n=i&&!window.XMLHttpRequest,a=document.createElement("script"),r=n?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,o&&o())}:a.onload=function(){o&&o()},a.src=e,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var e=$(window),o={top:e.scrollTop(),left:e.scrollLeft()};o.right=o.left+e.width(),o.bottom=o.top+e.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var e=window,o=(e.document,navigator.userAgent.toLowerCase()),t=e.navigator.appVersion.match(/android/gi);e.navigator.appVersion.match(/iphone/gi);"micromessenger"==o.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos()},updateImageWidth:function(){function e(){var e=$(this),o=t.outerWidth(),i=this.naturalWidth;i>=o?e.addClass("full-img"):e.removeClass("full-img")}function o(){i.each(e)}var t=$(".post-content"),i=$(".single-post-inner img").on("load",e);o()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Open Sans","iconfont","fontawesome"],urls:[General.absUrl+"/assets/css/font.min.css","https://img.halfrost.com/fontss/iconfont.css",General.absUrl+"/assets/css/font-awesome.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Open Sans","iconfont","fontawesome"]}})})},scrollToPos:function(e){var o="我要飞到最高",t=(e||$(window).height(),$('<a href="#" id="to-top" title="'+o+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(e){var o,t,i={twitter:"iconfont-twitter icon-iconfonttwitter",qzone:"iconfont-qzone icon-qzone",weibo:"iconfont-weibo icon-iconfontweibo",facebook:"iconfont-facebook icon-iconfontfacebook",github:"iconfont-github icon-github",douban:"iconfont-douban icon-iconfontdouban",google:"iconfont-google icon-iconfontgoogle",luolei:"iconfont-luolei icon-luolei",dribble:"iconfont-dribble icon-dribbblecircled",v2ex:"iconfont-v2ex icon-iconfontv2ex",zhihu:"iconfont-zhihu icon-iconfontzhihu",wikipedia:"iconfont-wikipedia icon-iconfontwikipedia",jianshu:"iconfont-jianshu icon-jianshu",youku:"iconfont-youku icon-iconfontyouku",youtube:"iconfont-youtube icon-youtube",juejin:"iconfont-juejin icon-juejin",weixin:"iconfont-weixin icon-iconfontwechat",segmentfault:"iconfont-sf icon-iconsf-copy"};for(var n in i)if("function"!=typeof i[n]){var a=n;e.indexOf(a)>=0&&(o=a,t=i[a])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(e){var o=$(this).attr("href"),t=document.createElement("a");t.href=o,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var i=$(this).find("i").css("color"),n=$(this).css("color");$(this).hover(function(){$(this).css("color",i),$(this).addClass("animated pulse")},function(){$(this).css("color",n),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var e={alipay:"/assets/images/qr-alipay-255.png",wechat:"/assets/images/qr-wechat-255.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",e.wechat),$("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",e.wechat),$(this).find("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(e,o){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},i=new Image;i.onload=function(){i.width>0&&i.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},i.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},i.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(ImageSmartLoader.isWebPSupported===!0){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!1,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var e=$(window),o=document.getElementById("scroll-hint");if(null!==o&&($(".header-scroll-hint").on("click",function(e){var o=$(this).closest(".cover");$("html, body").animate({scrollTop:o.position().top+o.height()},400),e.preventDefault()}),window.addEventListener("load",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")}),window.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")})),$("#toc").initTOC({selector:"h1, h2, h3, h4, h5, h6",scope:"article",overwrite:!1,prefix:"toc"}),$(".sidebar-toggle").on("click",function(e){$("body").hasClass("sidebar-opened")?($("body").removeClass("sidebar-opened"),$("body").css("overflow","scroll")):($("body").addClass("sidebar-opened"),$("body").css("overflow","hidden")),e.preventDefault()}),$(".search-toggle").on("click",function(e){$("body").hasClass("search-opened")?($("body").removeClass("search-opened"),$("body").css("overflow","scroll"),searchField.clear()):($("body").addClass("search-opened"),$("body").css("overflow","hidden"),setTimeout(function(){$("#search-field").focus()},300)),e.preventDefault()}),$(".overlay").on("click",function(e){$("body").removeClass("sidebar-opened search-opened"),$("body").css("overflow","scroll"),searchField.clear(),e.preventDefault()}),"undefined"!=typeof disqus_shortname){var t=!1;$(".comments-title").on("click",function(){var e=$(this);t?($("#disqus_thread").slideToggle(),e.hasClass("toggled-on")?e.removeClass("toggled-on"):e.addClass("toggled-on")):($.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}),e.addClass("toggled-on"),t=!0)})}$.fn.lazyload=function(o){function t(){var e=0;n.each(function(){var o=$(this);if(!a.skip_invisible||o.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else o.trigger("appear"),e=0})}var i,n=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return o&&(void 0!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),void 0!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),$.extend(a,o)),i=void 0===a.container||a.container===window?e:$(a.container),0===a.event.indexOf("scroll")&&i.bind(a.event,function(){return t()}),this.each(function(){var e=this,o=$(e);e.loaded=!1,void 0!==o.attr("src")&&o.attr("src")!==!1||o.is("img")&&(o.attr("src",a.placeholder),o.addClass("loading")),o.one("appear",function(){if(!this.loaded){if(a.appear){var t=n.length;a.appear.call(e,t,a)}var i=o.attr("data-"+a.data_attribute);void 0===i&&(i=o.attr("src")),void 0===i&&(i=o.style.backgroundImage),void 0!==i&&i.indexOf("img.halfrost.com")>-1&&(a.advanced_load===!0&&(i+="?imageView2"),a.is_scale===!0&&(i+="/0/w/"+a.scale_width),a.webP_load===!0&&a.is_scale===!1&&(i+="/0/format/webp"),a.webP_load===!0&&a.is_scale===!0&&(i+="/format/webp"),a.webP_load===!1&&i.indexOf("https://img.halfrost.com/Blog/ArticleTitleImage/background-cover_.png")>-1&&(i="https://img.halfrost.com/Blog/ArticleTitleImage/background-cover_.png")),$("<img />").bind("load",function(){o.hide(),o.is("img")?o.attr("src",i):o.css("background-image","url('"+i+"')"),o[a.effect](a.effect_speed),e.loaded=!0;var t=$.grep(n,function(e){return!e.loaded});if(n=$(t),a.load){var r=n.length;a.load.call(e,r,a)}o.removeClass("loading")}).attr("src",i)}}),0!==a.event.indexOf("scroll")&&o.bind(a.event,function(){e.loaded||o.trigger("appear")})}),e.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(o,t){var i;return i=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:e.height())+e.scrollTop():$(t.container).offset().top+$(t.container).height(),i<=$(o).offset().top-t.threshold},$.rightoffold=function(o,t){var i;return i=void 0===t.container||t.container===window?e.width()+e.scrollLeft():$(t.container).offset().left+$(t.container).width(),i<=$(o).offset().left-t.threshold},$.abovethetop=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollTop():$(t.container).offset().top,i>=$(o).offset().top+t.threshold+$(o).height()},$.leftofbegin=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollLeft():$(t.container).offset().left,i>=$(o).offset().left+t.threshold+$(o).width()},$.inviewport=function(e,o){return!($.rightoffold(e,o)||$.leftofbegin(e,o)||$.belowthefold(e,o)||$.abovethetop(e,o))},$.extend($.expr[":"],{"below-the-fold":function(e){return $.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return $.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!$.rightoffold(e,{threshold:0})},"in-viewport":function(e){return $.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return $.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!$.rightoffold(e,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&General.addIcons()});
!function(e){!function(){var e=function(t){var r=new e.Builder;return r.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),r.searchPipeline.add(e.stemmer),t.call(r,r),r.build()};e.version="2.1.5",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},e.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){var r=t.indexOf(e.FieldRef.joiner);if(r===-1)throw"malformed field ref string";var i=t.slice(0,r),n=t.slice(r+1);return new e.FieldRef(n,i,t)},e.FieldRef.prototype.toString=function(){return void 0===this._stringValue&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue},e.idf=function(e,t){var r=0;for(var i in e)"_index"!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(n))},e.Token=function(e,t){this.str=e||"",this.metadata=t||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(e){return e},new e.Token(t(this.str,this.metadata),this.metadata)},e.tokenizer=function(t){if(null===t||void 0===t)return[];if(Array.isArray(t))return t.map(function(t){return new e.Token(e.utils.asString(t).toLowerCase())});for(var r=t.toString().trim().toLowerCase(),i=r.length,n=[],s=0,o=0;s<=i;s++){var a=r.charAt(s),u=s-o;(a.match(e.tokenizer.separator)||s==i)&&(u>0&&n.push(new e.Token(r.slice(o,s),{position:[o,u],index:n.length})),o=s+1)}return n},e.tokenizer.separator=/[\s\-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,r){r in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+r),t.label=r,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var r=t.label&&t.label in this.registeredFunctions;r||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var r=new e.Pipeline;return t.forEach(function(t){var i=e.Pipeline.registeredFunctions[t];if(!i)throw new Error("Cannot load unregistered function: "+t);r.add(i)}),r},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");i+=1,this._stack.splice(i,0,r)},e.Pipeline.prototype.before=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");this._stack.splice(i,0,r)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);t!=-1&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=function(t,r,i){var s=n(r,i,e);return void 0===s||""===s?t:t.concat(s)},i=0;i<t;i++){var n=this._stack[i];e=e.reduce(r,[])}return e},e.Pipeline.prototype.runString=function(t){var r=new e.Token(t);return this.run([r]).map(function(e){return e.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(e){this._magnitude=0,this.elements=e||[]},e.Vector.prototype.positionForIndex=function(e){if(0===this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];i>1&&(s<e&&(t=n),s>e&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e?2*n:s>e?2*n:s<e?2*(n+1):void 0},e.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e),this._magnitude},e.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,i=e.elements,n=r.length,s=i.length,o=0,a=0,u=0,l=0;u<n&&l<s;)o=r[u],a=i[l],o<a?u+=2:o>a?l+=2:o==a&&(t+=r[u+1]*i[l+1],u+=2,l+=2);return t},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},e.Vector.prototype.toJSON=function(){return this.elements},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",i="[aeiouy]",n=r+"[^aeiouy]*",s=i+"[aeiou]*",o="^("+n+")?"+s+n,a="^("+n+")?"+s+n+"("+s+")?$",u="^("+n+")?"+s+n+s+n,l="^("+n+")?"+i,h=new RegExp(o),d=new RegExp(u),c=new RegExp(a),f=new RegExp(l),p=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/,v=/.$/,x=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),b=new RegExp("^"+n+i+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,S=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Q=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,L=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,_=/^(.+?)(s|t)(ion)$/,T=/^(.+?)e$/,P=/ll$/,I=new RegExp("^"+n+i+"[^aeiouwxy]$"),O=function(r){var i,n,s,o,a,u,l;if(r.length<3)return r;s=r.substr(0,1),"y"==s&&(r=s.toUpperCase()+r.substr(1)),o=p,a=g,o.test(r)?r=r.replace(o,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2"));var O;return o=m,a=y,o.test(r)?(O=o.exec(r),o=h,o.test(O[1])&&(o=v,r=r.replace(o,""))):a.test(r)&&(O=a.exec(r),i=O[1],a=f,a.test(i)&&(r=i,a=x,u=w,l=b,a.test(r)?r+="e":u.test(r)?(o=v,r=r.replace(o,"")):l.test(r)&&(r+="e"))),o=k,o.test(r)&&(O=o.exec(r),i=O[1],r=i+"i"),o=S,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+e[n])),o=Q,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+t[n])),o=L,a=_,o.test(r)?(O=o.exec(r),i=O[1],o=d,o.test(i)&&(r=i)):a.test(r)&&(O=a.exec(r),i=O[1]+O[2],a=d,a.test(i)&&(r=i)),o=T,o.test(r)&&(O=o.exec(r),i=O[1],o=d,a=c,u=I,(o.test(i)||a.test(i)&&!u.test(i))&&(r=i)),o=P,a=d,o.test(r)&&a.test(r)&&(o=v,r=r.replace(o,"")),"y"==s&&(r=s.toLowerCase()+r.substr(1)),r};return function(e){return e.update(O)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenSet=function(){this["final"]=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var r=new e.TokenSet.Builder,i=0,n=t.length;i<n;i++)r.insert(t[i]);return r.finish(),r.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,r){for(var i=new e.TokenSet,n=[{node:i,editsRemaining:r,str:t}];n.length;){var s,o=n.pop();if(o.str.length>0){s=o.str.charAt(0);var a;s in o.node.edges?a=o.node.edges[s]:(a=new e.TokenSet,o.node.edges[s]=a),1==o.str.length?a["final"]=!0:n.push({node:a,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(o.editsRemaining>0&&o.str.length>1){s=o.str.charAt(1);var u;s in o.node.edges?u=o.node.edges[s]:(u=new e.TokenSet,o.node.edges[s]=u),o.str.length<=2?u["final"]=!0:n.push({node:u,editsRemaining:o.editsRemaining-1,str:o.str.slice(2)})}o.editsRemaining>0&&1==o.str.length&&(o.node["final"]=!0);var l;o.editsRemaining>0&&o.str.length>=1&&("*"in o.node.edges?l=o.node.edges["*"]:(l=new e.TokenSet,o.node.edges["*"]=l),1==o.str.length?l["final"]=!0:n.push({node:l,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}));var h;if(o.editsRemaining>0&&("*"in o.node.edges?h=o.node.edges["*"]:(h=new e.TokenSet,o.node.edges["*"]=h),0===o.str.length?h["final"]=!0:n.push({node:h,editsRemaining:o.editsRemaining-1,str:o.str})),o.editsRemaining>0&&o.str.length>1){var d,c=o.str.charAt(0),f=o.str.charAt(1);f in o.node.edges?d=o.node.edges[f]:(d=new e.TokenSet,o.node.edges[f]=d),1==o.str.length?d["final"]=!0:n.push({node:d,editsRemaining:o.editsRemaining-1,str:c+o.str.slice(2)})}}return i},e.TokenSet.fromString=function(t){for(var r=new e.TokenSet,i=r,n=!1,s=0,o=t.length;s<o;s++){var a=t[s],u=s==o-1;if("*"==a)n=!0,r.edges[a]=r,r["final"]=u;else{var l=new e.TokenSet;l["final"]=u,r.edges[a]=l,r=l,n&&(r.edges["*"]=i)}}return i},e.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node["final"]&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this["final"]?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++){var n=t[i],s=this.edges[n];e=e+n+s.id}return e},e.TokenSet.prototype.intersect=function(t){for(var r,i=new e.TokenSet,n=[{qNode:t,output:i,node:this}];n.length;){r=n.pop();for(var s=Object.keys(r.qNode.edges),o=s.length,a=Object.keys(r.node.edges),u=a.length,l=0;l<o;l++)for(var h=s[l],d=0;d<u;d++){var c=a[d];if(c==h||"*"==h){var f,p=r.node.edges[c],g=r.qNode.edges[h],m=p["final"]&&g["final"];c in r.output.edges?(f=r.output.edges[c],f["final"]=f["final"]||m):(f=new e.TokenSet,f["final"]=m,r.output.edges[c]=f),n.push({qNode:g,output:f,node:p})}}}return i},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){var r,i=0;if(t<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<t.length&&n<this.previousWord.length&&t[n]==this.previousWord[n];n++)i++;this.minimize(i),r=0===this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var s=i;s<t.length;s++){var o=new e.TokenSet,a=t[s];r.edges[a]=o,this.uncheckedNodes.push({parent:r,"char":a,child:o}),r=o}r["final"]=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r["char"]]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},e.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},e.Index.prototype.search=function(t){return this.query(function(r){var i=new e.QueryParser(t,r);i.parse()})},e.Index.prototype.query=function(t){var r=new e.Query(this.fields),i=Object.create(null),n=Object.create(null),s=Object.create(null);t.call(r,r);for(var o=0;o<r.clauses.length;o++){var a=r.clauses[o],u=null;u=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var l=0;l<u.length;l++){var h=u[l];a=JSON.parse(JSON.stringify(a)),a.term=h;for(var d,c=e.TokenSet.fromClause(a),f=this.tokenSet.intersect(c).toArray(),p=0;p<f.length;p++){var g=f[p],m=this.invertedIndex[g];if(m){d=m._index;for(var y=0;y<a.fields.length;y++){var v=a.fields[y],x=m[v],w=Object.keys(x),b=g+"/"+v;if(void 0===n[v]&&(n[v]=new e.Vector),n[v].upsert(d,1*a.boost,function(e,t){return e+t}),!s[b]){for(var k=0;k<w.length;k++){var S,Q=w[k],L=new e.FieldRef(Q,v),_=x[Q];void 0===(S=i[L])?i[L]=new e.MatchData(g,v,_):S.add(g,v,_)}s[b]=!0}}}}}}var T=Object.keys(i),P=[],I=Object.create(null);for(o=0;o<T.length;o++){var O,E=e.FieldRef.fromString(T[o]),F=E.docRef,D=this.fieldVectors[E],j=n[E.fieldName].similarity(D);if(void 0!==(O=I[F]))O.score+=j,O.matchData.combine(i[E]);else{var R={ref:F,score:j,matchData:i[E]};I[F]=R,P.push(R)}}return P.sort(function(e,t){return t.score-e.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),r=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:r,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var r={},i={},n=t.fieldVectors,s={},o=t.invertedIndex,a=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(var l,h=0;h<n.length;h++)l=n[h],ref=l[0],elements=l[1],i[ref]=new e.Vector(elements);for(h=0;h<o.length;h++)l=o[h],term=l[0],posting=l[1],a.insert(term),s[term]=posting;return a.finish(),r.fields=t.fields,r.fieldVectors=i,r.invertedIndex=s,r.tokenSet=a.root,r.pipeline=u,new e.Index(r)},e.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(e){this._ref=e},e.Builder.prototype.field=function(e){this._fields.push(e)},e.Builder.prototype.b=function(e){e<0?this._b=0:e>1?this._b=1:this._b=e},e.Builder.prototype.k1=function(e){this._k1=e},e.Builder.prototype.add=function(t){var r=t[this._ref];this.documentCount+=1;for(var i=0;i<this._fields.length;i++){var n=this._fields[i],s=t[n],o=this.tokenizer(s),a=this.pipeline.run(o),u=new e.FieldRef(r,n),l=Object.create(null);this.fieldTermFrequencies[u]=l,this.fieldLengths[u]=0,this.fieldLengths[u]+=a.length;for(var h=0;h<a.length;h++){var d=a[h];if(void 0===l[d]&&(l[d]=0),l[d]+=1,void 0===this.invertedIndex[d]){var c=Object.create(null);c._index=this.termIndex,this.termIndex+=1;for(var f=0;f<this._fields.length;f++)c[this._fields[f]]=Object.create(null);this.invertedIndex[d]=c}void 0===this.invertedIndex[d][n][r]&&(this.invertedIndex[d][n][r]=Object.create(null));for(var p=0;p<this.metadataWhitelist.length;p++){var g=this.metadataWhitelist[p],m=d.metadata[g];void 0===this.invertedIndex[d][n][r][g]&&(this.invertedIndex[d][n][r][g]=[]),this.invertedIndex[d][n][r][g].push(m)}}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var t,r=Object.keys(this.fieldLengths),i=r.length,n={},s={},o=0;o<i;o++){var a=e.FieldRef.fromString(r[o]);t=a.fieldName,(s[t]||(s[t]=0))&&(s[t]+=1),(n[t]||(n[t]=0))&&(n[t]+=this.fieldLengths[a])}for(o=0;o<this._fields.length;o++)t=this._fields[o],n[t]=n[t]/s[t];this.averageFieldLength=n},e.Builder.prototype.createFieldVectors=function(){for(var t={},r=Object.keys(this.fieldTermFrequencies),i=r.length,n=Object.create(null),s=0;s<i;s++){for(var o=e.FieldRef.fromString(r[s]),a=o.fieldName,u=this.fieldLengths[o],l=new e.Vector,h=this.fieldTermFrequencies[o],d=Object.keys(h),c=d.length,f=0;f<c;f++){var p,g,m,y=d[f],v=h[y],x=this.invertedIndex[y]._index;void 0===n[y]?(p=e.idf(this.invertedIndex[y],this.documentCount),n[y]=p):p=n[y],g=p*((this._k1+1)*v)/(this._k1*(1-this._b+this._b*(u/this.averageFieldLength[a]))+v),m=Math.round(1e3*g)/1e3,l.insert(x,m)}t[o]=l}this.fieldVectors=t},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},e.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},e.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);void 0===this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);void 0===this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var u=0;u<a.length;u++){var l=a[u];void 0===this.metadata[i][o][l]?this.metadata[i][o][l]=e.metadata[i][o][l]:this.metadata[i][o][l]=this.metadata[i][o][l].concat(e.metadata[i][o][l])}}}},e.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(!(t in this.metadata[e]))return void(this.metadata[e][t]=r);for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}},e.Query=function(e){this.clauses=[],this.allFields=e},e.Query.wildcard="*",e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),this.clauses.push(t),this},e.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},e.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},e.QueryParseError.prototype=new Error,e.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},e.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,r;do t=this.next(),r=t.charCodeAt(0);while(r>47&&r<58);t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var r=t.next();if(r==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(92!=r.charCodeAt(0)){if(":"==r)return e.QueryLexer.lexField;if("~"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if("^"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if(r.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}else t.escapeCharacter()}},e.QueryParser=function(t,r){this.lexer=new e.QueryLexer(t),this.query=r,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseFieldOrTerm;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},e.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},e.QueryParser.parseFieldOrTerm=function(t){var r=t.peekLexeme();if(void 0!==r)switch(r.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var i="expected either a field or a term, found "+r.type;throw r.str.length>=1&&(i+=" with value '"+r.str+"'"),new e.QueryParseError(i,r.start,r.end)}},e.QueryParser.parseField=function(t){var r=t.consumeLexeme();if(void 0!==r){var i;if(t.query.allFields.indexOf(r.str)==-1){var n=t.query.allFields.map(function(e){return"'"+e+"'"}).join(", ");throw i="unrecognised field '"+r.str+"', possible fields: "+n,new e.QueryParseError(i,r.start,r.end)}t.currentClause.fields=[r.str];var s=t.peekLexeme();if(void 0===s)throw i="expecting term, found nothing",new e.QueryParseError(i,r.start,r.end);switch(s.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw i="expecting term, found '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseTerm=function(t){var r=t.consumeLexeme();if(void 0!==r){t.currentClause.term=r.str.toLowerCase(),r.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1);var i=t.peekLexeme();if(void 0===i)return void t.nextClause();switch(i.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:var n="Unexpected lexeme type '"+i.type+"'";throw new e.QueryParseError(n,i.start,i.end)}}},e.QueryParser.parseEditDistance=function(t){var r=t.consumeLexeme();if(void 0!==r){var i,n=parseInt(r.str,10);if(isNaN(n))throw i="edit distance must be numeric",new e.QueryParseError(i,r.start,r.end);t.currentClause.editDistance=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseBoost=function(t){var r,i=t.consumeLexeme();if(void 0!==i){var n=parseInt(i.str,10);if(isNaN(n))throw r="boost must be numeric",new e.QueryParseError(r,i.start,i.end);t.currentClause.boost=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw r="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(r,s.start,s.end)}}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e,t){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module&&module.exports?module.exports=t(e):e.Levenshtein=t(e)}(this,function(e){function t(e,t){var r,i;for(r=-1,i=e.length;++r<i;)t(e[r],r,e)}function r(e,r){var i;return i=Array(e.length),t(e,function(e,t,n){i.push(r(e,t,n))}),i}function i(e,r,i){return t(e,function(e,t,n){i=r(e,t,n)}),i}function n(e,t){return e.charAt(t)}function s(e,t){return e[t]}function o(e,r){var i,o,a,u;if("string"==typeof e&&"string"==typeof r)u=n;else{if("object"!=typeof e||"object"!=typeof r)throw"Levensthtein: input must be two strings or two arrays";u=s}return a=this._matrix=[],e==r?(this.distance=0,this.distance):""===e?(this.distance=r.length,this.distance):""===r?(this.distance=e.length,this.distance):(i=[0],t(e,function(e,t){t++,i[t]=t}),a[0]=i,t(r,function(n,s){o=[++s],t(e,function(t,n){n++,u(e,n-1)==u(r,s-1)?o[n]=i[n-1]:o[n]=Math.min(i[n]+1,o[n-1]+1,i[n-1]+1)}),i=o,a[a.length]=i}),this.distance=o[o.length-1],this.distance)}return o.prototype.toString=o.prototype.inspect=function(e){var t,n,s,o,a;for(t=this.getMatrix(),n=i(t,function(e,t){return Math.max(e,i(t,Math.max,0))},0),s=Array((n+"").length).join(" "),o=[];o.length<(t[0]&&t[0].length||0);)o[o.length]=Array(s.length+1).join("-");return o=o.join("-+")+"-",a=r(t,function(e){var t;return t=r(e,function(e){return(s+e).slice(-s.length)}),t.join(" |")+" "}),a.join("\n"+o+"\n")},o.prototype.getSteps=function(){var e,t,r,i,n,s,o,a;for(e=[],t=this.getMatrix(),r=t.length-1,i=t[0].length-1;0!==r||0!==i;)n=i>0?t[r][i-1]:Number.MAX_VALUE,s=r>0?t[r-1][i]:Number.MAX_VALUE,o=i>0&&r>0?t[r-1][i-1]:Number.MAX_VALUE,a=Math.min(n,s,o),a===o?(o<t[r][i]&&e.push(["substitute",i,r]),r--,i--):a===s?(e.push(["insert",i,r]),r--):(e.push(["delete",i,r]),i--);return e},o.prototype.getMatrix=function(){return this._matrix.slice()},o.prototype.valueOf=function(){return this.distance},o}),e.fn.ghostHunter=function(t){var r=e.extend({},e.fn.ghostHunter.defaults,t);if(r.results)return a.init(this,r),a},e.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!0,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{prettyPubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,includepages:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1};var t=function(e){var t=new Date(e),r=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getDate()+" "+r[t.getMonth()]+" "+t.getFullYear()},r=function(e){return e.replace(/^\//,"").replace(/\//g,"-")},i=null,n=function(){e(".gh-search-item").each(function(){var e=this.getAttribute("id"),t=e.replace(/^new-/,"");this.setAttribute("id",t)})},s=function(e,t,r){for(var i=0,s=r.length;i<s;i++){var o=r[i];if("delete"==o[0])e.eq(o[1]-1).remove();else{var a=t[o[2]-1].ref,u=this.blogData[a],l=this.format(this.result_template,u);if("substitute"===o[0])e.eq(o[1]-1).replaceWith(l);else if("insert"===o[0]){var h;h=0===o[1]?null:o[1]-1,e.eq(h).after(l)}}}n()},o=function(){this.blogData={},this.latestPost=0;var i={limit:"all",include:"tags",formats:["plaintext"]};this.includepages&&(i.filter="(page:true,page:false)");var n=this;e.get(ghost.url.api("posts",i)).done(function(e){var i=e.posts;n.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),this.field("plaintext"),this.field("pubDate"),this.field("tag"),i.forEach(function(e){var r=new Date(e.updated_at).getTime(),i=new Date(n.latestPost).getTime();r>i&&(n.latestPost=e.updated_at);var s=e.tags.map(function(e){return e.name});null===e.meta_description&&(e.meta_description="");var o=s.join(", ");o.length<1&&(o="undefined");var a={id:String(e.id),title:String(e.title),description:String(e.custom_excerpt),plaintext:String(e.plaintext),pubDate:String(e.published_at),tag:o};this.add(a);var u=n.subpath+e.url;n.blogData[e.id]={title:e.title,description:e.meta_description,pubDate:t(a.pubDate),link:u,tags:s},n.item_preprocessor&&Object.assign(n.blogData[e.id],n.item_preprocessor(e))},this)});try{var s=r(n.subpath);localStorage.setItem("ghost_"+s+"_lunrIndex",JSON.stringify(n.index)),localStorage.setItem("ghost_"+s+"_blogData",JSON.stringify(n.blogData)),localStorage.setItem("ghost_"+s+"_latestPost",n.latestPost)}catch(o){}n.indexing_end&&n.indexing_end(),n.isInit=!0})},a={isInit:!1,init:function(e,t){var r=this;Object.assign(this,t);var i=function(){};t.onPageLoad?(i=function(){r.loadAPI()},window.setTimeout(i,1)):e.focus(function(){r.loadAPI()}),e.closest("form").submit(function(t){t.preventDefault(),r.find(e.val())}),t.onKeyUp&&(e.keydown(function(e){if(13===e.which)return!1}),e.keyup(function(t){r.find(e.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var t=r(this.subpath);this.index=localStorage.getItem("ghost_"+t+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+t+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+t+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(i){}}if(this.isInit){var n={limit:"all",filter:"updated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",fields:"id"},s=this;e.get(ghost.url.api("posts",n)).done(function(e){e.posts.length>0?o.call(s):(s.indexing_end&&s.indexing_end(),s.isInit=!0)})}else o.call(this)},find:function(t){clearTimeout(i),t||(t=""),t=t.toLowerCase(),i=setTimeout(function(){for(var r=[],i=t.split(/\s+/),o=0,a=i.length;o<a;o++){var u=i[o];u&&r.push(this.index.query(function(e){e.term(u,{usePipeline:!0,boost:100}),e.term(u,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(u,{usePipeline:!1,editDistance:1,boost:1})}))}var l;if(r.length>1)for(l=r[0],r=r.slice(1),o=l.length-1;o>-1;o--){var h=l[o].ref;for(j=0,jlen=r.length;j<jlen;j++){for(var d={},c=0,f=r[j].length;c<f;c++)d[r[j][c].ref]=!0;if(!d[h]){l=l.slice(0,o).concat(l.slice(o+1));break}}}else l=1===r.length?r[0]:[];var p=e(this.results),g=[];for(0===l.length?(p.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&p.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(p.length>0?p.children().eq(0).replaceWith(this.format(this.info_template,{amount:l.length
})):p.append(this.format(this.info_template,{amount:l.length}))),this.before&&this.before(),o=0;o<l.length;o++){var m=l[o].ref,y=this.blogData[m];y&&(y.ref=m,g.push(y))}var v=e(".gh-search-item"),x=v.map(function(){return this.id.slice(3)}).get();if(0===x.length){for(o=0,a=g.length;o<a;o++)p.append(this.format(this.result_template,g[o]));n()}else{var w=[];for(o=0,a=l.length;o<a;o++)w.push(l[o].ref);var b=new Levenshtein(x,w),k=b.getSteps();s.call(this,v,l,k)}this.onComplete&&this.onComplete(g)}.bind(this),100)},clear:function(){e(this.results).empty()},format:function(e,t){return e.replace(/{{([^{}]*)}}/g,function(e,r){var i=t[r];return"string"==typeof i||"number"==typeof i?i:e})}}}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var n=function(e){if("string"!=typeof e)return 0;var n=e.match(/\d/g);return n?Math.min.apply(null,n):1},t=function(n,t){for(;t--;)n=e("<ol/>").appendTo(n),t&&(n=e("<li/>").appendTo(n));return n},r=function(e,n){for(;n--;)e=e.parent();return e},o=function(e,n){return function(t,r,o){var i=t.text(),a=n+"-"+o;r.text(i);var c=t[0],f=r[0],u=e?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(i){var a=i.selector,c=i.scope,f=e("<ol/>"),u=f,p=null,s=n(a),l=o(i.overwrite,i.prefix);return e(c).find(a).each(function(o,i){var a=n(i.tagName),c=a-s;c>0&&(u=t(p,c)),c<0&&(u=r(u,2*-c)),u.length||(u=f);var h=e("<li/>"),d=e("<a/>");l(e(i),d,o),h.append(d).appendTo(u),p=h,s=a}),f};e.fn.initTOC=function(n){var t={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};n=e.extend(t,n);var r=n.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");e(this).append(i(n));var o=location.hash;return o&&setTimeout(function(){var e=document.getElementById(o.slice(1));e&&e.scrollIntoView()},0),e(this)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJqcXVlcnkuZ2hvc3RodW50ZXIuanMiLCJqcXVlcnkudG9jLmpzIl0sIm5hbWVzIjpbImxvYWRKUyIsInVybCIsImNhbGxiYWNrIiwiZWwiLCJpc0lFIiwid2luZG93IiwiQWN0aXZlWE9iamVjdCIsImlzSUU2IiwiWE1MSHR0cFJlcXVlc3QiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0eXBlIiwiYXN5bmMiLCJyZWFkeVN0YXRlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwib25sb2FkIiwic3JjIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCIkIiwiZm4iLCJleHRlbmQiLCJpc09uU2NyZWVuVmlzaWJsZSIsImhhc0NsYXNzIiwid2luIiwidmlld3BvcnQiLCJ0b3AiLCJzY3JvbGxUb3AiLCJsZWZ0Iiwic2Nyb2xsTGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJib3R0b20iLCJoZWlnaHQiLCJib3VuZHMiLCJ0aGlzIiwib2Zmc2V0Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiR2VuZXJhbCIsImlzTW9iaWxlIiwiaXNXZWNoYXQiLCJ2aWV3V2lkdGgiLCJhYnNVcmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImluaXQiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNBbmRyb2lkIiwiYXBwVmVyc2lvbiIsIm1hdGNoIiwiYWRkQ2xhc3MiLCJ1cGRhdGVJbWFnZVdpZHRoIiwicmV3YXJkTG9hZGVyIiwid2ViRm9udExvYWRlciIsInNjcm9sbFRvUG9zIiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJwb3NpdGlvbiIsIlNUUl9UT19UT1AiLCJidXR0b24iLCJhcHBlbmRUbyIsInNjcm9sbCIsImZhZGVJbiIsImZhZGVPdXQiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJoYXNoIiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbk1hcCIsInR3aXR0ZXIiLCJxem9uZSIsIndlaWJvIiwiZmFjZWJvb2siLCJnaXRodWIiLCJkb3ViYW4iLCJnb29nbGUiLCJsdW9sZWkiLCJkcmliYmxlIiwidjJleCIsInpoaWh1Iiwid2lraXBlZGlhIiwiamlhbnNodSIsInlvdWt1IiwieW91dHViZSIsImp1ZWppbiIsIndlaXhpbiIsInNlZ21lbnRmYXVsdCIsIm5hbWUiLCJNYXBLZXkiLCJpbmRleE9mIiwiYWRkSWNvbnMiLCJpIiwiX3NyYyIsImF0dHIiLCJ0bXAiLCJocmVmIiwiX3NlbGZEb21haW4iLCJob3N0bmFtZSIsInByZXBlbmQiLCJfc2VsZkNvbG9yIiwiZmluZCIsImNzcyIsIl9vcmlnaW5hbENvbG9yIiwiaG92ZXIiLCJsb2FkUVIiLCJhbGlwYXkiLCJ3ZWNoYXQiLCJodG1sIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwic2Nyb2xsSGludCIsIiRjb3ZlciIsImNsb3Nlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwicGFnZVlPZmZzZXQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJpbml0VE9DIiwic2VsZWN0b3IiLCJzY29wZSIsIm92ZXJ3cml0ZSIsInByZWZpeCIsInNlYXJjaEZpZWxkIiwiY2xlYXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJkaXNxdXNfc2hvcnRuYW1lIiwiZGlzcXVzX2xvYWRlZCIsIl90aGlzIiwic2xpZGVUb2dnbGUiLCJhamF4IiwiZGF0YVR5cGUiLCJjYWNoZSIsIm9wdGlvbnMiLCJ1cGRhdGUiLCJjb3VudGVyIiwiZWxlbWVudHMiLCJzZXR0aW5ncyIsInNraXBfaW52aXNpYmxlIiwiaXMiLCJhYm92ZXRoZXRvcCIsImxlZnRvZmJlZ2luIiwiYmVsb3d0aGVmb2xkIiwicmlnaHRvZmZvbGQiLCJmYWlsdXJlX2xpbWl0IiwidHJpZ2dlciIsIiRjb250YWluZXIiLCJ0aHJlc2hvbGQiLCJldmVudCIsImVmZmVjdCIsImNvbnRhaW5lciIsImFwcGVhciIsInBsYWNlaG9sZGVyIiwidW5kZWZpbmVkIiwiZmFpbHVyZWxpbWl0IiwiZWZmZWN0c3BlZWQiLCJlZmZlY3Rfc3BlZWQiLCJiaW5kIiwic2VsZiIsIiRzZWxmIiwibG9hZGVkIiwib25lIiwiZWxlbWVudHNfbGVmdCIsImxlbmd0aCIsImNhbGwiLCJ1cGRhdGVkVXJsIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIiwibHVuciIsImNvbmZpZyIsImJ1aWxkZXIiLCJCdWlsZGVyIiwicGlwZWxpbmUiLCJ0cmltbWVyIiwic3RvcFdvcmRGaWx0ZXIiLCJzdGVtbWVyIiwic2VhcmNoUGlwZWxpbmUiLCJidWlsZCIsInZlcnNpb24iLCJ1dGlscyIsIndhcm4iLCJnbG9iYWwiLCJtZXNzYWdlIiwiY29uc29sZSIsImFzU3RyaW5nIiwib2JqIiwidG9TdHJpbmciLCJGaWVsZFJlZiIsImRvY1JlZiIsImZpZWxkTmFtZSIsInN0cmluZ1ZhbHVlIiwiX3N0cmluZ1ZhbHVlIiwiam9pbmVyIiwiZnJvbVN0cmluZyIsInMiLCJuIiwiZmllbGRSZWYiLCJzbGljZSIsInByb3RvdHlwZSIsImlkZiIsInBvc3RpbmciLCJkb2N1bWVudENvdW50IiwiZG9jdW1lbnRzV2l0aFRlcm0iLCJPYmplY3QiLCJrZXlzIiwieCIsIk1hdGgiLCJsb2ciLCJhYnMiLCJUb2tlbiIsInN0ciIsIm1ldGFkYXRhIiwiY2xvbmUiLCJ0b2tlbml6ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJ0IiwidHJpbSIsImxlbiIsInRva2VucyIsInNsaWNlRW5kIiwic2xpY2VTdGFydCIsImNoYXIiLCJjaGFyQXQiLCJzbGljZUxlbmd0aCIsInNlcGFyYXRvciIsInB1c2giLCJpbmRleCIsIlBpcGVsaW5lIiwiX3N0YWNrIiwicmVnaXN0ZXJlZEZ1bmN0aW9ucyIsImNyZWF0ZSIsInJlZ2lzdGVyRnVuY3Rpb24iLCJsYWJlbCIsIndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZCIsImlzUmVnaXN0ZXJlZCIsInNlcmlhbGlzZWQiLCJmb3JFYWNoIiwiZm5OYW1lIiwiRXJyb3IiLCJmbnMiLCJhcmd1bWVudHMiLCJhZnRlciIsImV4aXN0aW5nRm4iLCJuZXdGbiIsInBvcyIsInNwbGljZSIsImJlZm9yZSIsInJ1biIsInN0YWNrTGVuZ3RoIiwiciIsIm1lbW8iLCJ0b2tlbiIsImoiLCJyZXN1bHQiLCJjb25jYXQiLCJyZWR1Y2UiLCJydW5TdHJpbmciLCJyZXNldCIsInRvSlNPTiIsIlZlY3RvciIsIl9tYWduaXR1ZGUiLCJwb3NpdGlvbkZvckluZGV4Iiwic3RhcnQiLCJlbmQiLCJwaXZvdFBvaW50IiwiZmxvb3IiLCJwaXZvdEluZGV4IiwiaW5zZXJ0IiwiaW5zZXJ0SWR4IiwidmFsIiwidXBzZXJ0IiwibWFnbml0dWRlIiwic3VtT2ZTcXVhcmVzIiwiZWxlbWVudHNMZW5ndGgiLCJzcXJ0IiwiZG90Iiwib3RoZXJWZWN0b3IiLCJkb3RQcm9kdWN0IiwiYiIsImFMZW4iLCJiTGVuIiwiYVZhbCIsImJWYWwiLCJzaW1pbGFyaXR5IiwidG9BcnJheSIsIm91dHB1dCIsInN0ZXAybGlzdCIsImF0aW9uYWwiLCJ0aW9uYWwiLCJlbmNpIiwiYW5jaSIsIml6ZXIiLCJibGkiLCJhbGxpIiwiZW50bGkiLCJlbGkiLCJvdXNsaSIsIml6YXRpb24iLCJhdGlvbiIsImF0b3IiLCJhbGlzbSIsIml2ZW5lc3MiLCJmdWxuZXNzIiwib3VzbmVzcyIsImFsaXRpIiwiaXZpdGkiLCJiaWxpdGkiLCJsb2dpIiwic3RlcDNsaXN0IiwiaWNhdGUiLCJhdGl2ZSIsImFsaXplIiwiaWNpdGkiLCJpY2FsIiwiZnVsIiwibmVzcyIsImMiLCJ2IiwiQyIsIlYiLCJtZ3IwIiwibWVxMSIsIm1ncjEiLCJzX3YiLCJyZV9tZ3IwIiwiUmVnRXhwIiwicmVfbWdyMSIsInJlX21lcTEiLCJyZV9zX3YiLCJyZV8xYSIsInJlMl8xYSIsInJlXzFiIiwicmUyXzFiIiwicmVfMWJfMiIsInJlMl8xYl8yIiwicmUzXzFiXzIiLCJyZTRfMWJfMiIsInJlXzFjIiwicmVfMiIsInJlXzMiLCJyZV80IiwicmUyXzQiLCJyZV81IiwicmVfNV8xIiwicmUzXzUiLCJwb3J0ZXJTdGVtbWVyIiwidyIsInN0ZW0iLCJzdWZmaXgiLCJmaXJzdGNoIiwicmUiLCJyZTIiLCJyZTMiLCJyZTQiLCJzdWJzdHIiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJmcCIsImV4ZWMiLCJnZW5lcmF0ZVN0b3BXb3JkRmlsdGVyIiwic3RvcFdvcmRzIiwid29yZHMiLCJzdG9wV29yZCIsIlRva2VuU2V0IiwiZWRnZXMiLCJpZCIsIl9uZXh0SWQiLCJmcm9tQXJyYXkiLCJhcnIiLCJmaW5pc2giLCJyb290IiwiZnJvbUNsYXVzZSIsImNsYXVzZSIsImZyb21GdXp6eVN0cmluZyIsInRlcm0iLCJlZGl0RGlzdGFuY2UiLCJzdGFjayIsIm5vZGUiLCJlZGl0c1JlbWFpbmluZyIsImZyYW1lIiwicG9wIiwibm9FZGl0Tm9kZSIsImRlbGV0aW9uTm9kZSIsInN1YnN0aXR1dGlvbk5vZGUiLCJpbnNlcnRpb25Ob2RlIiwidHJhbnNwb3NlTm9kZSIsImNoYXJBIiwiY2hhckIiLCJ3aWxkY2FyZEZvdW5kIiwiZmluYWwiLCJuZXh0IiwiZWRnZSIsIl9zdHIiLCJsYWJlbHMiLCJzb3J0IiwiaW50ZXJzZWN0IiwicU5vZGUiLCJxRWRnZXMiLCJxTGVuIiwibkVkZ2VzIiwibkxlbiIsInEiLCJxRWRnZSIsIm5FZGdlIiwicHJldmlvdXNXb3JkIiwidW5jaGVja2VkTm9kZXMiLCJtaW5pbWl6ZWROb2RlcyIsIndvcmQiLCJjb21tb25QcmVmaXgiLCJtaW5pbWl6ZSIsImNoaWxkIiwibmV4dE5vZGUiLCJwYXJlbnQiLCJkb3duVG8iLCJjaGlsZEtleSIsIkluZGV4IiwiYXR0cnMiLCJpbnZlcnRlZEluZGV4IiwiZmllbGRWZWN0b3JzIiwidG9rZW5TZXQiLCJmaWVsZHMiLCJzZWFyY2giLCJxdWVyeVN0cmluZyIsInF1ZXJ5IiwicGFyc2VyIiwiUXVlcnlQYXJzZXIiLCJwYXJzZSIsIlF1ZXJ5IiwibWF0Y2hpbmdGaWVsZHMiLCJxdWVyeVZlY3RvcnMiLCJ0ZXJtRmllbGRDYWNoZSIsImNsYXVzZXMiLCJ0ZXJtcyIsInVzZVBpcGVsaW5lIiwibSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZXJtSW5kZXgiLCJ0ZXJtVG9rZW5TZXQiLCJleHBhbmRlZFRlcm1zIiwiZXhwYW5kZWRUZXJtIiwiX2luZGV4IiwiayIsImZpZWxkIiwiZmllbGRQb3N0aW5nIiwibWF0Y2hpbmdEb2N1bWVudFJlZnMiLCJ0ZXJtRmllbGQiLCJib29zdCIsImwiLCJmaWVsZE1hdGNoIiwibWF0Y2hpbmdEb2N1bWVudFJlZiIsIm1hdGNoaW5nRmllbGRSZWYiLCJNYXRjaERhdGEiLCJtYXRjaGluZ0ZpZWxkUmVmcyIsInJlc3VsdHMiLCJtYXRjaGVzIiwiZG9jTWF0Y2giLCJmaWVsZFZlY3RvciIsInNjb3JlIiwibWF0Y2hEYXRhIiwiY29tYmluZSIsInJlZiIsInNlcmlhbGl6ZWRJbmRleCIsInNlcmlhbGl6ZWRWZWN0b3JzIiwic2VyaWFsaXplZEludmVydGVkSW5kZXgiLCJ0b2tlblNldEJ1aWxkZXIiLCJ0dXBsZSIsIl9yZWYiLCJfZmllbGRzIiwiZmllbGRUZXJtRnJlcXVlbmNpZXMiLCJmaWVsZExlbmd0aHMiLCJfYiIsIl9rMSIsIm1ldGFkYXRhV2hpdGVsaXN0IiwibnVtYmVyIiwiazEiLCJkb2MiLCJmaWVsZFRlcm1zIiwibWV0YWRhdGFLZXkiLCJjYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzIiwiZmllbGRSZWZzIiwibnVtYmVyT2ZGaWVsZHMiLCJhY2N1bXVsYXRvciIsImRvY3VtZW50c1dpdGhGaWVsZCIsImF2ZXJhZ2VGaWVsZExlbmd0aCIsImNyZWF0ZUZpZWxkVmVjdG9ycyIsImZpZWxkUmVmc0xlbmd0aCIsInRlcm1JZGZDYWNoZSIsImZpZWxkTGVuZ3RoIiwidGVybUZyZXF1ZW5jaWVzIiwidGVybXNMZW5ndGgiLCJzY29yZVdpdGhQcmVjaXNpb24iLCJ0ZiIsInJvdW5kIiwiY3JlYXRlVG9rZW5TZXQiLCJ1c2UiLCJhcmdzIiwidW5zaGlmdCIsImFwcGx5IiwiY2xvbmVkTWV0YWRhdGEiLCJtZXRhZGF0YUtleXMiLCJrZXkiLCJvdGhlck1hdGNoRGF0YSIsImFsbEZpZWxkcyIsIndpbGRjYXJkIiwiTk9ORSIsIkxFQURJTkciLCJUUkFJTElORyIsIlF1ZXJ5UGFyc2VFcnJvciIsIlF1ZXJ5TGV4ZXIiLCJsZXhlbWVzIiwiZXNjYXBlQ2hhclBvc2l0aW9ucyIsInN0YXRlIiwibGV4VGV4dCIsInNsaWNlU3RyaW5nIiwic3ViU2xpY2VzIiwiam9pbiIsImVtaXQiLCJlc2NhcGVDaGFyYWN0ZXIiLCJFT1MiLCJpZ25vcmUiLCJiYWNrdXAiLCJhY2NlcHREaWdpdFJ1biIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIm1vcmUiLCJGSUVMRCIsIlRFUk0iLCJFRElUX0RJU1RBTkNFIiwiQk9PU1QiLCJsZXhGaWVsZCIsImxleGVyIiwibGV4VGVybSIsImxleEVkaXREaXN0YW5jZSIsImxleEJvb3N0IiwibGV4RU9TIiwidGVybVNlcGFyYXRvciIsImN1cnJlbnRDbGF1c2UiLCJsZXhlbWVJZHgiLCJwYXJzZUZpZWxkT3JUZXJtIiwicGVla0xleGVtZSIsImNvbnN1bWVMZXhlbWUiLCJsZXhlbWUiLCJuZXh0Q2xhdXNlIiwiY29tcGxldGVkQ2xhdXNlIiwicGFyc2VGaWVsZCIsInBhcnNlVGVybSIsImVycm9yTWVzc2FnZSIsInBvc3NpYmxlRmllbGRzIiwiZiIsIm5leHRMZXhlbWUiLCJwYXJzZUVkaXREaXN0YW5jZSIsInBhcnNlQm9vc3QiLCJwYXJzZUludCIsImlzTmFOIiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJMZXZlbnNodGVpbiIsImFycmF5IiwiZ2V0Q2hhciIsImlkeCIsImdldEFycmF5TWVtYmVyIiwic3RyX20iLCJzdHJfbiIsInByZXZpb3VzIiwiY3VycmVudCIsIm1hdHJpeCIsImdldEVsZW0iLCJfbWF0cml4IiwiZGlzdGFuY2UiLCJuX3ZhbCIsIm5faWR4IiwibV92YWwiLCJtX2lkeCIsIm1pbiIsImluc3BlY3QiLCJub19wcmludCIsIm1heCIsImJ1ZmYiLCJzZXAiLCJyb3dzIiwiZ2V0TWF0cml4IiwibyIsInJvdyIsImNlbGxzIiwiY2VsbCIsImdldFN0ZXBzIiwic3RlcHMiLCJ5IiwidSIsImQiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJ2YWx1ZU9mIiwiZ2hvc3RIdW50ZXIiLCJvcHRzIiwiZGVmYXVsdHMiLCJwbHVnaW5NZXRob2RzIiwicmVzdWx0c0RhdGEiLCJvblBhZ2VMb2FkIiwib25LZXlVcCIsInJlc3VsdF90ZW1wbGF0ZSIsImluZm9fdGVtcGxhdGUiLCJkaXNwbGF5U2VhcmNoSW5mbyIsInplcm9SZXN1bHRzSW5mbyIsIm9uQ29tcGxldGUiLCJpbmNsdWRlcGFnZXMiLCJmaWx0ZXJmaWVsZHMiLCJzdWJwYXRoIiwiaXRlbV9wcmVwcm9jZXNzb3IiLCJpbmRleGluZ19zdGFydCIsImluZGV4aW5nX2VuZCIsInByZXR0eURhdGUiLCJkYXRlIiwiRGF0ZSIsIm1vbnRoTmFtZXMiLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldFN1YnBhdGhLZXkiLCJsYXN0VGltZW91dElEIiwic2V0dGxlSURzIiwib2xkQXR0ciIsImdldEF0dHJpYnV0ZSIsIm5ld0F0dHIiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVTZWFyY2hMaXN0IiwibGlzdEl0ZW1zIiwiYXBpRGF0YSIsImlsZW4iLCJzdGVwIiwiZXEiLCJsdW5ycmVmIiwicG9zdERhdGEiLCJibG9nRGF0YSIsImZvcm1hdCIsInJlcGxhY2VXaXRoIiwiZ3JhYkFuZEluZGV4IiwibGF0ZXN0UG9zdCIsInBhcmFtcyIsImxpbWl0IiwiaW5jbHVkZSIsImZvcm1hdHMiLCJmaWx0ZXIiLCJtZSIsImdldCIsImdob3N0IiwiYXBpIiwiZG9uZSIsImRhdGEiLCJpZHhTcmMiLCJwb3N0cyIsImFycmF5SXRlbSIsIml0ZW1EYXRlIiwidXBkYXRlZF9hdCIsImdldFRpbWUiLCJyZWNvcmRlZERhdGUiLCJ0YWdfYXJyIiwidGFncyIsIm1ldGFfZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInBhcnNlZERhdGEiLCJTdHJpbmciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY3VzdG9tX2V4Y2VycHQiLCJwbGFpbnRleHQiLCJwdWJEYXRlIiwicHVibGlzaGVkX2F0IiwidGFnIiwibG9jYWxVcmwiLCJsaW5rIiwiYXNzaWduIiwic3VicGF0aEtleSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJpc0luaXQiLCJ0YXJnZXQiLCJ0aGF0IiwibWlhbSIsImxvYWRBUEkiLCJzdWJtaXQiLCJrZXlkb3duIiwid2hpY2giLCJrZXl1cCIsImdldEl0ZW0iLCJ2YWx1ZSIsImNsZWFyVGltZW91dCIsInRoaW5nc0ZvdW5kIiwidmFsdWVTcGxpdCIsInNwbGl0Iiwic2VhcmNoUmVzdWx0IiwiamxlbiIsIm90aGVyUmVmcyIsImtsZW4iLCJlbXB0eSIsImFwcGVuZCIsImFtb3VudCIsImNoaWxkcmVuIiwiY3VycmVudFJlZnMiLCJuZXdSZWZzIiwibGV2ZW5zaHRlaW4iLCJqUXVlcnkiLCJnZXRMZXZlbCIsImhlYWRlciIsImRlY3MiLCJjcmVhdGVMaXN0IiwiJHdyYXBwZXIiLCJjb3VudCIsImp1bXBCYWNrIiwiJGN1cnJlbnRXcmFwcGVyIiwic2V0QXR0cnMiLCIkc3JjIiwiJHRhcmdldCIsImNvbnRlbnQiLCJ0ZXh0IiwicHJlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYnVpbGRUT0MiLCIkcmV0IiwiJGxhc3RMaSIsInByZXZEZXB0aCIsIl9zZXRBdHRycyIsImVsZW0iLCJjdXJyZW50RGVwdGgiLCJ0YWdOYW1lIiwiJGxpIiwiJGEiLCJkZWZhdWx0T3B0cyIsIlR5cGVFcnJvciIsImN1cnJlbnRIYXNoIiwiYW5jaG9yIiwic2Nyb2xsSW50b1ZpZXciXSwibWFwcGluZ3MiOiJBQXVCQSxRQUFTQSxRQUFPQyxFQUFLQyxFQUFVQyxHQUMzQixHQUFJQyxLQUFTQyxPQUFPQyxjQUNoQkMsRUFBUUgsSUFBU0MsT0FBT0csZUFDeEJDLEVBQVNDLFNBQVNDLGNBQWMsVUFDaENDLEVBQU9MLEVBQVFHLFNBQVNHLGdCQUFrQkgsU0FBU0kscUJBQXFCLFFBQVEsRUFDcEZMLEdBQU9NLEtBQU8sa0JBQ2ROLEVBQU9PLE9BQVEsRUFDWFAsRUFBT1EsV0FDUFIsRUFBT1MsbUJBQXFCLFdBQ0MsVUFBckJULEVBQU9RLFlBQStDLFlBQXJCUixFQUFPUSxhQUN4Q1IsRUFBT1MsbUJBQXFCLEtB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c0MsR0FDTDlGLEtBQUssU0FBVWdPLEVBQU9vZixHQUNuQixHQUFJQyxHQUFlckIsRUFBU29CLEVBQUtFLFNBQzdCdHZCLEVBQVNxdkIsRUFBZUgsQ0FFeEJsdkIsR0FBUyxJQUNUb3VCLEVBQVdELEVBQVdjLEVBQVNqdkIsSUFHL0JBLEVBQVMsSUFVVG91QixFQUFXRSxFQUFTRixFQUFvQixHQUFUcHVCLElBRzlCb3VCLEVBQVN6akIsU0FDVnlqQixFQUFXWSxFQUdmLElBQUlPLEdBQU14d0IsRUFBRSxTQUNSeXdCLEVBQUt6d0IsRUFBRSxPQUVYb3dCLEdBQVVwd0IsRUFBRXF3QixHQUFPSSxFQUFJeGYsR0FFdkJ1ZixFQUFJOUIsT0FBTytCLEdBQUk1c0IsU0FBU3dyQixHQUV4QmEsRUFBVU0sRUFDVkwsRUFBWUcsSUFHYkwsRUFhWGp3QixHQUFFQyxHQUFHNkksUUFBVSxTQUFVZ0IsR0FDckIsR0FBSTRtQixJQUNBM25CLFNBQVUseUJBQ1ZDLE1BQU8sT0FDUEMsV0FBVyxFQUNYQyxPQUFRLE1BR1pZLEdBQVU5SixFQUFFRSxPQUFPd3dCLEVBQWE1bUIsRUFFaEMsSUFBSWYsR0FBV2UsRUFBUWYsUUFFdkIsSUFBd0IsZ0JBQWJBLEdBQ1AsS0FBTSxJQUFJNG5CLFdBQVUsNEJBR3hCLEtBQUs1bkIsRUFBUzVHLE1BQU0sdUJBQ2hCLEtBQU0sSUFBSXd1QixXQUFVLG1DQUd4QjN3QixHQUFFZ0IsTUFBTTB0QixPQUFPc0IsRUFBU2xtQixHQUV4QixJQUFJOG1CLEdBQWNudkIsU0FBUzRDLElBUzNCLE9BUEl1c0IsSUFDQXZuQixXQUFXLFdBQ1AsR0FBSXduQixHQUFTNXhCLFNBQVNXLGVBQWVneEIsRUFBWTFoQixNQUFNLEdBQ25EMmhCLElBQVFBLEVBQU9DLGtCQUNwQixHQUdBOXdCLEVBQUVnQiIsImZpbGUiOiJkZXYubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJC5mbi5leHRlbmQoe1xuXG4gICAgaXNPblNjcmVlblZpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgICAgICAgdmFyIHZpZXdwb3J0ID0ge1xuICAgICAgICAgICAgdG9wOiB3aW4uc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXG4gICAgICAgIH07XG4gICAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgICAgICB2aWV3cG9ydC5ib3R0b20gPSB2aWV3cG9ydC50b3AgKyB3aW4uaGVpZ2h0KCk7XG5cbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMub2Zmc2V0KCk7XG4gICAgICAgIGJvdW5kcy5yaWdodCA9IGJvdW5kcy5sZWZ0ICsgdGhpcy5vdXRlcldpZHRoKCk7XG4gICAgICAgIGJvdW5kcy5ib3R0b20gPSBib3VuZHMudG9wICsgdGhpcy5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XG4gICAgfSxcblxufSk7XG5cbmZ1bmN0aW9uIGxvYWRKUyh1cmwsIGNhbGxiYWNrLCBlbCkge1xuICAgIHZhciBpc0lFID0gISF3aW5kb3cuQWN0aXZlWE9iamVjdCxcbiAgICAgICAgaXNJRTYgPSBpc0lFICYmICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QsXG4gICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksXG4gICAgICAgIGhlYWQgPSBpc0lFNiA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHNjcmlwdC5zcmMgPSB1cmw7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgaGVhZC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbi8qKlxuICogWWFzdWtvIOmFjee9ruaWh+S7tlxuICog5aSa6K+06K+E6K666LCD55So562JXG4gKi9cblxudmFyIEdlbmVyYWwgPSB7XG4gICAgaXNNb2JpbGU6IGZhbHNlLFxuICAgIGlzV2VjaGF0OiBmYWxzZSxcbiAgICB2aWV3V2lkdGg6ICQod2luZG93KS53aWR0aCgpLFxuICAgIGFic1VybDogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdpbiA9IHdpbmRvdztcbiAgICAgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDtcbiAgICAgICAgdmFyIFVBID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgaXNBbmRyb2lkID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9hbmRyb2lkL2dpKTtcbiAgICAgICAgdmFyIGlzSVBob25lID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9pcGhvbmUvZ2kpO1xuICAgICAgICBpZiAoVUEubWF0Y2goL01pY3JvTWVzc2VuZ2VyL2kpID09IFwibWljcm9tZXNzZW5nZXJcIikge1xuICAgICAgICAgICAgR2VuZXJhbC5pc1dlY2hhdCA9IHRydWU7XG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3dlY2hhdC13ZWJ2aWV3Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhaXNBbmRyb2lkKSB7XG4gICAgICAgICAgICBHZW5lcmFsLmlzTW9iaWxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIEdlbmVyYWwudXBkYXRlSW1hZ2VXaWR0aCgpO1xuICAgICAgICAgICAgR2VuZXJhbC5yZXdhcmRMb2FkZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEdlbmVyYWwud2ViRm9udExvYWRlcigpO1xuICAgICAgICBHZW5lcmFsLnNjcm9sbFRvUG9zKCk7XG4gICAgfSxcbiAgICB1cGRhdGVJbWFnZVdpZHRoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRwb3N0Q29udGVudCA9ICQoXCIucG9zdC1jb250ZW50XCIpO1xuICAgICAgICAvLyAkcG9zdENvbnRlbnQuZml0VmlkcygpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlV2lkdGgoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRXaWR0aCA9ICRwb3N0Q29udGVudC5vdXRlcldpZHRoKCksIC8vIFdpZHRoIG9mIHRoZSBjb250ZW50XG4gICAgICAgICAgICAgICAgaW1hZ2VXaWR0aCA9IHRoaXMubmF0dXJhbFdpZHRoOyAvLyBPcmlnaW5hbCBpbWFnZSByZXNvbHV0aW9uXG5cbiAgICAgICAgICAgIGlmIChpbWFnZVdpZHRoID49IGNvbnRlbnRXaWR0aCkge1xuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdmdWxsLWltZycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnZnVsbC1pbWcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkaW1nID0gJChcIi5zaW5nbGUtcG9zdC1pbm5lciBpbWdcIikub24oJ2xvYWQnLCB1cGRhdGVJbWFnZVdpZHRoKTtcblxuICAgICAgICBmdW5jdGlvbiBjYXNwZXJGdWxsSW1nKCkge1xuICAgICAgICAgICAgJGltZy5lYWNoKHVwZGF0ZUltYWdlV2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzcGVyRnVsbEltZygpO1xuICAgIH0sXG5cbiAgICAvLyBHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250Lm1pbi5jc3MnIC8vIOi/meS4quaYryBFeG8g5a2X5L2T77yM6ICD6JmR5LiN5Yqg6L295a6DLOaPkOmrmOaXtumXtFxuICAgIHdlYkZvbnRMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBXZWJGb250Q29uZmlnID0ge1xuICAgICAgICAgICAgbG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgZm9udCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbToge1xuICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ09wZW4gU2FucycsICdpY29uZm9udCcsICdmb250YXdlc29tZSddLFxuICAgICAgICAgICAgICAgIHVybHM6IFtHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250Lm1pbi5jc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly9pbWcuaGFsZnJvc3QuY29tL2ZvbnRzcy9pY29uZm9udC5jc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcydcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9veWtl+S9k0pTJyk7XG4gICAgICAgICAgICBXZWJGb250LmxvYWQoe1xuICAgICAgICAgICAgICAgIGN1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICBmYW1pbGllczogWydPcGVuIFNhbnMnLCAnaWNvbmZvbnQnLCAnZm9udGF3ZXNvbWUnXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy/lubPmu5Hmu5rliqjliLDpobbpg6hcbiAgICBzY3JvbGxUb1BvczogZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIFNUUl9UT19UT1AgPSAn5oiR6KaB6aOe5Yiw5pyA6auYJyxcbiAgICAgICAgICAgIGNvdmVySGVpZ2h0ID0gcG9zaXRpb24gfHwgJCh3aW5kb3cpLmhlaWdodCgpOyAvL+iOt+W+l+WbvueJh+mrmOW6plxuICAgICAgICB2YXIgYnV0dG9uID0gJCgnPGEgaHJlZj1cIiNcIiBpZD1cInRvLXRvcFwiIHRpdGxlPVwiJyArIFNUUl9UT19UT1AgKyAnXCI+IDxkaXYgY2xhc3M9XCJ0by10b3Atd3JhcFwiPjwvZGl2PjwvYT4nKS5hcHBlbmRUbygnYm9keScpO1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+ICQod2luZG93KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVPdXQoNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICAgICAgfSwgNjY2LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oiR6LezJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLyrnu5nmlofnq6DkuK3nmoR1cmzmt7vliqBpY29uZm9udOaWueS+v+ivhuWIqyovXG4gICAgdXJsSWNvbmxpemU6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZG9tYWluLFxuICAgICAgICAgICAgX291dHB1dDtcbiAgICAgICAgdmFyIGljb25Gb250VGFnID0gJ2ljb25mb250JztcbiAgICAgICAgdmFyIGljb25NYXAgPSB7IC8q57Si5byVIOWPr+WcqOi/memHjOa3u+WKoOWMuemFjeinhOWImSovXG4gICAgICAgICAgICAndHdpdHRlcic6ICdpY29uZm9udC10d2l0dGVyIGljb24taWNvbmZvbnR0d2l0dGVyJyxcbiAgICAgICAgICAgICdxem9uZSc6ICdpY29uZm9udC1xem9uZSBpY29uLXF6b25lJyxcbiAgICAgICAgICAgICd3ZWlibyc6ICdpY29uZm9udC13ZWlibyBpY29uLWljb25mb250d2VpYm8nLFxuICAgICAgICAgICAgJ2ZhY2Vib29rJzogJ2ljb25mb250LWZhY2Vib29rIGljb24taWNvbmZvbnRmYWNlYm9vaycsXG4gICAgICAgICAgICAnZ2l0aHViJzogJ2ljb25mb250LWdpdGh1YiBpY29uLWdpdGh1YicsXG4gICAgICAgICAgICAnZG91YmFuJzogJ2ljb25mb250LWRvdWJhbiBpY29uLWljb25mb250ZG91YmFuJyxcbiAgICAgICAgICAgICdnb29nbGUnOiAnaWNvbmZvbnQtZ29vZ2xlIGljb24taWNvbmZvbnRnb29nbGUnLFxuICAgICAgICAgICAgJ2x1b2xlaSc6ICdpY29uZm9udC1sdW9sZWkgaWNvbi1sdW9sZWknLFxuICAgICAgICAgICAgJ2RyaWJibGUnOiAnaWNvbmZvbnQtZHJpYmJsZSBpY29uLWRyaWJiYmxlY2lyY2xlZCcsXG4gICAgICAgICAgICAndjJleCc6ICdpY29uZm9udC12MmV4IGljb24taWNvbmZvbnR2MmV4JyxcbiAgICAgICAgICAgICd6aGlodSc6ICdpY29uZm9udC16aGlodSBpY29uLWljb25mb250emhpaHUnLFxuICAgICAgICAgICAgJ3dpa2lwZWRpYSc6ICdpY29uZm9udC13aWtpcGVkaWEgaWNvbi1pY29uZm9udHdpa2lwZWRpYScsXG4gICAgICAgICAgICAnamlhbnNodSc6ICdpY29uZm9udC1qaWFuc2h1IGljb24tamlhbnNodScsXG4gICAgICAgICAgICAneW91a3UnOiAnaWNvbmZvbnQteW91a3UgaWNvbi1pY29uZm9udHlvdWt1JyxcbiAgICAgICAgICAgICd5b3V0dWJlJzogJ2ljb25mb250LXlvdXR1YmUgaWNvbi15b3V0dWJlJyxcbiAgICAgICAgICAgICdqdWVqaW4nOidpY29uZm9udC1qdWVqaW4gaWNvbi1qdWVqaW4nLFxuICAgICAgICAgICAgJ3dlaXhpbic6J2ljb25mb250LXdlaXhpbiBpY29uLWljb25mb250d2VjaGF0JyxcbiAgICAgICAgICAgICdzZWdtZW50ZmF1bHQnOidpY29uZm9udC1zZiBpY29uLWljb25zZi1jb3B5J1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gaWNvbk1hcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uTWFwW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1hcEtleSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKE1hcEtleSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4gPSBNYXBLZXk7XG4gICAgICAgICAgICAgICAgICAgIF9vdXRwdXQgPSBpY29uTWFwW01hcEtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vdXRwdXQ7XG4gICAgfSxcbiAgICBhZGRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8q57uZ5Y2a5a6i5paH56ug5Zyw5Z2AdXJs5re75YqgaWNv6K+G5YirKi9cbiAgICAgICAgJCgnLnNpbmdsZS1wb3N0LWlubmVyICBhOm5vdCg6aGFzKGltZykpJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICB2YXIgX3NyYyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHRtcC5ocmVmID0gX3NyYztcbiAgICAgICAgICAgIF9zZWxmRG9tYWluID0gdG1wLmhvc3RuYW1lO1xuICAgICAgICAgICAgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgICQodGhpcykucHJlcGVuZCgnPGkgY2xhc3M9XCJpY29uZm9udCAnICsgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbikgKyAnXCI+PC9pPicpO1xuICAgICAgICAgICAgdmFyIF9zZWxmQ29sb3IgPSAkKHRoaXMpLmZpbmQoJ2knKS5jc3MoJ2NvbG9yJyksXG4gICAgICAgICAgICAgICAgX29yaWdpbmFsQ29sb3IgPSAkKHRoaXMpLmNzcygnY29sb3InKTtcblxuICAgICAgICAgICAgLyrpvKDmoIfmgqzmta7ml7YqL1xuICAgICAgICAgICAgJCh0aGlzKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfc2VsZkNvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX29yaWdpbmFsQ29sb3IpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHB1bHNlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8v5omT6LWPXG4gICAgcmV3YXJkTG9hZGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgbG9hZFFSID0ge1xuICAgICAgICAgICAgYWxpcGF5OiAnL2Fzc2V0cy9pbWFnZXMvcXItYWxpcGF5LTI1NS5wbmcnLFxuICAgICAgICAgICAgd2VjaGF0OiAnL2Fzc2V0cy9pbWFnZXMvcXItd2VjaGF0LTI1NS5wbmcnXG4gICAgICAgIH07XG4gICAgICAgIHZhciBsb2FkUVJVcmw7XG4gICAgICAgIGlmICghIUdlbmVyYWwuaXNXZWNoYXQpIHtcbiAgICAgICAgICAgICQoJy53ZWNoYXQtY29kZSBiJykuaHRtbCgn6ZW/5oyJ5LiK5pa55LqM57u056CB5omT6LWP5L2c6ICFJyk7XG4gICAgICAgICAgICAvLyAkKCcucXItY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5tb25leS1saWtlIC5yZXdhcmQtYnV0dG9uJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmgqzmta4nKTtcbiAgICAgICAgICAgICQoJ2ltZy53ZWNoYXQtaW1nJykuYXR0cignc3JjJywgbG9hZFFSLndlY2hhdCk7XG4gICAgICAgICAgICAkKCdpbWcuYWxpcGF5LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi5hbGlwYXkpO1xuICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlSW4oKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZU91dCgpO1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sIDgwMCk7XG5cbiAgICAgICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlSW4oKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxudmFyIEltYWdlU21hcnRMb2FkZXIgPSB7XG4gICAgaXNXZWJQU3VwcG9ydGVkOiBmYWxzZSxcbiAgICBpc0ltYWdlQ29tcHJlc3NlZDogZmFsc2UsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUENoZWNrKCk7XG4gICAgfSxcbiAgICBpc0NvbXByZXNzZWRDaGVjazogZnVuY3Rpb24oKSB7XG5cbiAgICB9LFxuICAgIHdlYlBDaGVjazogZnVuY3Rpb24oZmVhdHVyZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIFRlc3RJbWFnZXMgPSB7XG4gICAgICAgICAgICBkZW1vOiBcIlVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0FzQUFBQUJCeEFSRVlpSS9nY0FBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFCQUJ3bHBBQURjQUQrL2diUUFBPT1cIlxuICAgICAgICB9O1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJw5ZOmJyk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IChpbWcud2lkdGggPiAwKSAmJiAoaW1nLmhlaWdodCA+IDApO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgLy8gYWxlcnQoJ+aUr+aMgScpXG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4jeaUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxcIiArIFRlc3RJbWFnZXMuZGVtbztcblxuICAgIH0sXG4gICAgaW1nTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L296buY6K6k5Zu+54mHJyk7XG4gICAgfSxcbiAgICB3ZWJQTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L29d2ViUCcpO1xuICAgICAgICAvLyBhbGVydChJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCk7XG4gICAgICAgIGlmIChJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5a695bqm5pivJyArIEdlbmVyYWwudmlld1dpZHRoKTtcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PSA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoIDwgNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmma7pgJrmlK/mjIEnKVxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiAxNTAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoIDwgNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn5pmu6YCa5pSv5oyBJylcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAgIC8vIFNjcm9sbCB0byBjb250ZW50XG5cdFx0Ly8gJCgnLnNjcm9sbC1kb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdC8vIFx0dmFyICRjb3ZlciA9ICQodGhpcykuY2xvc2VzdCgnLmNvdmVyJyk7XG5cdFx0Ly8gXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0Ly8gXHRcdHNjcm9sbFRvcDogJGNvdmVyLnBvc2l0aW9uKCkudG9wICsgJGNvdmVyLmhlaWdodCgpXG5cdFx0Ly8gXHR9LCA4MDAgKTtcblx0XHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQvLyB9KTtcblxuICAgIC8vIGFkanVzdENvdmVyKCk7XG4gICAgLy8gdmFyIGxhenlSZXNpemUgPSBkZWJvdW5jZShhZGp1c3RDb3ZlciwgMjAwLCBmYWxzZSk7XG4gICAgLy8gJCh3aW5kb3cpLnJlc2l6ZShsYXp5UmVzaXplKTtcblxuICAgIC8vIFNjcm9sbCB0byBjb250ZW50XG4gICAgdmFyIHNjcm9sbEhpbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Nyb2xsLWhpbnQnKTtcbiAgICBpZiAoc2Nyb2xsSGludCAhPT0gbnVsbCkge1xuICAgICAgLy8gICBzY3JvbGxIaW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyAgICAgaWYgKCFzY3JvbGxIaW50LmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKVxuICAgICAgLy8gICAgICAgICByZXR1cm47XG4gICAgICAvLyAgICAgICB3aW5kb3cuc2Nyb2xsQnkoe1xuICAgICAgLy8gICAgICAgICB0b3A6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIC8vICAgICAgICAgbGVmdDogMCxcbiAgICAgIC8vICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAvLyAgICAgfSk7XG4gICAgICAvLyB9KTtcblxuICAgICAgLy8gU2Nyb2xsIHRvIGNvbnRlbnRcblx0XHQkKCcuaGVhZGVyLXNjcm9sbC1oaW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0dmFyICRjb3ZlciA9ICQodGhpcykuY2xvc2VzdCgnLmNvdmVyJyk7XG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRcdHNjcm9sbFRvcDogJGNvdmVyLnBvc2l0aW9uKCkudG9wICsgJGNvdmVyLmhlaWdodCgpXG5cdFx0XHR9LCA0MDAgKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuICAgICAgLy8gJCgnLmNvdmVyIC5hcnJvdy1kb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7J3Njcm9sbFRvcCc6ICQoJy5jb3ZlcicpLmhlaWdodCgpfSwgODAwKTtcbiAgICAgIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkanVzdENvdmVyKCkge1xuXHRcdCAgICBzZXRFbGVtZW50SGVpZ2h0KCcucG9zdC1oZWFkZXIuY292ZXInKTtcblx0ICB9XG5cbiAgICAvL+WIneWni+WMliB0b2Mg5o+S5Lu2XG4gICAgJCgnI3RvYycpLmluaXRUT0Moe1xuICAgICAgICBzZWxlY3RvcjogXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIsXG4gICAgICAgIHNjb3BlOiBcImFydGljbGVcIixcbiAgICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcbiAgICAgICAgcHJlZml4OiBcInRvY1wiXG4gICAgfSk7XG5cbiAgICAvL+WKqOaAgeiuvue9ruagt+W8jyzkvovlpoI65rua5Yqo5Yiw5LiA5a6a56iL5bqm5LmL5ZCO6ZqQ6JeP55uu5b2VXG4gICAgLy8gdmFyIG1hcl9sZWZ0ID0gJChcIi5wb3N0XCIpLndpZHRoKCkgLyAyICsgMjA7XG4gICAgLy92YXIgdG9wID0gJChcIiN0b2NcIikuY3NzKFwidG9wXCIpOyAg6L+Z5Y+q6IO96I635Y+W57G75Ly8MTUycHjnmoTlrZfnrKbkuLIs5LiL6Z2i5omN6IO96I635Y+W5YC8XG4gICAgLy92YXIgdG9wID0gJChcIiN0b2NcIikucG9zaXRpb24oKS50b3A7XG4gICAgLy8gdmFyIHRvcCA9ICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAvLyAkKFwiI3RvY1wiKS5jc3MoXCJ0b3BcIix0b3AgLyAyLSAodG9wIC8gNCkrXCJweFwiKTtcbiAgICAvLyAkKFwiI3RvYyBvbFwiKS5odG1sKGZ1bmN0aW9uKGksb3JpZ1RleHQpe1xuICAgIC8vICAgICByZXR1cm4gb3JpZ1RleHQgKyBcIjxsaT48YSBpZD0nc2Nyb2xsVG9wJyBocmVmPScjJz7ov5Tlm57pobbpg6g8L2E+PC9saT5cIjtcbiAgICAvLyB9KTtcbiAgICAvLyAkKFwiI3RvY1wiKS5jc3Moe1wibWFyZ2luLWxlZnRcIjptYXJfbGVmdCtcInB4XCJ9KTtcblxuICAgIC8vICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgdmFyIHdpbmRvd19vZmZzZXQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgLy8gICAgIHZhciBtYWluX2hlYWRlcl9oZWlnaHQgPSAkKFwiLm1haW4taGVhZGVyXCIpLmhlaWdodCgpO1xuICAgIC8vICAgICB2YXIgY29udGVudF9oZWlnaHQgPSAkKFwiLmNvbnRlbnRcIikuaGVpZ2h0KCk7XG4gICAgLy8gICAgIGlmKHdpbmRvd19vZmZzZXQgPCBtYWluX2hlYWRlcl9oZWlnaHQgLSAxMDApIHtcbiAgICAvLyAgICAgICAgICQoXCIjdG9jXCIpLmhpZGUoKTtcbiAgICAvLyAgICAgICAgIC8v5LiL6Z2i55qE5p2h5Lu25LiN6IO955SoIGE+eD5j6L+Z56eN5b2i5byPLOWPquiDveeUqCYmLui6q+S4uuS4gOS4quWJjeerr+Wwj+eZveihqOekuuS8pOS4jei1ty4uLlxuICAgIC8vICAgICB9ZWxzZSBpZih3aW5kb3dfb2Zmc2V0ID4gbWFpbl9oZWFkZXJfaGVpZ2h0JiZtYWluX2hlYWRlcl9oZWlnaHQrY29udGVudF9oZWlnaHQgLSA1MDAgPiB3aW5kb3dfb2Zmc2V0KSB7XG4gICAgLy8gICAgICAgICAkKFwiI3RvY1wiKS5zaG93KCk7XG4gICAgLy8gICAgIH1lbHNle1xuICAgIC8vICAgICAgICAgJChcIiN0b2NcIikuaGlkZSgpO1xuICAgIC8vICAgICB9XG4gICAgLy8gfSk7XG5cblx0ICAvLyBTZXQgdGhlIG5ldyBoZWlnaHQgb2YgYW4gZWxlbWVudFxuXHQgIGZ1bmN0aW9uIHNldEVsZW1lbnRIZWlnaHQoZWxlbWVudCl7XG5cdFx0ICAgIHZhciB3aW5kb3dIZWlnaHQgPSAoIHRydWU9PT1pc2lQb2QoKSAmJiB0cnVlPT09aXNTYWZhcmkoKSApID8gd2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCA6ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHQgICAgICB2YXIgb2Zmc2V0SGVpZ2h0ID0gJCgnLnNpdGUtaGVhZGVyJykub3V0ZXJIZWlnaHQoKTtcblx0XHQgICAgICAgIHZhciBuZXdIZWlnaHQgPSB3aW5kb3dIZWlnaHQ7XG5cdFx0ICAgICAgICAgIGlmICggJChlbGVtZW50KS5maW5kKCcuc2Nyb2xsLWRvd24nKS5pcygnOmhpZGRlbicpICkge1xuXHRcdFx0ICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdCAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJy5jb3Zlci1iZycpLmNzcygndG9wJywnJyk7XG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgICAgZWxzZSB7XG5cdFx0XHQgICAgICAgICAgICAgJChlbGVtZW50KS5vdXRlckhlaWdodChuZXdIZWlnaHQpO1xuXHRcdFx0ICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnLmNvdmVyLWJnJykuY3NzKCd0b3AnLG9mZnNldEhlaWdodCk7XG5cdFx0ICAgICAgICAgIH1cblx0ICB9XG5cblx0ICAvLyBUaHJvdHRsZXMgYW4gYWN0aW9uLlxuXHQgIC8vIFRha2VuIGZyb20gVW5kZXJzY29yZS5qcy5cblx0ICBmdW5jdGlvbiBkZWJvdW5jZSAoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG5cdFx0ICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblx0XHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgICAgICBjb250ZXh0ID0gdGhpcztcblx0XHRcdCAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHQgICAgICAgICB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0ICAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAgICAgICAgIHZhciBsYXN0ID0gKG5ldyBEYXRlKCkpIC0gdGltZXN0YW1wO1xuXHRcdFx0XHQgICAgICAgICAgICBpZiAobGFzdCA8IHdhaXQpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0XHRcdFx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcblx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgfVxuXHRcdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHQgICAgICAgICB9O1xuXHRcdFx0ICAgICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG5cdFx0XHQgICAgICAgICAgICBpZiAoIXRpbWVvdXQpIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgICAgIGlmIChjYWxsTm93KSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgIHJldHVybiByZXN1bHQ7XG5cdFx0ICAgICAgfTtcblx0ICB9XG5cblx0ICAvLyBDaGVjayBpZiBkZXZpY2UgaXMgYW4gaVBob25lIG9yIGlQb2Rcblx0ICBmdW5jdGlvbiBpc2lQb2QoKXtcblx0XHQgICAgcmV0dXJuKC8oaVBob25lfGlQb2QpL2cpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cdCAgfVxuXG5cdCAgLy8gQ2hlY2sgaWYgYnJvd3NlciBpcyBTYWZhcmlcblx0ICBmdW5jdGlvbiBpc1NhZmFyaSgpe1xuXHRcdCAgICByZXR1cm4oLTEhPT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1NhZmFyaScpJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykpO1xuXHQgIH1cblxuXHRcdC8vIEhpZGRlbiBzZWN0aW9uc1xuXHRcdCQoJy5zaWRlYmFyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly8gJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdzaWRlYmFyLW9wZW5lZCcpOyDliIfmjaLnsbvliKvlj6/ku6Xnm7TmjqXnlKggdG9nZ2xlQ2xhc3NcbiAgICAgIGlmICggJCgnYm9keScpLmhhc0NsYXNzKCdzaWRlYmFyLW9wZW5lZCcpICkge1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywnaGlkZGVuJyk7IC8vIOmUgeWumiBib2R577yM56aB5q2i5LiL5bGC5ruR5YqoXG5cdFx0XHR9XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cblx0XHQkKCcuc2VhcmNoLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0aWYgKCAkKCdib2R5JykuaGFzQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKSApIHtcblx0XHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzZWFyY2gtb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHRcdHNlYXJjaEZpZWxkLmNsZWFyKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTsgLy8g6ZSB5a6aIGJvZHnvvIznpoHmraLkuIvlsYLmu5Hliqhcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCcjc2VhcmNoLWZpZWxkJykuZm9jdXMoKTtcblx0XHRcdFx0fSwgMzAwKTtcblx0XHRcdH1cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0XHQkKCcub3ZlcmxheScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzaWRlYmFyLW9wZW5lZCBzZWFyY2gtb3BlbmVkJyk7XG4gICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsJ3Njcm9sbCcpOyAvLyDmgaLlpI0gYm9kee+8jOWFgeiuuOS4i+Wxgua7keWKqFxuXHRcdFx0c2VhcmNoRmllbGQuY2xlYXIoKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuICAgIC8vIFNob3cgY29tbWVudHNcblx0XHRpZiAoIHR5cGVvZiBkaXNxdXNfc2hvcnRuYW1lICE9PSAndW5kZWZpbmVkJyApIHtcblx0XHRcdHZhciBkaXNxdXNfbG9hZGVkID0gZmFsc2U7XG5cdFx0XHQkKCcuY29tbWVudHMtdGl0bGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIF90aGlzID0gJCh0aGlzKTtcblx0XHRcdFx0aWYgKCAhIGRpc3F1c19sb2FkZWQgKSB7XG5cdFx0XHRcdFx0JC5hamF4KHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHR1cmw6IFwiLy9cIiArIGRpc3F1c19zaG9ydG5hbWUgKyBcIi5kaXNxdXMuY29tL2VtYmVkLmpzXCIsXG5cdFx0XHRcdFx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRcdFx0XHRcdGNhY2hlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHRkaXNxdXNfbG9hZGVkID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCcjZGlzcXVzX3RocmVhZCcpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0XHRcdFx0aWYgKCBfdGhpcy5oYXNDbGFzcygndG9nZ2xlZC1vbicpICkge1xuXHRcdFx0XHRcdFx0X3RoaXMucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHZhciAkY29udGFpbmVyO1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgICBmYWlsdXJlX2xpbWl0OiAwLFxuICAgICAgICAgICAgZXZlbnQ6IFwic2Nyb2xsXCIsXG4gICAgICAgICAgICBlZmZlY3Q6IFwic2hvd1wiLFxuICAgICAgICAgICAgY29udGFpbmVyOiB3aW5kb3csXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogXCJvcmlnaW5hbFwiLFxuICAgICAgICAgICAgc2tpcF9pbnZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgYXBwZWFyOiBudWxsLFxuICAgICAgICAgICAgbG9hZDogbnVsbCxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlwiLFxuICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNraXBfaW52aXNpYmxlICYmICEkdGhpcy5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCQuYWJvdmV0aGV0b3AodGhpcywgc2V0dGluZ3MpIHx8XG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcuICovXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJC5iZWxvd3RoZWZvbGQodGhpcywgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICEkLnJpZ2h0b2Zmb2xkKHRoaXMsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICAvKiBpZiB3ZSBmb3VuZCBhbiBpbWFnZSB3ZSdsbCBsb2FkLCByZXNldCB0aGUgY291bnRlciAqL1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudGVyID4gc2V0dGluZ3MuZmFpbHVyZV9saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgYSBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmZhaWx1cmVsaW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZWZmZWN0c3BlZWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmVmZmVjdF9zcGVlZCA9IG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xuICAgICAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xuXG4gICAgICAgIC8qIEZpcmUgb25lIHNjcm9sbCBldmVudCBwZXIgc2Nyb2xsLiBOb3Qgb25lIHNjcm9sbCBldmVudCBwZXIgaW1hZ2UuICovXG4gICAgICAgIGlmICgwID09PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAkY29udGFpbmVyLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqjkuoYxMTEnKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5rua5YqoJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xuXG4gICAgICAgICAgICBzZWxmLmxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKiBJZiBubyBzcmMgYXR0cmlidXRlIGdpdmVuIHVzZSBkYXRhOnVyaS4gKi9cbiAgICAgICAgICAgIGlmICgkc2VsZi5hdHRyKFwic3JjXCIpID09PSB1bmRlZmluZWQgfHwgJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBzZXR0aW5ncy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmFkZENsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xuICAgICAgICAgICAgJHNlbGYub25lKFwiYXBwZWFyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFwcGVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hcHBlYXIuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMS5zZWxmLmF0dHIgPSAnLCRzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRVcmwgPSAkc2VsZi5hdHRyKFwiZGF0YS1cIiArIHNldHRpbmdzLmRhdGFfYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHVwZGF0ZWRVcmwgPSAkc2VsZi5hdHRyKFwiZGF0YS1vcmlnaW5hbFwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmtYvor5UgPSAnLCRzZWxmLnN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsID0gJHNlbGYuc3R5bGUuYmFja2dyb3VuZEltYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkVXJsID0gJyx1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflm77niYflnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ2ltZy5oYWxmcm9zdC5jb20nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ0RO5Zyw5Z2AJyArdXBkYXRlZFVybC5pbmRleE9mKCdmaWxlLmlzMjYuY29tJykpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsLmluZGV4T2YoJ2ltZy5oYWxmcm9zdC5jb20nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hZHZhbmNlZF9sb2FkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICc/aW1hZ2VWaWV3Mic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmlzX3NjYWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvMC93LycgKyBzZXR0aW5ncy5zY2FsZV93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09PSB0cnVlICYmIHNldHRpbmdzLmlzX3NjYWxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnLzAvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT09IHRydWUgJiYgc2V0dGluZ3MuaXNfc2NhbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy9mb3JtYXQvd2VicCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBTYWZhcmkgYW5kIGlPU1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09PSBmYWxzZSAmJiB1cGRhdGVkVXJsLmluZGV4T2YoJ2h0dHBzOi8vaW1nLmhhbGZyb3N0LmNvbS9CbG9nL0FydGljbGVUaXRsZUltYWdlL2JhY2tncm91bmQtY292ZXJfLnBuZycpID4gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCA9ICdodHRwczovL2ltZy5oYWxmcm9zdC5jb20vQmxvZy9BcnRpY2xlVGl0bGVJbWFnZS9iYWNrZ3JvdW5kLWNvdmVyXy5wbmcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh1cGRhdGVkVXJsLmluZGV4T2YoJ2h0dHBzOi8vaW1nLmhhbGZyb3N0LmNvbS9CbG9nL0FydGljbGVUaXRsZUltYWdlL2JhY2tncm91bmQtY292ZXJfLnBuZycpID4gLTEgJiYgc2V0dGluZ3Mud2ViUF9sb2FkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdXBkYXRlZFVybCA9ICdodHRwczovL2ltZy5oYWxmcm9zdC5jb20vQmxvZy9BcnRpY2xlVGl0bGVJbWFnZS9iYWNrZ3JvdW5kLWNvdmVyXy5wbmc/aW1hZ2VWaWV3Mi8wL2Zvcm1hdC93ZWJwJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4remXtOaJk+WNsHVwZGF0ZWRVcmwnLHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKirkuK3pl7TmiZPljbAgaW1nLnNyYyA9ICcsJHNlbGYuYXR0cihcInNyY1wiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKuS4remXtOaJk+WNsCBpbWcgPSAnLCQoXCI8aW1nIC8+XCIpKTtcblxuICAgICAgICAgICAgICAgICAgICAkKFwiPGltZyAvPlwiKS5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKippbWcuc3JjID0gJywkc2VsZi5hdHRyKFwic3JjXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIHVwZGF0ZWRVcmwgKyBcIicpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKipiYWNrZ3JvdW5kLWltYWdlID0gJywkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGZbc2V0dGluZ3MuZWZmZWN0XShzZXR0aW5ncy5lZmZlY3Rfc3BlZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIGltYWdlIGZyb20gYXJyYXkgc28gaXQgaXMgbm90IGxvb3BlZCBuZXh0IHRpbWUuICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSAkLmdyZXAoZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlbGVtZW50LmxvYWRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9ICQodGVtcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubG9hZC5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBXaGVuIHdhbnRlZCBldmVudCBpcyB0cmlnZ2VyZWQgbG9hZCBvcmlnaW5hbCBpbWFnZSAqL1xuICAgICAgICAgICAgLyogYnkgdHJpZ2dlcmluZyBhcHBlYXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICgwICE9PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAgICAgJHNlbGYuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogQ2hlY2sgaWYgc29tZXRoaW5nIGFwcGVhcnMgd2hlbiB3aW5kb3cgaXMgcmVzaXplZC4gKi9cbiAgICAgICAgJHdpbmRvdy5iaW5kKFwicmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIFdpdGggSU9TNSBmb3JjZSBsb2FkaW5nIGltYWdlcyB3aGVuIG5hdmlnYXRpbmcgd2l0aCBiYWNrIGJ1dHRvbi4gKi9cbiAgICAgICAgLyogTm9uIG9wdGltYWwgd29ya2Fyb3VuZC4gKi9cbiAgICAgICAgaWYgKCgvKD86aXBob25lfGlwb2R8aXBhZCkuKm9zIDUvZ2kpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pKSB7XG4gICAgICAgICAgICAkd2luZG93LmJpbmQoXCJwYWdlc2hvd1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogRm9yY2UgaW5pdGlhbCBjaGVjayBpZiBpbWFnZXMgc2hvdWxkIGFwcGVhci4gKi9cbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qIENvbnZlbmllbmNlIG1ldGhvZHMgaW4galF1ZXJ5IG5hbWVzcGFjZS4gICAgICAgICAgICovXG4gICAgLyogVXNlIGFzICAkLmJlbG93dGhlZm9sZChlbGVtZW50LCB7dGhyZXNob2xkIDogMTAwLCBjb250YWluZXIgOiB3aW5kb3d9KSAqL1xuXG4gICAgJC5iZWxvd3RoZWZvbGQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAod2luZG93LmlubmVySGVpZ2h0ID8gd2luZG93LmlubmVySGVpZ2h0IDogJHdpbmRvdy5oZWlnaHQoKSkgKyAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS50b3AgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikuaGVpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA8PSAkKGVsZW1lbnQpLm9mZnNldCgpLnRvcCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5yaWdodG9mZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cud2lkdGgoKSArICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0ICsgJChzZXR0aW5ncy5jb250YWluZXIpLndpZHRoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA8PSAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XG4gICAgfTtcblxuICAgICQuYWJvdmV0aGV0b3AgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS50b3A7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLnRvcCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkuaGVpZ2h0KCk7XG4gICAgfTtcblxuICAgICQubGVmdG9mYmVnaW4gPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbExlZnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkud2lkdGgoKTtcbiAgICB9O1xuXG4gICAgJC5pbnZpZXdwb3J0ID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcblxuICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmxlZnRvZmJlZ2luKGVsZW1lbnQsIHNldHRpbmdzKSAmJlxuICAgICAgICAgICAgISQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5hYm92ZXRoZXRvcChlbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgfTtcblxuICAgIC8qIEN1c3RvbSBzZWxlY3RvcnMgZm9yIHlvdXIgY29udmVuaWVuY2UuICAgKi9cbiAgICAvKiBVc2UgYXMgJChcImltZzpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSBvciAqL1xuICAgIC8qICQoXCJpbWdcIikuZmlsdGVyKFwiOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIHdoaWNoIGlzIGZhc3RlciAqL1xuXG4gICAgJC5leHRlbmQoJC5leHByW1wiOlwiXSwge1xuICAgICAgICBcImJlbG93LXRoZS1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJhYm92ZS10aGUtdG9wXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmlnaHQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJpbi12aWV3cG9ydFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5pbnZpZXdwb3J0KGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgY291cGxlIG9mIHZlcnNpb25zLiAqL1xuICAgICAgICBcImFib3ZlLXRoZS1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmlnaHQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJsZWZ0LW9mLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBHZW5lcmFsLmluaXQoKTtcbiAgICBJbWFnZVNtYXJ0TG9hZGVyLmluaXQoKTtcbiAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgR2VuZXJhbC5hZGRJY29ucygpO1xuICAgIH1cblxuICAgIC8vIFNpdGUgc2VhcmNoXG4gICAgLy8gdmFyIHNlYXJjaEZpZWxkID0gJCgnI3NlYXJjaC1maWVsZCcpLmdob3N0SHVudGVyKHtcbiAgICAvLyAgIHJlc3VsdHMgOiBcIiNzZWFyY2gtcmVzdWx0c1wiLFxuICAgIC8vICAgb25LZXlVcCA6IHRydWUsXG4gICAgLy8gICBvblBhZ2VMb2FkIDogdHJ1ZSxcbiAgICAvLyAgIGluY2x1ZGVwYWdlcyA6IHRydWUsXG4gICAgLy8gICBpbmZvX3RlbXBsYXRlIDogJzxkaXYgY2xhc3M9XCJyZXN1bHRzLWluZm9cIj5Qb3N0cyBmb3VuZDoge3thbW91bnR9fTwvZGl2PicsXG4gICAgLy8gICByZXN1bHRfdGVtcGxhdGUgOiAnPGRpdiBjbGFzcz1cInJlc3VsdC1pdGVtXCI+PGEgaHJlZj1cInt7bGlua319XCI+PGRpdiBjbGFzcz1cInJlc3VsdC10aXRsZVwiPnt7dGl0bGV9fTwvZGl2PjxkaXYgY2xhc3M9XCJyZXN1bHQtZGF0ZVwiPnt7cHViRGF0ZX19PC9kaXY+PC9hPjwvZGl2PidcbiAgICAvLyB9KTtcbn0pO1xuIiwiLyoqXG4qIGdob3N0SHVudGVyIC0gMC41LjBcbiAqIENvcHlyaWdodCAoQykgMjAxNCBKYW1hbCBOZXVmZWxkIChqYW1hbEBpMTF1Lm1lKVxuICogTUlUIExpY2Vuc2VkXG4gKiBAbGljZW5zZVxuKi9cbihmdW5jdGlvbiggJCApIHtcblxuICAvKipcbiAqIGx1bnIgLSBodHRwOi8vbHVucmpzLmNvbSAtIEEgYml0IGxpa2UgU29sciwgYnV0IG11Y2ggc21hbGxlciBhbmQgbm90IGFzIGJyaWdodCAtIDIuMS41XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG47KGZ1bmN0aW9uKCl7XG5cbi8qKlxuICogQSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY29uZmlndXJpbmcgYW5kIGNvbnN0cnVjdGluZ1xuICogYSBuZXcgbHVuciBJbmRleC5cbiAqXG4gKiBBIGx1bnIuQnVpbGRlciBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCB0aGUgcGlwZWxpbmUgc2V0dXBcbiAqIHdpdGggYSB0cmltbWVyLCBzdG9wIHdvcmQgZmlsdGVyIGFuZCBzdGVtbWVyLlxuICpcbiAqIFRoaXMgYnVpbGRlciBvYmplY3QgaXMgeWllbGRlZCB0byB0aGUgY29uZmlndXJhdGlvbiBmdW5jdGlvblxuICogdGhhdCBpcyBwYXNzZWQgYXMgYSBwYXJhbWV0ZXIsIGFsbG93aW5nIHRoZSBsaXN0IG9mIGZpZWxkc1xuICogYW5kIG90aGVyIGJ1aWxkZXIgcGFyYW1ldGVycyB0byBiZSBjdXN0b21pc2VkLlxuICpcbiAqIEFsbCBkb2N1bWVudHMgX211c3RfIGJlIGFkZGVkIHdpdGhpbiB0aGUgcGFzc2VkIGNvbmZpZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGlkeCA9IGx1bnIoZnVuY3Rpb24gKCkge1xuICogICB0aGlzLmZpZWxkKCd0aXRsZScpXG4gKiAgIHRoaXMuZmllbGQoJ2JvZHknKVxuICogICB0aGlzLnJlZignaWQnKVxuICpcbiAqICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xuICogICAgIHRoaXMuYWRkKGRvYylcbiAqICAgfSwgdGhpcylcbiAqIH0pXG4gKlxuICogQHNlZSB7QGxpbmsgbHVuci5CdWlsZGVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqIEBzZWUge0BsaW5rIGx1bnIudHJpbW1lcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuc3RvcFdvcmRGaWx0ZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLnN0ZW1tZXJ9XG4gKiBAbmFtZXNwYWNlIHtmdW5jdGlvbn0gbHVuclxuICovXG52YXIgbHVuciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgdmFyIGJ1aWxkZXIgPSBuZXcgbHVuci5CdWlsZGVyKCk7XG5cbiAgYnVpbGRlci5waXBlbGluZS5hZGQoXG4gICAgbHVuci50cmltbWVyLFxuICAgIGx1bnIuc3RvcFdvcmRGaWx0ZXIsXG4gICAgbHVuci5zdGVtbWVyXG4gICk7XG5cbiAgYnVpbGRlci5zZWFyY2hQaXBlbGluZS5hZGQoXG4gICAgbHVuci5zdGVtbWVyXG4gICk7XG5cbiAgY29uZmlnLmNhbGwoYnVpbGRlciwgYnVpbGRlcik7XG4gIHJldHVybiBidWlsZGVyLmJ1aWxkKCk7XG59O1xuXG5sdW5yLnZlcnNpb24gPSBcIjIuMS41XCI7XG4vKiFcbiAqIGx1bnIudXRpbHNcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgbmFtZXNwYWNlIGNvbnRhaW5pbmcgdXRpbHMgZm9yIHRoZSByZXN0IG9mIHRoZSBsdW5yIGxpYnJhcnlcbiAqL1xubHVuci51dGlscyA9IHt9O1xuXG4vKipcbiAqIFByaW50IGEgd2FybmluZyBtZXNzYWdlIHRvIHRoZSBjb25zb2xlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGJlIHByaW50ZWQuXG4gKiBAbWVtYmVyT2YgVXRpbHNcbiAqL1xubHVuci51dGlscy53YXJuID0gKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAoZ2xvYmFsLmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfVxuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbn0pKHRoaXMpO1xuXG4vKipcbiAqIENvbnZlcnQgYW4gb2JqZWN0IHRvIGEgc3RyaW5nLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgdGhlIGZ1bmN0aW9uIHJldHVybnNcbiAqIHRoZSBlbXB0eSBzdHJpbmcsIGluIGFsbCBvdGhlciBjYXNlcyB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAqIGB0b1N0cmluZ2Agb24gdGhlIHBhc3NlZCBvYmplY3QgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtBbnl9IG9iaiBUaGUgb2JqZWN0IHRvIGNvbnZlcnQgdG8gYSBzdHJpbmcuXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFzc2VkIG9iamVjdC5cbiAqIEBtZW1iZXJPZiBVdGlsc1xuICovXG5sdW5yLnV0aWxzLmFzU3RyaW5nID0gZnVuY3Rpb24gKG9iaikge1xuICBpZiAob2JqID09PSB2b2lkIDAgfHwgb2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpO1xuICB9XG59O1xubHVuci5GaWVsZFJlZiA9IGZ1bmN0aW9uIChkb2NSZWYsIGZpZWxkTmFtZSwgc3RyaW5nVmFsdWUpIHtcbiAgdGhpcy5kb2NSZWYgPSBkb2NSZWY7XG4gIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xuICB0aGlzLl9zdHJpbmdWYWx1ZSA9IHN0cmluZ1ZhbHVlO1xufTtcblxubHVuci5GaWVsZFJlZi5qb2luZXIgPSBcIi9cIjtcblxubHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHMpIHtcbiAgdmFyIG4gPSBzLmluZGV4T2YobHVuci5GaWVsZFJlZi5qb2luZXIpO1xuXG4gIGlmIChuID09PSAtMSkge1xuICAgIHRocm93IFwibWFsZm9ybWVkIGZpZWxkIHJlZiBzdHJpbmdcIjtcbiAgfVxuXG4gIHZhciBmaWVsZFJlZiA9IHMuc2xpY2UoMCwgbiksXG4gICAgICBkb2NSZWYgPSBzLnNsaWNlKG4gKyAxKTtcblxuICByZXR1cm4gbmV3IGx1bnIuRmllbGRSZWYgKGRvY1JlZiwgZmllbGRSZWYsIHMpO1xufTtcblxubHVuci5GaWVsZFJlZi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9zdHJpbmdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fc3RyaW5nVmFsdWUgPSB0aGlzLmZpZWxkTmFtZSArIGx1bnIuRmllbGRSZWYuam9pbmVyICsgdGhpcy5kb2NSZWY7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RyaW5nVmFsdWU7XG59O1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSB0aGUgaW52ZXJzZSBkb2N1bWVudCBmcmVxdWVuY3kgZm9yXG4gKiBhIHBvc3RpbmcuIFRoaXMgaXMgc2hhcmVkIGJldHdlZW4gdGhlIGJ1aWxkZXIgYW5kIHRoZSBpbmRleFxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gcG9zdGluZyAtIFRoZSBwb3N0aW5nIGZvciBhIGdpdmVuIHRlcm1cbiAqIEBwYXJhbSB7bnVtYmVyfSBkb2N1bWVudENvdW50IC0gVGhlIHRvdGFsIG51bWJlciBvZiBkb2N1bWVudHMuXG4gKi9cbmx1bnIuaWRmID0gZnVuY3Rpb24gKHBvc3RpbmcsIGRvY3VtZW50Q291bnQpIHtcbiAgdmFyIGRvY3VtZW50c1dpdGhUZXJtID0gMDtcblxuICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gcG9zdGluZykge1xuICAgIGlmIChmaWVsZE5hbWUgPT0gJ19pbmRleCcpIGNvbnRpbnVlOyAvLyBJZ25vcmUgdGhlIHRlcm0gaW5kZXgsIGl0cyBub3QgYSBmaWVsZFxuICAgIGRvY3VtZW50c1dpdGhUZXJtICs9IE9iamVjdC5rZXlzKHBvc3RpbmdbZmllbGROYW1lXSkubGVuZ3RoO1xuICB9XG5cbiAgdmFyIHggPSAoZG9jdW1lbnRDb3VudCAtIGRvY3VtZW50c1dpdGhUZXJtICsgMC41KSAvIChkb2N1bWVudHNXaXRoVGVybSArIDAuNSk7XG5cbiAgcmV0dXJuIE1hdGgubG9nKDEgKyBNYXRoLmFicyh4KSk7XG59O1xuXG4vKipcbiAqIEEgdG9rZW4gd3JhcHMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB0b2tlblxuICogYXMgaXQgaXMgcGFzc2VkIHRocm91Z2ggdGhlIHRleHQgcHJvY2Vzc2luZyBwaXBlbGluZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyPScnXSAtIFRoZSBzdHJpbmcgdG9rZW4gYmVpbmcgd3JhcHBlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGE9e31dIC0gTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdG9rZW4uXG4gKi9cbmx1bnIuVG9rZW4gPSBmdW5jdGlvbiAoc3RyLCBtZXRhZGF0YSkge1xuICB0aGlzLnN0ciA9IHN0ciB8fCBcIlwiO1xuICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGEgfHwge307XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHRva2VuIHN0cmluZyB0aGF0IGlzIGJlaW5nIHdyYXBwZWQgYnkgdGhpcyBvYmplY3QuXG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xubHVuci5Ub2tlbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnN0cjtcbn07XG5cbi8qKlxuICogQSB0b2tlbiB1cGRhdGUgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIHVwZGF0aW5nIG9yIG9wdGlvbmFsbHlcbiAqIHdoZW4gY2xvbmluZyBhIHRva2VuLlxuICpcbiAqIEBjYWxsYmFjayBsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdG9rZW4uXG4gKiBAcGFyYW0ge09iamVjdH0gbWV0YWRhdGEgLSBBbGwgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdG9rZW4uXG4gKi9cblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBnaXZlbiBmdW5jdGlvbiB0byB0aGUgd3JhcHBlZCBzdHJpbmcgdG9rZW4uXG4gKlxuICogQGV4YW1wbGVcbiAqIHRva2VuLnVwZGF0ZShmdW5jdGlvbiAoc3RyLCBtZXRhZGF0YSkge1xuICogICByZXR1cm4gc3RyLnRvVXBwZXJDYXNlKClcbiAqIH0pXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIHRva2VuIHN0cmluZy5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdGhpcy5zdHIgPSBmbih0aGlzLnN0ciwgdGhpcy5tZXRhZGF0YSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhpcyB0b2tlbi4gT3B0aW9uYWxseSBhIGZ1bmN0aW9uIGNhbiBiZVxuICogYXBwbGllZCB0byB0aGUgY2xvbmVkIHRva2VuLlxuICpcbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn51cGRhdGVGdW5jdGlvbn0gW2ZuXSAtIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSBjbG9uZWQgdG9rZW4uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqL1xubHVuci5Ub2tlbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgZm4gPSBmbiB8fCBmdW5jdGlvbiAocykgeyByZXR1cm4gczsgfTtcbiAgcmV0dXJuIG5ldyBsdW5yLlRva2VuIChmbih0aGlzLnN0ciwgdGhpcy5tZXRhZGF0YSksIHRoaXMubWV0YWRhdGEpO1xufTtcbi8qIVxuICogbHVuci50b2tlbml6ZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gZm9yIHNwbGl0dGluZyBhIHN0cmluZyBpbnRvIHRva2VucyByZWFkeSB0byBiZSBpbnNlcnRlZCBpbnRvXG4gKiB0aGUgc2VhcmNoIGluZGV4LiBVc2VzIGBsdW5yLnRva2VuaXplci5zZXBhcmF0b3JgIHRvIHNwbGl0IHN0cmluZ3MsIGNoYW5nZVxuICogdGhlIHZhbHVlIG9mIHRoaXMgcHJvcGVydHkgdG8gY2hhbmdlIGhvdyBzdHJpbmdzIGFyZSBzcGxpdCBpbnRvIHRva2Vucy5cbiAqXG4gKiBUaGlzIHRva2VuaXplciB3aWxsIGNvbnZlcnQgaXRzIHBhcmFtZXRlciB0byBhIHN0cmluZyBieSBjYWxsaW5nIGB0b1N0cmluZ2AgYW5kXG4gKiB0aGVuIHdpbGwgc3BsaXQgdGhpcyBzdHJpbmcgb24gdGhlIGNoYXJhY3RlciBpbiBgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yYC5cbiAqIEFycmF5cyB3aWxsIGhhdmUgdGhlaXIgZWxlbWVudHMgY29udmVydGVkIHRvIHN0cmluZ3MgYW5kIHdyYXBwZWQgaW4gYSBsdW5yLlRva2VuLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB7PyhzdHJpbmd8b2JqZWN0fG9iamVjdFtdKX0gb2JqIC0gVGhlIG9iamVjdCB0byBjb252ZXJ0IGludG8gdG9rZW5zXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbltdfVxuICovXG5sdW5yLnRva2VuaXplciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICByZXR1cm4gb2JqLm1hcChmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIG5ldyBsdW5yLlRva2VuKGx1bnIudXRpbHMuYXNTdHJpbmcodCkudG9Mb3dlckNhc2UoKSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgc3RyID0gb2JqLnRvU3RyaW5nKCkudHJpbSgpLnRvTG93ZXJDYXNlKCksXG4gICAgICBsZW4gPSBzdHIubGVuZ3RoLFxuICAgICAgdG9rZW5zID0gW107XG5cbiAgZm9yICh2YXIgc2xpY2VFbmQgPSAwLCBzbGljZVN0YXJ0ID0gMDsgc2xpY2VFbmQgPD0gbGVuOyBzbGljZUVuZCsrKSB7XG4gICAgdmFyIGNoYXIgPSBzdHIuY2hhckF0KHNsaWNlRW5kKSxcbiAgICAgICAgc2xpY2VMZW5ndGggPSBzbGljZUVuZCAtIHNsaWNlU3RhcnQ7XG5cbiAgICBpZiAoKGNoYXIubWF0Y2gobHVuci50b2tlbml6ZXIuc2VwYXJhdG9yKSB8fCBzbGljZUVuZCA9PSBsZW4pKSB7XG5cbiAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgdG9rZW5zLnB1c2goXG4gICAgICAgICAgbmV3IGx1bnIuVG9rZW4gKHN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCksIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBbc2xpY2VTdGFydCwgc2xpY2VMZW5ndGhdLFxuICAgICAgICAgICAgaW5kZXg6IHRva2Vucy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBzbGljZVN0YXJ0ID0gc2xpY2VFbmQgKyAxO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn07XG5cbi8qKlxuICogVGhlIHNlcGFyYXRvciB1c2VkIHRvIHNwbGl0IGEgc3RyaW5nIGludG8gdG9rZW5zLiBPdmVycmlkZSB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSB0aGUgYmVoYXZpb3VyIG9mXG4gKiBgbHVuci50b2tlbml6ZXJgIGJlaGF2aW91ciB3aGVuIHRva2VuaXppbmcgc3RyaW5ncy4gQnkgZGVmYXVsdCB0aGlzIHNwbGl0cyBvbiB3aGl0ZXNwYWNlIGFuZCBoeXBoZW5zLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzZWUgbHVuci50b2tlbml6ZXJcbiAqL1xubHVuci50b2tlbml6ZXIuc2VwYXJhdG9yID0gL1tcXHNcXC1dKy87XG4vKiFcbiAqIGx1bnIuUGlwZWxpbmVcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuUGlwZWxpbmVzIG1haW50YWluIGFuIG9yZGVyZWQgbGlzdCBvZiBmdW5jdGlvbnMgdG8gYmUgYXBwbGllZCB0byBhbGxcbiAqIHRva2VucyBpbiBkb2N1bWVudHMgZW50ZXJpbmcgdGhlIHNlYXJjaCBpbmRleCBhbmQgcXVlcmllcyBiZWluZyByYW4gYWdhaW5zdFxuICogdGhlIGluZGV4LlxuICpcbiAqIEFuIGluc3RhbmNlIG9mIGx1bnIuSW5kZXggY3JlYXRlZCB3aXRoIHRoZSBsdW5yIHNob3J0Y3V0IHdpbGwgY29udGFpbiBhXG4gKiBwaXBlbGluZSB3aXRoIGEgc3RvcCB3b3JkIGZpbHRlciBhbmQgYW4gRW5nbGlzaCBsYW5ndWFnZSBzdGVtbWVyLiBFeHRyYVxuICogZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCBiZWZvcmUgb3IgYWZ0ZXIgZWl0aGVyIG9mIHRoZXNlIGZ1bmN0aW9ucyBvciB0aGVzZVxuICogZGVmYXVsdCBmdW5jdGlvbnMgY2FuIGJlIHJlbW92ZWQuXG4gKlxuICogV2hlbiBydW4gdGhlIHBpcGVsaW5lIHdpbGwgY2FsbCBlYWNoIGZ1bmN0aW9uIGluIHR1cm4sIHBhc3NpbmcgYSB0b2tlbiwgdGhlXG4gKiBpbmRleCBvZiB0aGF0IHRva2VuIGluIHRoZSBvcmlnaW5hbCBsaXN0IG9mIGFsbCB0b2tlbnMgYW5kIGZpbmFsbHkgYSBsaXN0IG9mXG4gKiBhbGwgdGhlIG9yaWdpbmFsIHRva2Vucy5cbiAqXG4gKiBUaGUgb3V0cHV0IG9mIGZ1bmN0aW9ucyBpbiB0aGUgcGlwZWxpbmUgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIG5leHQgZnVuY3Rpb25cbiAqIGluIHRoZSBwaXBlbGluZS4gVG8gZXhjbHVkZSBhIHRva2VuIGZyb20gZW50ZXJpbmcgdGhlIGluZGV4IHRoZSBmdW5jdGlvblxuICogc2hvdWxkIHJldHVybiB1bmRlZmluZWQsIHRoZSByZXN0IG9mIHRoZSBwaXBlbGluZSB3aWxsIG5vdCBiZSBjYWxsZWQgd2l0aFxuICogdGhpcyB0b2tlbi5cbiAqXG4gKiBGb3Igc2VyaWFsaXNhdGlvbiBvZiBwaXBlbGluZXMgdG8gd29yaywgYWxsIGZ1bmN0aW9ucyB1c2VkIGluIGFuIGluc3RhbmNlIG9mXG4gKiBhIHBpcGVsaW5lIHNob3VsZCBiZSByZWdpc3RlcmVkIHdpdGggbHVuci5QaXBlbGluZS4gUmVnaXN0ZXJlZCBmdW5jdGlvbnMgY2FuXG4gKiB0aGVuIGJlIGxvYWRlZC4gSWYgdHJ5aW5nIHRvIGxvYWQgYSBzZXJpYWxpc2VkIHBpcGVsaW5lIHRoYXQgdXNlcyBmdW5jdGlvbnNcbiAqIHRoYXQgYXJlIG5vdCByZWdpc3RlcmVkIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICpcbiAqIElmIG5vdCBwbGFubmluZyBvbiBzZXJpYWxpc2luZyB0aGUgcGlwZWxpbmUgdGhlbiByZWdpc3RlcmluZyBwaXBlbGluZSBmdW5jdGlvbnNcbiAqIGlzIG5vdCBuZWNlc3NhcnkuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmx1bnIuUGlwZWxpbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3N0YWNrID0gW107XG59O1xuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyZWRGdW5jdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIEEgcGlwZWxpbmUgZnVuY3Rpb24gbWFwcyBsdW5yLlRva2VuIHRvIGx1bnIuVG9rZW4uIEEgbHVuci5Ub2tlbiBjb250YWlucyB0aGUgdG9rZW5cbiAqIHN0cmluZyBhcyB3ZWxsIGFzIGFsbCBrbm93biBtZXRhZGF0YS4gQSBwaXBlbGluZSBmdW5jdGlvbiBjYW4gbXV0YXRlIHRoZSB0b2tlbiBzdHJpbmdcbiAqIG9yIG11dGF0ZSAob3IgYWRkKSBtZXRhZGF0YSBmb3IgYSBnaXZlbiB0b2tlbi5cbiAqXG4gKiBBIHBpcGVsaW5lIGZ1bmN0aW9uIGNhbiBpbmRpY2F0ZSB0aGF0IHRoZSBwYXNzZWQgdG9rZW4gc2hvdWxkIGJlIGRpc2NhcmRlZCBieSByZXR1cm5pbmdcbiAqIG51bGwuIFRoaXMgdG9rZW4gd2lsbCBub3QgYmUgcGFzc2VkIHRvIGFueSBkb3duc3RyZWFtIHBpcGVsaW5lIGZ1bmN0aW9ucyBhbmQgd2lsbCBub3QgYmVcbiAqIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBNdWx0aXBsZSB0b2tlbnMgY2FuIGJlIHJldHVybmVkIGJ5IHJldHVybmluZyBhbiBhcnJheSBvZiB0b2tlbnMuIEVhY2ggdG9rZW4gd2lsbCBiZSBwYXNzZWRcbiAqIHRvIGFueSBkb3duc3RyZWFtIHBpcGVsaW5lIGZ1bmN0aW9ucyBhbmQgYWxsIHdpbGwgcmV0dXJuZWQgdG9rZW5zIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGluZGV4LlxuICpcbiAqIEFueSBudW1iZXIgb2YgcGlwZWxpbmUgZnVuY3Rpb25zIG1heSBiZSBjaGFpbmVkIHRvZ2V0aGVyIHVzaW5nIGEgbHVuci5QaXBlbGluZS5cbiAqXG4gKiBAaW50ZXJmYWNlIGx1bnIuUGlwZWxpbmVGdW5jdGlvblxuICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiAtIEEgdG9rZW4gZnJvbSB0aGUgZG9jdW1lbnQgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IGkgLSBUaGUgaW5kZXggb2YgdGhpcyB0b2tlbiBpbiB0aGUgY29tcGxldGUgbGlzdCBvZiB0b2tlbnMgZm9yIHRoaXMgZG9jdW1lbnQvZmllbGQuXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5bXX0gdG9rZW5zIC0gQWxsIHRva2VucyBmb3IgdGhpcyBkb2N1bWVudC9maWVsZC5cbiAqIEByZXR1cm5zIHsoP2x1bnIuVG9rZW58bHVuci5Ub2tlbltdKX1cbiAqL1xuXG4vKipcbiAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gd2l0aCB0aGUgcGlwZWxpbmUuXG4gKlxuICogRnVuY3Rpb25zIHRoYXQgYXJlIHVzZWQgaW4gdGhlIHBpcGVsaW5lIHNob3VsZCBiZSByZWdpc3RlcmVkIGlmIHRoZSBwaXBlbGluZVxuICogbmVlZHMgdG8gYmUgc2VyaWFsaXNlZCwgb3IgYSBzZXJpYWxpc2VkIHBpcGVsaW5lIG5lZWRzIHRvIGJlIGxvYWRlZC5cbiAqXG4gKiBSZWdpc3RlcmluZyBhIGZ1bmN0aW9uIGRvZXMgbm90IGFkZCBpdCB0byBhIHBpcGVsaW5lLCBmdW5jdGlvbnMgbXVzdCBzdGlsbCBiZVxuICogYWRkZWQgdG8gaW5zdGFuY2VzIG9mIHRoZSBwaXBlbGluZSBmb3IgdGhlbSB0byBiZSB1c2VkIHdoZW4gcnVubmluZyBhIHBpcGVsaW5lLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjaGVjayBmb3IuXG4gKiBAcGFyYW0ge1N0cmluZ30gbGFiZWwgLSBUaGUgbGFiZWwgdG8gcmVnaXN0ZXIgdGhpcyBmdW5jdGlvbiB3aXRoXG4gKi9cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmbiwgbGFiZWwpIHtcbiAgaWYgKGxhYmVsIGluIHRoaXMucmVnaXN0ZXJlZEZ1bmN0aW9ucykge1xuICAgIGx1bnIudXRpbHMud2FybignT3ZlcndyaXRpbmcgZXhpc3RpbmcgcmVnaXN0ZXJlZCBmdW5jdGlvbjogJyArIGxhYmVsKTtcbiAgfVxuXG4gIGZuLmxhYmVsID0gbGFiZWw7XG4gIGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9uc1tmbi5sYWJlbF0gPSBmbjtcbn07XG5cbi8qKlxuICogV2FybnMgaWYgdGhlIGZ1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIGFzIGEgUGlwZWxpbmUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBpc1JlZ2lzdGVyZWQgPSBmbi5sYWJlbCAmJiAoZm4ubGFiZWwgaW4gdGhpcy5yZWdpc3RlcmVkRnVuY3Rpb25zKTtcblxuICBpZiAoIWlzUmVnaXN0ZXJlZCkge1xuICAgIGx1bnIudXRpbHMud2FybignRnVuY3Rpb24gaXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBwaXBlbGluZS4gVGhpcyBtYXkgY2F1c2UgcHJvYmxlbXMgd2hlbiBzZXJpYWxpc2luZyB0aGUgaW5kZXguXFxuJywgZm4pO1xuICB9XG59O1xuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpc2VkIHBpcGVsaW5lLlxuICpcbiAqIEFsbCBmdW5jdGlvbnMgdG8gYmUgbG9hZGVkIG11c3QgYWxyZWFkeSBiZSByZWdpc3RlcmVkIHdpdGggbHVuci5QaXBlbGluZS5cbiAqIElmIGFueSBmdW5jdGlvbiBmcm9tIHRoZSBzZXJpYWxpc2VkIGRhdGEgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgdGhlbiBhblxuICogZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlcmlhbGlzZWQgLSBUaGUgc2VyaWFsaXNlZCBwaXBlbGluZSB0byBsb2FkLlxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuUGlwZWxpbmUubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpc2VkKSB7XG4gIHZhciBwaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG5cbiAgc2VyaWFsaXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICB2YXIgZm4gPSBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyZWRGdW5jdGlvbnNbZm5OYW1lXTtcblxuICAgIGlmIChmbikge1xuICAgICAgcGlwZWxpbmUuYWRkKGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgbG9hZCB1bnJlZ2lzdGVyZWQgZnVuY3Rpb246ICcgKyBmbk5hbWUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBpcGVsaW5lO1xufTtcblxuLyoqXG4gKiBBZGRzIG5ldyBmdW5jdGlvbnMgdG8gdGhlIGVuZCBvZiB0aGUgcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9uW119IGZ1bmN0aW9ucyAtIEFueSBudW1iZXIgb2YgZnVuY3Rpb25zIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgZm5zLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQoZm4pO1xuICAgIHRoaXMuX3N0YWNrLnB1c2goZm4pO1xuICB9LCB0aGlzKTtcbn07XG5cbi8qKlxuICogQWRkcyBhIHNpbmdsZSBmdW5jdGlvbiBhZnRlciBhIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlXG4gKiBwaXBlbGluZS5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGV4aXN0aW5nRm4gLSBBIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHBpcGVsaW5lLlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IG5ld0ZuIC0gVGhlIG5ldyBmdW5jdGlvbiB0byBhZGQgdG8gdGhlIHBpcGVsaW5lLlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5hZnRlciA9IGZ1bmN0aW9uIChleGlzdGluZ0ZuLCBuZXdGbikge1xuICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChuZXdGbik7XG5cbiAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZXhpc3RpbmdGbik7XG4gIGlmIChwb3MgPT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGV4aXN0aW5nRm4nKTtcbiAgfVxuXG4gIHBvcyA9IHBvcyArIDE7XG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKTtcbn07XG5cbi8qKlxuICogQWRkcyBhIHNpbmdsZSBmdW5jdGlvbiBiZWZvcmUgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICogcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBleGlzdGluZ0ZuIC0gQSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZSBwaXBlbGluZS5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYmVmb3JlID0gZnVuY3Rpb24gKGV4aXN0aW5nRm4sIG5ld0ZuKSB7XG4gIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKG5ld0ZuKTtcblxuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihleGlzdGluZ0ZuKTtcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZXhpc3RpbmdGbicpO1xuICB9XG5cbiAgdGhpcy5fc3RhY2suc3BsaWNlKHBvcywgMCwgbmV3Rm4pO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgZnVuY3Rpb24gZnJvbSB0aGUgcGlwZWxpbmUuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byByZW1vdmUgZnJvbSB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihmbik7XG4gIGlmIChwb3MgPT0gLTEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAxKTtcbn07XG5cbi8qKlxuICogUnVucyB0aGUgY3VycmVudCBsaXN0IG9mIGZ1bmN0aW9ucyB0aGF0IG1ha2UgdXAgdGhlIHBpcGVsaW5lIGFnYWluc3QgdGhlXG4gKiBwYXNzZWQgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2VucyBUaGUgdG9rZW5zIHRvIHJ1biB0aHJvdWdoIHRoZSBwaXBlbGluZS5cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHRva2Vucykge1xuICB2YXIgc3RhY2tMZW5ndGggPSB0aGlzLl9zdGFjay5sZW5ndGg7XG5cbiAgdmFyIHIgPSBmdW5jdGlvbiAobWVtbywgdG9rZW4sIGopIHtcbiAgICB2YXIgcmVzdWx0ID0gZm4odG9rZW4sIGosIHRva2Vucyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwIHx8IHJlc3VsdCA9PT0gJycpIHJldHVybiBtZW1vO1xuICAgIHJldHVybiBtZW1vLmNvbmNhdChyZXN1bHQpO1xuICB9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2tMZW5ndGg7IGkrKykge1xuICAgIHZhciBmbiA9IHRoaXMuX3N0YWNrW2ldO1xuICAgIHRva2VucyA9IHRva2Vucy5yZWR1Y2UociwgW10pO1xuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn07XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIGZvciBwYXNzaW5nIGEgc3RyaW5nIHRocm91Z2ggYSBwaXBlbGluZSBhbmQgZ2V0dGluZ1xuICogc3RyaW5ncyBvdXQuIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2Ygd3JhcHBpbmcgdGhlIHBhc3NlZCBzdHJpbmcgaW4gYVxuICogdG9rZW4gYW5kIG1hcHBpbmcgdGhlIHJlc3VsdGluZyB0b2tlbnMgYmFjayB0byBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIHBhc3MgdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJ1blN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIHRva2VuID0gbmV3IGx1bnIuVG9rZW4gKHN0cik7XG5cbiAgcmV0dXJuIHRoaXMucnVuKFt0b2tlbl0pLm1hcChmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0LnRvU3RyaW5nKCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBSZXNldHMgdGhlIHBpcGVsaW5lIGJ5IHJlbW92aW5nIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3N0YWNrID0gW107XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGlwZWxpbmUgcmVhZHkgZm9yIHNlcmlhbGlzYXRpb24uXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fc3RhY2subWFwKGZ1bmN0aW9uIChmbikge1xuICAgIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKGZuKTtcbiAgICByZXR1cm4gZm4ubGFiZWw7XG4gIH0pO1xufTtcbi8qIVxuICogbHVuci5WZWN0b3JcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgdmVjdG9yIGlzIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2ZWN0b3Igc3BhY2Ugb2YgZG9jdW1lbnRzIGFuZCBxdWVyaWVzLiBUaGVzZVxuICogdmVjdG9ycyBzdXBwb3J0IG9wZXJhdGlvbnMgdG8gZGV0ZXJtaW5lIHRoZSBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIGRvY3VtZW50cyBvclxuICogYSBkb2N1bWVudCBhbmQgYSBxdWVyeS5cbiAqXG4gKiBOb3JtYWxseSBubyBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgaW5pdGlhbGl6aW5nIGEgdmVjdG9yLCBidXQgaW4gdGhlIGNhc2Ugb2ZcbiAqIGxvYWRpbmcgYSBwcmV2aW91c2x5IGR1bXBlZCB2ZWN0b3IgdGhlIHJhdyBlbGVtZW50cyBjYW4gYmUgcHJvdmlkZWQgdG8gdGhlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEZvciBwZXJmb3JtYW5jZSByZWFzb25zIHZlY3RvcnMgYXJlIGltcGxlbWVudGVkIHdpdGggYSBmbGF0IGFycmF5LCB3aGVyZSBhbiBlbGVtZW50c1xuICogaW5kZXggaXMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgaXRzIHZhbHVlLiBFLmcuIFtpbmRleCwgdmFsdWUsIGluZGV4LCB2YWx1ZV0uIFRoaXNcbiAqIGFsbG93cyB0aGUgdW5kZXJseWluZyBhcnJheSB0byBiZSBhcyBzcGFyc2UgYXMgcG9zc2libGUgYW5kIHN0aWxsIG9mZmVyIGRlY2VudFxuICogcGVyZm9ybWFuY2Ugd2hlbiBiZWluZyB1c2VkIGZvciB2ZWN0b3IgY2FsY3VsYXRpb25zLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtOdW1iZXJbXX0gW2VsZW1lbnRzXSAtIFRoZSBmbGF0IGxpc3Qgb2YgZWxlbWVudCBpbmRleCBhbmQgZWxlbWVudCB2YWx1ZSBwYWlycy5cbiAqL1xubHVuci5WZWN0b3IgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgdGhpcy5fbWFnbml0dWRlID0gMDtcbiAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzIHx8IFtdO1xufTtcblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIHdpdGhpbiB0aGUgdmVjdG9yIHRvIGluc2VydCBhIGdpdmVuIGluZGV4LlxuICpcbiAqIFRoaXMgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IGluc2VydCBhbmQgdXBzZXJ0LiBJZiB0aGVyZSBhcmUgZHVwbGljYXRlIGluZGV4ZXMgdGhlblxuICogdGhlIHBvc2l0aW9uIGlzIHJldHVybmVkIGFzIGlmIHRoZSB2YWx1ZSBmb3IgdGhhdCBpbmRleCB3ZXJlIHRvIGJlIHVwZGF0ZWQsIGJ1dCBpdFxuICogaXMgdGhlIGNhbGxlcnMgcmVzcG9uc2liaWxpdHkgdG8gY2hlY2sgd2hldGhlciB0aGVyZSBpcyBhIGR1cGxpY2F0ZSBhdCB0aGF0IGluZGV4XG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUucG9zaXRpb25Gb3JJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAvLyBGb3IgYW4gZW1wdHkgdmVjdG9yIHRoZSB0dXBsZSBjYW4gYmUgaW5zZXJ0ZWQgYXQgdGhlIGJlZ2lubmluZ1xuICBpZiAodGhpcy5lbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBzdGFydCA9IDAsXG4gICAgICBlbmQgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAvIDIsXG4gICAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0LFxuICAgICAgcGl2b3RQb2ludCA9IE1hdGguZmxvb3Ioc2xpY2VMZW5ndGggLyAyKSxcbiAgICAgIHBpdm90SW5kZXggPSB0aGlzLmVsZW1lbnRzW3Bpdm90UG9pbnQgKiAyXTtcblxuICB3aGlsZSAoc2xpY2VMZW5ndGggPiAxKSB7XG4gICAgaWYgKHBpdm90SW5kZXggPCBpbmRleCkge1xuICAgICAgc3RhcnQgPSBwaXZvdFBvaW50O1xuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4ID4gaW5kZXgpIHtcbiAgICAgIGVuZCA9IHBpdm90UG9pbnQ7XG4gICAgfVxuXG4gICAgaWYgKHBpdm90SW5kZXggPT0gaW5kZXgpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHNsaWNlTGVuZ3RoID0gZW5kIC0gc3RhcnQ7XG4gICAgcGl2b3RQb2ludCA9IHN0YXJ0ICsgTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpO1xuICAgIHBpdm90SW5kZXggPSB0aGlzLmVsZW1lbnRzW3Bpdm90UG9pbnQgKiAyXTtcbiAgfVxuXG4gIGlmIChwaXZvdEluZGV4ID09IGluZGV4KSB7XG4gICAgcmV0dXJuIHBpdm90UG9pbnQgKiAyO1xuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMjtcbiAgfVxuXG4gIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICByZXR1cm4gKHBpdm90UG9pbnQgKyAxKSAqIDI7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IGFuIGluZGV4IHdpdGhpbiB0aGUgdmVjdG9yLlxuICpcbiAqIERvZXMgbm90IGFsbG93IGR1cGxpY2F0ZXMsIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBlbnRyeVxuICogZm9yIHRoaXMgaW5kZXguXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChpbnNlcnRJZHgsIHZhbCkge1xuICB0aGlzLnVwc2VydChpbnNlcnRJZHgsIHZhbCwgZnVuY3Rpb24gKCkge1xuICAgIHRocm93IFwiZHVwbGljYXRlIGluZGV4XCI7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZXhpc3RpbmcgaW5kZXggd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBmb3IgdXBkYXRlcywgdGhlIGV4aXN0aW5nIHZhbHVlIGFuZCB0aGVcbiAqIHJlcXVlc3RlZCB2YWx1ZSBhcmUgcGFzc2VkIGFzIGFyZ3VtZW50c1xuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudXBzZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsLCBmbikge1xuICB0aGlzLl9tYWduaXR1ZGUgPSAwO1xuICB2YXIgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uRm9ySW5kZXgoaW5zZXJ0SWR4KTtcblxuICBpZiAodGhpcy5lbGVtZW50c1twb3NpdGlvbl0gPT0gaW5zZXJ0SWR4KSB7XG4gICAgdGhpcy5lbGVtZW50c1twb3NpdGlvbiArIDFdID0gZm4odGhpcy5lbGVtZW50c1twb3NpdGlvbiArIDFdLCB2YWwpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZWxlbWVudHMuc3BsaWNlKHBvc2l0aW9uLCAwLCBpbnNlcnRJZHgsIHZhbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbWFnbml0dWRlIG9mIHRoaXMgdmVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5tYWduaXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9tYWduaXR1ZGUpIHJldHVybiB0aGlzLl9tYWduaXR1ZGU7XG5cbiAgdmFyIHN1bU9mU3F1YXJlcyA9IDAsXG4gICAgICBlbGVtZW50c0xlbmd0aCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAxOyBpIDwgZWxlbWVudHNMZW5ndGg7IGkgKz0gMikge1xuICAgIHZhciB2YWwgPSB0aGlzLmVsZW1lbnRzW2ldO1xuICAgIHN1bU9mU3F1YXJlcyArPSB2YWwgKiB2YWw7XG4gIH1cblxuICB0aGlzLl9tYWduaXR1ZGUgPSBNYXRoLnNxcnQoc3VtT2ZTcXVhcmVzKTtcbiAgcmV0dXJuIHRoaXMuX21hZ25pdHVkZTtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7bHVuci5WZWN0b3J9IG90aGVyVmVjdG9yIC0gVGhlIHZlY3RvciB0byBjb21wdXRlIHRoZSBkb3QgcHJvZHVjdCB3aXRoLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uIChvdGhlclZlY3Rvcikge1xuICB2YXIgZG90UHJvZHVjdCA9IDAsXG4gICAgICBhID0gdGhpcy5lbGVtZW50cywgYiA9IG90aGVyVmVjdG9yLmVsZW1lbnRzLFxuICAgICAgYUxlbiA9IGEubGVuZ3RoLCBiTGVuID0gYi5sZW5ndGgsXG4gICAgICBhVmFsID0gMCwgYlZhbCA9IDAsXG4gICAgICBpID0gMCwgaiA9IDA7XG5cbiAgd2hpbGUgKGkgPCBhTGVuICYmIGogPCBiTGVuKSB7XG4gICAgYVZhbCA9IGFbaV07IGJWYWwgPSBiW2pdO1xuICAgIGlmIChhVmFsIDwgYlZhbCkge1xuICAgICAgaSArPSAyO1xuICAgIH0gZWxzZSBpZiAoYVZhbCA+IGJWYWwpIHtcbiAgICAgIGogKz0gMjtcbiAgICB9IGVsc2UgaWYgKGFWYWwgPT0gYlZhbCkge1xuICAgICAgZG90UHJvZHVjdCArPSBhW2kgKyAxXSAqIGJbaiArIDFdO1xuICAgICAgaSArPSAyO1xuICAgICAgaiArPSAyO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkb3RQcm9kdWN0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyXG4gKiB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgb3RoZXIgdmVjdG9yIHRvIGNhbGN1bGF0ZSB0aGVcbiAqIHNpbWlsYXJpdHkgd2l0aC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5zaW1pbGFyaXR5ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHJldHVybiB0aGlzLmRvdChvdGhlclZlY3RvcikgLyAodGhpcy5tYWduaXR1ZGUoKSAqIG90aGVyVmVjdG9yLm1hZ25pdHVkZSgpKTtcbn07XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHZlY3RvciB0byBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG91dHB1dCA9IG5ldyBBcnJheSAodGhpcy5lbGVtZW50cy5sZW5ndGggLyAyKTtcblxuICBmb3IgKHZhciBpID0gMSwgaiA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSArPSAyLCBqKyspIHtcbiAgICBvdXRwdXRbal0gPSB0aGlzLmVsZW1lbnRzW2ldO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbi8qKlxuICogQSBKU09OIHNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJbXX1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZWxlbWVudHM7XG59O1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qIVxuICogbHVuci5zdGVtbWVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKiBJbmNsdWRlcyBjb2RlIGZyb20gLSBodHRwOi8vdGFydGFydXMub3JnL35tYXJ0aW4vUG9ydGVyU3RlbW1lci9qcy50eHRcbiAqL1xuXG4vKipcbiAqIGx1bnIuc3RlbW1lciBpcyBhbiBlbmdsaXNoIGxhbmd1YWdlIHN0ZW1tZXIsIHRoaXMgaXMgYSBKYXZhU2NyaXB0XG4gKiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUG9ydGVyU3RlbW1lciB0YWtlbiBmcm9tIGh0dHA6Ly90YXJ0YXJ1cy5vcmcvfm1hcnRpblxuICpcbiAqIEBzdGF0aWNcbiAqIEBpbXBsZW1lbnRzIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAcGFyYW0ge2x1bnIuVG9rZW59IHRva2VuIC0gVGhlIHN0cmluZyB0byBzdGVtXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuc3RlbW1lciA9IChmdW5jdGlvbigpe1xuICB2YXIgc3RlcDJsaXN0ID0ge1xuICAgICAgXCJhdGlvbmFsXCIgOiBcImF0ZVwiLFxuICAgICAgXCJ0aW9uYWxcIiA6IFwidGlvblwiLFxuICAgICAgXCJlbmNpXCIgOiBcImVuY2VcIixcbiAgICAgIFwiYW5jaVwiIDogXCJhbmNlXCIsXG4gICAgICBcIml6ZXJcIiA6IFwiaXplXCIsXG4gICAgICBcImJsaVwiIDogXCJibGVcIixcbiAgICAgIFwiYWxsaVwiIDogXCJhbFwiLFxuICAgICAgXCJlbnRsaVwiIDogXCJlbnRcIixcbiAgICAgIFwiZWxpXCIgOiBcImVcIixcbiAgICAgIFwib3VzbGlcIiA6IFwib3VzXCIsXG4gICAgICBcIml6YXRpb25cIiA6IFwiaXplXCIsXG4gICAgICBcImF0aW9uXCIgOiBcImF0ZVwiLFxuICAgICAgXCJhdG9yXCIgOiBcImF0ZVwiLFxuICAgICAgXCJhbGlzbVwiIDogXCJhbFwiLFxuICAgICAgXCJpdmVuZXNzXCIgOiBcIml2ZVwiLFxuICAgICAgXCJmdWxuZXNzXCIgOiBcImZ1bFwiLFxuICAgICAgXCJvdXNuZXNzXCIgOiBcIm91c1wiLFxuICAgICAgXCJhbGl0aVwiIDogXCJhbFwiLFxuICAgICAgXCJpdml0aVwiIDogXCJpdmVcIixcbiAgICAgIFwiYmlsaXRpXCIgOiBcImJsZVwiLFxuICAgICAgXCJsb2dpXCIgOiBcImxvZ1wiXG4gICAgfSxcblxuICAgIHN0ZXAzbGlzdCA9IHtcbiAgICAgIFwiaWNhdGVcIiA6IFwiaWNcIixcbiAgICAgIFwiYXRpdmVcIiA6IFwiXCIsXG4gICAgICBcImFsaXplXCIgOiBcImFsXCIsXG4gICAgICBcImljaXRpXCIgOiBcImljXCIsXG4gICAgICBcImljYWxcIiA6IFwiaWNcIixcbiAgICAgIFwiZnVsXCIgOiBcIlwiLFxuICAgICAgXCJuZXNzXCIgOiBcIlwiXG4gICAgfSxcblxuICAgIGMgPSBcIlteYWVpb3VdXCIsICAgICAgICAgIC8vIGNvbnNvbmFudFxuICAgIHYgPSBcIlthZWlvdXldXCIsICAgICAgICAgIC8vIHZvd2VsXG4gICAgQyA9IGMgKyBcIlteYWVpb3V5XSpcIiwgICAgLy8gY29uc29uYW50IHNlcXVlbmNlXG4gICAgViA9IHYgKyBcIlthZWlvdV0qXCIsICAgICAgLy8gdm93ZWwgc2VxdWVuY2VcblxuICAgIG1ncjAgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMsICAgICAgICAgICAgICAgLy8gW0NdVkMuLi4gaXMgbT4wXG4gICAgbWVxMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFwiKFwiICsgViArIFwiKT8kXCIsICAvLyBbQ11WQ1tWXSBpcyBtPTFcbiAgICBtZ3IxID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDICsgViArIEMsICAgICAgIC8vIFtDXVZDVkMuLi4gaXMgbT4xXG4gICAgc192ID0gXCJeKFwiICsgQyArIFwiKT9cIiArIHY7ICAgICAgICAgICAgICAgICAgIC8vIHZvd2VsIGluIHN0ZW1cblxuICB2YXIgcmVfbWdyMCA9IG5ldyBSZWdFeHAobWdyMCk7XG4gIHZhciByZV9tZ3IxID0gbmV3IFJlZ0V4cChtZ3IxKTtcbiAgdmFyIHJlX21lcTEgPSBuZXcgUmVnRXhwKG1lcTEpO1xuICB2YXIgcmVfc192ID0gbmV3IFJlZ0V4cChzX3YpO1xuXG4gIHZhciByZV8xYSA9IC9eKC4rPykoc3N8aSllcyQvO1xuICB2YXIgcmUyXzFhID0gL14oLis/KShbXnNdKXMkLztcbiAgdmFyIHJlXzFiID0gL14oLis/KWVlZCQvO1xuICB2YXIgcmUyXzFiID0gL14oLis/KShlZHxpbmcpJC87XG4gIHZhciByZV8xYl8yID0gLy4kLztcbiAgdmFyIHJlMl8xYl8yID0gLyhhdHxibHxpeikkLztcbiAgdmFyIHJlM18xYl8yID0gbmV3IFJlZ0V4cChcIihbXmFlaW91eWxzel0pXFxcXDEkXCIpO1xuICB2YXIgcmU0XzFiXzIgPSBuZXcgUmVnRXhwKFwiXlwiICsgQyArIHYgKyBcIlteYWVpb3V3eHldJFwiKTtcblxuICB2YXIgcmVfMWMgPSAvXiguKz9bXmFlaW91XSl5JC87XG4gIHZhciByZV8yID0gL14oLis/KShhdGlvbmFsfHRpb25hbHxlbmNpfGFuY2l8aXplcnxibGl8YWxsaXxlbnRsaXxlbGl8b3VzbGl8aXphdGlvbnxhdGlvbnxhdG9yfGFsaXNtfGl2ZW5lc3N8ZnVsbmVzc3xvdXNuZXNzfGFsaXRpfGl2aXRpfGJpbGl0aXxsb2dpKSQvO1xuXG4gIHZhciByZV8zID0gL14oLis/KShpY2F0ZXxhdGl2ZXxhbGl6ZXxpY2l0aXxpY2FsfGZ1bHxuZXNzKSQvO1xuXG4gIHZhciByZV80ID0gL14oLis/KShhbHxhbmNlfGVuY2V8ZXJ8aWN8YWJsZXxpYmxlfGFudHxlbWVudHxtZW50fGVudHxvdXxpc218YXRlfGl0aXxvdXN8aXZlfGl6ZSkkLztcbiAgdmFyIHJlMl80ID0gL14oLis/KShzfHQpKGlvbikkLztcblxuICB2YXIgcmVfNSA9IC9eKC4rPyllJC87XG4gIHZhciByZV81XzEgPSAvbGwkLztcbiAgdmFyIHJlM181ID0gbmV3IFJlZ0V4cChcIl5cIiArIEMgKyB2ICsgXCJbXmFlaW91d3h5XSRcIik7XG5cbiAgdmFyIHBvcnRlclN0ZW1tZXIgPSBmdW5jdGlvbiBwb3J0ZXJTdGVtbWVyKHcpIHtcbiAgICB2YXIgc3RlbSxcbiAgICAgIHN1ZmZpeCxcbiAgICAgIGZpcnN0Y2gsXG4gICAgICByZSxcbiAgICAgIHJlMixcbiAgICAgIHJlMyxcbiAgICAgIHJlNDtcblxuICAgIGlmICh3Lmxlbmd0aCA8IDMpIHsgcmV0dXJuIHc7IH1cblxuICAgIGZpcnN0Y2ggPSB3LnN1YnN0cigwLDEpO1xuICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICB3ID0gZmlyc3RjaC50b1VwcGVyQ2FzZSgpICsgdy5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAxYVxuICAgIHJlID0gcmVfMWE7XG4gICAgcmUyID0gcmUyXzFhO1xuXG4gICAgaWYgKHJlLnRlc3QodykpIHsgdyA9IHcucmVwbGFjZShyZSxcIiQxJDJcIik7IH1cbiAgICBlbHNlIGlmIChyZTIudGVzdCh3KSkgeyB3ID0gdy5yZXBsYWNlKHJlMixcIiQxJDJcIik7IH1cblxuICAgIHZhciBmcDtcbiAgICAvLyBTdGVwIDFiXG4gICAgcmUgPSByZV8xYjtcbiAgICByZTIgPSByZTJfMWI7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KGZwWzFdKSkge1xuICAgICAgICByZSA9IHJlXzFiXzI7XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUsXCJcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZTIudGVzdCh3KSkge1xuICAgICAgZnAgPSByZTIuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlMiA9IHJlX3NfdjtcbiAgICAgIGlmIChyZTIudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgcmUyID0gcmUyXzFiXzI7XG4gICAgICAgIHJlMyA9IHJlM18xYl8yO1xuICAgICAgICByZTQgPSByZTRfMWJfMjtcbiAgICAgICAgaWYgKHJlMi50ZXN0KHcpKSB7IHcgPSB3ICsgXCJlXCI7IH1cbiAgICAgICAgZWxzZSBpZiAocmUzLnRlc3QodykpIHsgcmUgPSByZV8xYl8yOyB3ID0gdy5yZXBsYWNlKHJlLFwiXCIpOyB9XG4gICAgICAgIGVsc2UgaWYgKHJlNC50ZXN0KHcpKSB7IHcgPSB3ICsgXCJlXCI7IH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDFjIC0gcmVwbGFjZSBzdWZmaXggeSBvciBZIGJ5IGkgaWYgcHJlY2VkZWQgYnkgYSBub24tdm93ZWwgd2hpY2ggaXMgbm90IHRoZSBmaXJzdCBsZXR0ZXIgb2YgdGhlIHdvcmQgKHNvIGNyeSAtPiBjcmksIGJ5IC0+IGJ5LCBzYXkgLT4gc2F5KVxuICAgIHJlID0gcmVfMWM7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHcgPSBzdGVtICsgXCJpXCI7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAyXG4gICAgcmUgPSByZV8yO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICBzdWZmaXggPSBmcFsyXTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtICsgc3RlcDJsaXN0W3N1ZmZpeF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCAzXG4gICAgcmUgPSByZV8zO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICBzdWZmaXggPSBmcFsyXTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtICsgc3RlcDNsaXN0W3N1ZmZpeF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCA0XG4gICAgcmUgPSByZV80O1xuICAgIHJlMiA9IHJlMl80O1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICByZSA9IHJlX21ncjE7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlMi5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdICsgZnBbMl07XG4gICAgICByZTIgPSByZV9tZ3IxO1xuICAgICAgaWYgKHJlMi50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgNVxuICAgIHJlID0gcmVfNTtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUgPSByZV9tZ3IxO1xuICAgICAgcmUyID0gcmVfbWVxMTtcbiAgICAgIHJlMyA9IHJlM181O1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkgfHwgKHJlMi50ZXN0KHN0ZW0pICYmICEocmUzLnRlc3Qoc3RlbSkpKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZSA9IHJlXzVfMTtcbiAgICByZTIgPSByZV9tZ3IxO1xuICAgIGlmIChyZS50ZXN0KHcpICYmIHJlMi50ZXN0KHcpKSB7XG4gICAgICByZSA9IHJlXzFiXzI7XG4gICAgICB3ID0gdy5yZXBsYWNlKHJlLFwiXCIpO1xuICAgIH1cblxuICAgIC8vIGFuZCB0dXJuIGluaXRpYWwgWSBiYWNrIHRvIHlcblxuICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICB3ID0gZmlyc3RjaC50b0xvd2VyQ2FzZSgpICsgdy5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHc7XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHJldHVybiB0b2tlbi51cGRhdGUocG9ydGVyU3RlbW1lcik7XG4gIH07XG59KSgpO1xuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdGVtbWVyLCAnc3RlbW1lcicpO1xuLyohXG4gKiBsdW5yLnN0b3BXb3JkRmlsdGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIgYnVpbGRzIGEgc3RvcFdvcmRGaWx0ZXIgZnVuY3Rpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAqIGxpc3Qgb2Ygc3RvcCB3b3Jkcy5cbiAqXG4gKiBUaGUgYnVpbHQgaW4gbHVuci5zdG9wV29yZEZpbHRlciBpcyBidWlsdCB1c2luZyB0aGlzIGdlbmVyYXRvciBhbmQgY2FuIGJlIHVzZWRcbiAqIHRvIGdlbmVyYXRlIGN1c3RvbSBzdG9wV29yZEZpbHRlcnMgZm9yIGFwcGxpY2F0aW9ucyBvciBub24gRW5nbGlzaCBsYW5ndWFnZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW4gVGhlIHRva2VuIHRvIHBhc3MgdGhyb3VnaCB0aGUgZmlsdGVyXG4gKiBAcmV0dXJucyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHNlZSBsdW5yLlBpcGVsaW5lXG4gKiBAc2VlIGx1bnIuc3RvcFdvcmRGaWx0ZXJcbiAqL1xubHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyID0gZnVuY3Rpb24gKHN0b3BXb3Jkcykge1xuICB2YXIgd29yZHMgPSBzdG9wV29yZHMucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBzdG9wV29yZCkge1xuICAgIG1lbW9bc3RvcFdvcmRdID0gc3RvcFdvcmQ7XG4gICAgcmV0dXJuIG1lbW87XG4gIH0sIHt9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgaWYgKHRva2VuICYmIHdvcmRzW3Rva2VuLnRvU3RyaW5nKCldICE9PSB0b2tlbi50b1N0cmluZygpKSByZXR1cm4gdG9rZW47XG4gIH07XG59O1xuXG4vKipcbiAqIGx1bnIuc3RvcFdvcmRGaWx0ZXIgaXMgYW4gRW5nbGlzaCBsYW5ndWFnZSBzdG9wIHdvcmQgbGlzdCBmaWx0ZXIsIGFueSB3b3Jkc1xuICogY29udGFpbmVkIGluIHRoZSBsaXN0IHdpbGwgbm90IGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBmaWx0ZXIuXG4gKlxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGluIHRoZSBQaXBlbGluZS4gSWYgdGhlIHRva2VuIGRvZXMgbm90IHBhc3MgdGhlXG4gKiBmaWx0ZXIgdGhlbiB1bmRlZmluZWQgd2lsbCBiZSByZXR1cm5lZC5cbiAqXG4gKiBAaW1wbGVtZW50cyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHBhcmFtcyB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIHRvIGNoZWNrIGZvciBiZWluZyBhIHN0b3Agd29yZC5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5zdG9wV29yZEZpbHRlciA9IGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlcihbXG4gICdhJyxcbiAgJ2FibGUnLFxuICAnYWJvdXQnLFxuICAnYWNyb3NzJyxcbiAgJ2FmdGVyJyxcbiAgJ2FsbCcsXG4gICdhbG1vc3QnLFxuICAnYWxzbycsXG4gICdhbScsXG4gICdhbW9uZycsXG4gICdhbicsXG4gICdhbmQnLFxuICAnYW55JyxcbiAgJ2FyZScsXG4gICdhcycsXG4gICdhdCcsXG4gICdiZScsXG4gICdiZWNhdXNlJyxcbiAgJ2JlZW4nLFxuICAnYnV0JyxcbiAgJ2J5JyxcbiAgJ2NhbicsXG4gICdjYW5ub3QnLFxuICAnY291bGQnLFxuICAnZGVhcicsXG4gICdkaWQnLFxuICAnZG8nLFxuICAnZG9lcycsXG4gICdlaXRoZXInLFxuICAnZWxzZScsXG4gICdldmVyJyxcbiAgJ2V2ZXJ5JyxcbiAgJ2ZvcicsXG4gICdmcm9tJyxcbiAgJ2dldCcsXG4gICdnb3QnLFxuICAnaGFkJyxcbiAgJ2hhcycsXG4gICdoYXZlJyxcbiAgJ2hlJyxcbiAgJ2hlcicsXG4gICdoZXJzJyxcbiAgJ2hpbScsXG4gICdoaXMnLFxuICAnaG93JyxcbiAgJ2hvd2V2ZXInLFxuICAnaScsXG4gICdpZicsXG4gICdpbicsXG4gICdpbnRvJyxcbiAgJ2lzJyxcbiAgJ2l0JyxcbiAgJ2l0cycsXG4gICdqdXN0JyxcbiAgJ2xlYXN0JyxcbiAgJ2xldCcsXG4gICdsaWtlJyxcbiAgJ2xpa2VseScsXG4gICdtYXknLFxuICAnbWUnLFxuICAnbWlnaHQnLFxuICAnbW9zdCcsXG4gICdtdXN0JyxcbiAgJ215JyxcbiAgJ25laXRoZXInLFxuICAnbm8nLFxuICAnbm9yJyxcbiAgJ25vdCcsXG4gICdvZicsXG4gICdvZmYnLFxuICAnb2Z0ZW4nLFxuICAnb24nLFxuICAnb25seScsXG4gICdvcicsXG4gICdvdGhlcicsXG4gICdvdXInLFxuICAnb3duJyxcbiAgJ3JhdGhlcicsXG4gICdzYWlkJyxcbiAgJ3NheScsXG4gICdzYXlzJyxcbiAgJ3NoZScsXG4gICdzaG91bGQnLFxuICAnc2luY2UnLFxuICAnc28nLFxuICAnc29tZScsXG4gICd0aGFuJyxcbiAgJ3RoYXQnLFxuICAndGhlJyxcbiAgJ3RoZWlyJyxcbiAgJ3RoZW0nLFxuICAndGhlbicsXG4gICd0aGVyZScsXG4gICd0aGVzZScsXG4gICd0aGV5JyxcbiAgJ3RoaXMnLFxuICAndGlzJyxcbiAgJ3RvJyxcbiAgJ3RvbycsXG4gICd0d2FzJyxcbiAgJ3VzJyxcbiAgJ3dhbnRzJyxcbiAgJ3dhcycsXG4gICd3ZScsXG4gICd3ZXJlJyxcbiAgJ3doYXQnLFxuICAnd2hlbicsXG4gICd3aGVyZScsXG4gICd3aGljaCcsXG4gICd3aGlsZScsXG4gICd3aG8nLFxuICAnd2hvbScsXG4gICd3aHknLFxuICAnd2lsbCcsXG4gICd3aXRoJyxcbiAgJ3dvdWxkJyxcbiAgJ3lldCcsXG4gICd5b3UnLFxuICAneW91cidcbl0pO1xuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdG9wV29yZEZpbHRlciwgJ3N0b3BXb3JkRmlsdGVyJyk7XG4vKiFcbiAqIGx1bnIudHJpbW1lclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci50cmltbWVyIGlzIGEgcGlwZWxpbmUgZnVuY3Rpb24gZm9yIHRyaW1taW5nIG5vbiB3b3JkXG4gKiBjaGFyYWN0ZXJzIGZyb20gdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHRva2VucyBiZWZvcmUgdGhleVxuICogZW50ZXIgdGhlIGluZGV4LlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gbWF5IG5vdCB3b3JrIGNvcnJlY3RseSBmb3Igbm9uIGxhdGluXG4gKiBjaGFyYWN0ZXJzIGFuZCBzaG91bGQgZWl0aGVyIGJlIHJlbW92ZWQgb3IgYWRhcHRlZCBmb3IgdXNlXG4gKiB3aXRoIGxhbmd1YWdlcyB3aXRoIG5vbi1sYXRpbiBjaGFyYWN0ZXJzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBpbXBsZW1lbnRzIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAcGFyYW0ge2x1bnIuVG9rZW59IHRva2VuIFRoZSB0b2tlbiB0byBwYXNzIHRocm91Z2ggdGhlIGZpbHRlclxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKiBAc2VlIGx1bnIuUGlwZWxpbmVcbiAqL1xubHVuci50cmltbWVyID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gIHJldHVybiB0b2tlbi51cGRhdGUoZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9eXFxXKy8sICcnKS5yZXBsYWNlKC9cXFcrJC8sICcnKTtcbiAgfSk7XG59O1xuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci50cmltbWVyLCAndHJpbW1lcicpO1xuLyohXG4gKiBsdW5yLlRva2VuU2V0XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIHRva2VuIHNldCBpcyB1c2VkIHRvIHN0b3JlIHRoZSB1bmlxdWUgbGlzdCBvZiBhbGwgdG9rZW5zXG4gKiB3aXRoaW4gYW4gaW5kZXguIFRva2VuIHNldHMgYXJlIGFsc28gdXNlZCB0byByZXByZXNlbnQgYW5cbiAqIGluY29taW5nIHF1ZXJ5IHRvIHRoZSBpbmRleCwgdGhpcyBxdWVyeSB0b2tlbiBzZXQgYW5kIGluZGV4XG4gKiB0b2tlbiBzZXQgYXJlIHRoZW4gaW50ZXJzZWN0ZWQgdG8gZmluZCB3aGljaCB0b2tlbnMgdG8gbG9va1xuICogdXAgaW4gdGhlIGludmVydGVkIGluZGV4LlxuICpcbiAqIEEgdG9rZW4gc2V0IGNhbiBob2xkIG11bHRpcGxlIHRva2VucywgYXMgaW4gdGhlIGNhc2Ugb2YgdGhlXG4gKiBpbmRleCB0b2tlbiBzZXQsIG9yIGl0IGNhbiBob2xkIGEgc2luZ2xlIHRva2VuIGFzIGluIHRoZVxuICogY2FzZSBvZiBhIHNpbXBsZSBxdWVyeSB0b2tlbiBzZXQuXG4gKlxuICogQWRkaXRpb25hbGx5IHRva2VuIHNldHMgYXJlIHVzZWQgdG8gcGVyZm9ybSB3aWxkY2FyZCBtYXRjaGluZy5cbiAqIExlYWRpbmcsIGNvbnRhaW5lZCBhbmQgdHJhaWxpbmcgd2lsZGNhcmRzIGFyZSBzdXBwb3J0ZWQsIGFuZFxuICogZnJvbSB0aGlzIGVkaXQgZGlzdGFuY2UgbWF0Y2hpbmcgY2FuIGFsc28gYmUgcHJvdmlkZWQuXG4gKlxuICogVG9rZW4gc2V0cyBhcmUgaW1wbGVtZW50ZWQgYXMgYSBtaW5pbWFsIGZpbml0ZSBzdGF0ZSBhdXRvbWF0YSxcbiAqIHdoZXJlIGJvdGggY29tbW9uIHByZWZpeGVzIGFuZCBzdWZmaXhlcyBhcmUgc2hhcmVkIGJldHdlZW4gdG9rZW5zLlxuICogVGhpcyBoZWxwcyB0byByZWR1Y2UgdGhlIHNwYWNlIHVzZWQgZm9yIHN0b3JpbmcgdGhlIHRva2VuIHNldC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xubHVuci5Ub2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5maW5hbCA9IGZhbHNlO1xuICB0aGlzLmVkZ2VzID0ge307XG4gIHRoaXMuaWQgPSBsdW5yLlRva2VuU2V0Ll9uZXh0SWQ7XG4gIGx1bnIuVG9rZW5TZXQuX25leHRJZCArPSAxO1xufTtcblxuLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB0aGUgbmV4dCwgYXV0byBpbmNyZW1lbnQsIGlkZW50aWZpZXIgdG8gYXNzaWduXG4gKiB0byBhIG5ldyB0b2tlblNldC5cbiAqXG4gKiBUb2tlblNldHMgcmVxdWlyZSBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGJlIGNvcnJlY3RseSBtaW5pbWlzZWQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5Ub2tlblNldC5fbmV4dElkID0gMTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgVG9rZW5TZXQgaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gc29ydGVkIGFycmF5IG9mIHdvcmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nW119IGFyciAtIEEgc29ydGVkIGFycmF5IG9mIHN0cmluZ3MgdG8gY3JlYXRlIHRoZSBzZXQgZnJvbS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBpbnB1dCBhcnJheSBpcyBub3Qgc29ydGVkLlxuICovXG5sdW5yLlRva2VuU2V0LmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyKCk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGJ1aWxkZXIuaW5zZXJ0KGFycltpXSk7XG4gIH1cblxuICBidWlsZGVyLmZpbmlzaCgpO1xuICByZXR1cm4gYnVpbGRlci5yb290O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgdG9rZW4gc2V0IGZyb20gYSBxdWVyeSBjbGF1c2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGF1c2UgLSBBIHNpbmdsZSBjbGF1c2UgZnJvbSBsdW5yLlF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXVzZS50ZXJtIC0gVGhlIHF1ZXJ5IGNsYXVzZSB0ZXJtLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjbGF1c2UuZWRpdERpc3RhbmNlXSAtIFRoZSBvcHRpb25hbCBlZGl0IGRpc3RhbmNlIGZvciB0aGUgdGVybS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21DbGF1c2UgPSBmdW5jdGlvbiAoY2xhdXNlKSB7XG4gIGlmICgnZWRpdERpc3RhbmNlJyBpbiBjbGF1c2UpIHtcbiAgICByZXR1cm4gbHVuci5Ub2tlblNldC5mcm9tRnV6enlTdHJpbmcoY2xhdXNlLnRlcm0sIGNsYXVzZS5lZGl0RGlzdGFuY2UpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21TdHJpbmcoY2xhdXNlLnRlcm0pO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgcmVwcmVzZW50aW5nIGEgc2luZ2xlIHN0cmluZyB3aXRoIGEgc3BlY2lmaWVkXG4gKiBlZGl0IGRpc3RhbmNlLlxuICpcbiAqIEluc2VydGlvbnMsIGRlbGV0aW9ucywgc3Vic3RpdHV0aW9ucyBhbmQgdHJhbnNwb3NpdGlvbnMgYXJlIGVhY2hcbiAqIHRyZWF0ZWQgYXMgYW4gZWRpdCBkaXN0YW5jZSBvZiAxLlxuICpcbiAqIEluY3JlYXNpbmcgdGhlIGFsbG93ZWQgZWRpdCBkaXN0YW5jZSB3aWxsIGhhdmUgYSBkcmFtYXRpYyBpbXBhY3RcbiAqIG9uIHRoZSBwZXJmb3JtYW5jZSBvZiBib3RoIGNyZWF0aW5nIGFuZCBpbnRlcnNlY3RpbmcgdGhlc2UgVG9rZW5TZXRzLlxuICogSXQgaXMgYWR2aXNlZCB0byBrZWVwIHRoZSBlZGl0IGRpc3RhbmNlIGxlc3MgdGhhbiAzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGNyZWF0ZSB0aGUgdG9rZW4gc2V0IGZyb20uXG4gKiBAcGFyYW0ge251bWJlcn0gZWRpdERpc3RhbmNlIC0gVGhlIGFsbG93ZWQgZWRpdCBkaXN0YW5jZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtsdW5yLlZlY3Rvcn1cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tRnV6enlTdHJpbmcgPSBmdW5jdGlvbiAoc3RyLCBlZGl0RGlzdGFuY2UpIHtcbiAgdmFyIHJvb3QgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuXG4gIHZhciBzdGFjayA9IFt7XG4gICAgbm9kZTogcm9vdCxcbiAgICBlZGl0c1JlbWFpbmluZzogZWRpdERpc3RhbmNlLFxuICAgIHN0cjogc3RyXG4gIH1dO1xuXG4gIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICB2YXIgZnJhbWUgPSBzdGFjay5wb3AoKTtcblxuICAgIHZhciBjaGFyO1xuICAgIC8vIG5vIGVkaXRcbiAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA+IDApIHtcbiAgICAgIGNoYXIgPSBmcmFtZS5zdHIuY2hhckF0KDApO1xuXG4gICAgICB2YXIgbm9FZGl0Tm9kZTtcbiAgICAgIGlmIChjaGFyIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgbm9FZGl0Tm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhcl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub0VkaXROb2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IG5vRWRpdE5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgbm9FZGl0Tm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBub0VkaXROb2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWxldGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgZGVsZXRpb24gaWYgd2UgaGF2ZSBlbm91Z2ggZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gZGVsZXRlIGluIHRoZSBzdHJpbmdcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICBjaGFyID0gZnJhbWUuc3RyLmNoYXJBdCgxKTtcblxuICAgICAgdmFyIGRlbGV0aW9uTm9kZTtcbiAgICAgIGlmIChjaGFyIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbY2hhcl0gPSBkZWxldGlvbk5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IGRlbGV0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDIpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlbGV0aW9uXG4gICAgLy8ganVzdCByZW1vdmluZyB0aGUgbGFzdCBjaGFyYWN0ZXIgZnJvbSB0aGUgc3RyXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCAmJiBmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgIGZyYW1lLm5vZGUuZmluYWwgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBzdWJzdGl0dXRpb25Ob2RlO1xuICAgIC8vIHN1YnN0aXR1dGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgc3Vic3RpdHV0aW9uIGlmIHdlIGhhdmUgZW5vdWdoIGVkaXRzIHJlbWFpbmluZ1xuICAgIC8vIGFuZCBpZiB0aGVyZSBhcmUgY2hhcmFjdGVycyBsZWZ0IHRvIHN1YnN0aXR1dGVcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPj0gMSkge1xuICAgICAgaWYgKFwiKlwiIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgc3Vic3RpdHV0aW9uTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Vic3RpdHV0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gc3Vic3RpdHV0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IHN1YnN0aXR1dGlvbk5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaW5zZXJ0aW9uTm9kZTtcbiAgICAvLyBpbnNlcnRpb25cbiAgICAvLyBjYW4gb25seSBkbyBpbnNlcnRpb24gaWYgdGhlcmUgYXJlIGVkaXRzIHJlbWFpbmluZ1xuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDApIHtcbiAgICAgIGlmIChcIipcIiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIGluc2VydGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc2VydGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXSA9IGluc2VydGlvbk5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGluc2VydGlvbk5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogaW5zZXJ0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRyYW5zcG9zaXRpb25cbiAgICAvLyBjYW4gb25seSBkbyBhIHRyYW5zcG9zaXRpb24gaWYgdGhlcmUgYXJlIGVkaXRzIHJlbWFpbmluZ1xuICAgIC8vIGFuZCB0aGVyZSBhcmUgZW5vdWdoIGNoYXJhY3RlcnMgdG8gdHJhbnNwb3NlXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCAmJiBmcmFtZS5zdHIubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGNoYXJBID0gZnJhbWUuc3RyLmNoYXJBdCgwKSxcbiAgICAgICAgICBjaGFyQiA9IGZyYW1lLnN0ci5jaGFyQXQoMSksXG4gICAgICAgICAgdHJhbnNwb3NlTm9kZTtcblxuICAgICAgaWYgKGNoYXJCIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhckJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbY2hhckJdID0gdHJhbnNwb3NlTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IHRyYW5zcG9zZU5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGNoYXJBICsgZnJhbWUuc3RyLnNsaWNlKDIpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByb290O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgVG9rZW5TZXQgZnJvbSBhIHN0cmluZy5cbiAqXG4gKiBUaGUgc3RyaW5nIG1heSBjb250YWluIG9uZSBvciBtb3JlIHdpbGRjYXJkIGNoYXJhY3RlcnMgKCopXG4gKiB0aGF0IHdpbGwgYWxsb3cgd2lsZGNhcmQgbWF0Y2hpbmcgd2hlbiBpbnRlcnNlY3Rpbmcgd2l0aFxuICogYW5vdGhlciBUb2tlblNldC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBjcmVhdGUgYSBUb2tlblNldCBmcm9tLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIG5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpLFxuICAgICAgcm9vdCA9IG5vZGUsXG4gICAgICB3aWxkY2FyZEZvdW5kID0gZmFsc2U7XG5cbiAgLypcbiAgICogSXRlcmF0ZXMgdGhyb3VnaCBhbGwgY2hhcmFjdGVycyB3aXRoaW4gdGhlIHBhc3NlZCBzdHJpbmdcbiAgICogYXBwZW5kaW5nIGEgbm9kZSBmb3IgZWFjaCBjaGFyYWN0ZXIuXG4gICAqXG4gICAqIEFzIHNvb24gYXMgYSB3aWxkY2FyZCBjaGFyYWN0ZXIgaXMgZm91bmQgdGhlbiBhIHNlbGZcbiAgICogcmVmZXJlbmNpbmcgZWRnZSBpcyBpbnRyb2R1Y2VkIHRvIGNvbnRpbnVhbGx5IG1hdGNoXG4gICAqIGFueSBudW1iZXIgb2YgYW55IGNoYXJhY3RlcnMuXG4gICAqL1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gc3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGNoYXIgPSBzdHJbaV0sXG4gICAgICAgIGZpbmFsID0gKGkgPT0gbGVuIC0gMSk7XG5cbiAgICBpZiAoY2hhciA9PSBcIipcIikge1xuICAgICAgd2lsZGNhcmRGb3VuZCA9IHRydWU7XG4gICAgICBub2RlLmVkZ2VzW2NoYXJdID0gbm9kZTtcbiAgICAgIG5vZGUuZmluYWwgPSBmaW5hbDtcblxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbmV4dCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICBuZXh0LmZpbmFsID0gZmluYWw7XG5cbiAgICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBuZXh0O1xuICAgICAgbm9kZSA9IG5leHQ7XG5cbiAgICAgIC8vIFRPRE86IGlzIHRoaXMgbmVlZGVkIGFueW1vcmU/XG4gICAgICBpZiAod2lsZGNhcmRGb3VuZCkge1xuICAgICAgICBub2RlLmVkZ2VzW1wiKlwiXSA9IHJvb3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJvb3Q7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgVG9rZW5TZXQgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzXG4gKiBjb250YWluZWQgd2l0aGluIHRoZSBUb2tlblNldC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB3b3JkcyA9IFtdO1xuXG4gIHZhciBzdGFjayA9IFt7XG4gICAgcHJlZml4OiBcIlwiLFxuICAgIG5vZGU6IHRoaXNcbiAgfV07XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIHZhciBmcmFtZSA9IHN0YWNrLnBvcCgpLFxuICAgICAgICBlZGdlcyA9IE9iamVjdC5rZXlzKGZyYW1lLm5vZGUuZWRnZXMpLFxuICAgICAgICBsZW4gPSBlZGdlcy5sZW5ndGg7XG5cbiAgICBpZiAoZnJhbWUubm9kZS5maW5hbCkge1xuICAgICAgd29yZHMucHVzaChmcmFtZS5wcmVmaXgpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBlZGdlID0gZWRnZXNbaV07XG5cbiAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICBwcmVmaXg6IGZyYW1lLnByZWZpeC5jb25jYXQoZWRnZSksXG4gICAgICAgIG5vZGU6IGZyYW1lLm5vZGUuZWRnZXNbZWRnZV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3b3Jkcztcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgVG9rZW5TZXQuXG4gKlxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBhbGxvdyBUb2tlblNldHMgdG8gYmUgdXNlZCBhcyBrZXlzXG4gKiBpbiBvYmplY3RzLCBsYXJnZWx5IHRvIGFpZCB0aGUgY29uc3RydWN0aW9uIGFuZCBtaW5pbWlzYXRpb25cbiAqIG9mIGEgVG9rZW5TZXQuIEFzIHN1Y2ggaXQgaXMgbm90IGRlc2lnbmVkIHRvIGJlIGEgaHVtYW5cbiAqIGZyaWVuZGx5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUb2tlblNldC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5sdW5yLlRva2VuU2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gTk9URTogVXNpbmcgT2JqZWN0LmtleXMgaGVyZSBhcyB0aGlzLmVkZ2VzIGlzIHZlcnkgbGlrZWx5XG4gIC8vIHRvIGVudGVyICdoYXNoLW1vZGUnIHdpdGggbWFueSBrZXlzIGJlaW5nIGFkZGVkXG4gIC8vXG4gIC8vIGF2b2lkaW5nIGEgZm9yLWluIGxvb3AgaGVyZSBhcyBpdCBsZWFkcyB0byB0aGUgZnVuY3Rpb25cbiAgLy8gYmVpbmcgZGUtb3B0aW1pc2VkIChhdCBsZWFzdCBpbiBWOCkuIEZyb20gc29tZSBzaW1wbGVcbiAgLy8gYmVuY2htYXJrcyB0aGUgcGVyZm9ybWFuY2UgaXMgY29tcGFyYWJsZSwgYnV0IGFsbG93aW5nXG4gIC8vIFY4IHRvIG9wdGltaXplIG1heSBtZWFuIGVhc3kgcGVyZm9ybWFuY2Ugd2lucyBpbiB0aGUgZnV0dXJlLlxuXG4gIGlmICh0aGlzLl9zdHIpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RyO1xuICB9XG5cbiAgdmFyIHN0ciA9IHRoaXMuZmluYWwgPyAnMScgOiAnMCcsXG4gICAgICBsYWJlbHMgPSBPYmplY3Qua2V5cyh0aGlzLmVkZ2VzKS5zb3J0KCksXG4gICAgICBsZW4gPSBsYWJlbHMubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgbGFiZWwgPSBsYWJlbHNbaV0sXG4gICAgICAgIG5vZGUgPSB0aGlzLmVkZ2VzW2xhYmVsXTtcblxuICAgIHN0ciA9IHN0ciArIGxhYmVsICsgbm9kZS5pZDtcbiAgfVxuXG4gIHJldHVybiBzdHI7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgVG9rZW5TZXQgdGhhdCBpcyB0aGUgaW50ZXJzZWN0aW9uIG9mXG4gKiB0aGlzIFRva2VuU2V0IGFuZCB0aGUgcGFzc2VkIFRva2VuU2V0LlxuICpcbiAqIFRoaXMgaW50ZXJzZWN0aW9uIHdpbGwgdGFrZSBpbnRvIGFjY291bnQgYW55IHdpbGRjYXJkc1xuICogY29udGFpbmVkIHdpdGhpbiB0aGUgVG9rZW5TZXQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VuU2V0fSBiIC0gQW4gb3RoZXIgVG9rZW5TZXQgdG8gaW50ZXJzZWN0IHdpdGguXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUuaW50ZXJzZWN0ID0gZnVuY3Rpb24gKGIpIHtcbiAgdmFyIG91dHB1dCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gIHZhciBmcmFtZTtcblxuICB2YXIgc3RhY2sgPSBbe1xuICAgIHFOb2RlOiBiLFxuICAgIG91dHB1dDogb3V0cHV0LFxuICAgIG5vZGU6IHRoaXNcbiAgfV07XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGZyYW1lID0gc3RhY2sucG9wKCk7XG5cbiAgICAvLyBOT1RFOiBBcyB3aXRoIHRoZSAjdG9TdHJpbmcgbWV0aG9kLCB3ZSBhcmUgdXNpbmdcbiAgICAvLyBPYmplY3Qua2V5cyBhbmQgYSBmb3IgbG9vcCBpbnN0ZWFkIG9mIGEgZm9yLWluIGxvb3BcbiAgICAvLyBhcyBib3RoIG9mIHRoZXNlIG9iamVjdHMgZW50ZXIgJ2hhc2gnIG1vZGUsIGNhdXNpbmdcbiAgICAvLyB0aGUgZnVuY3Rpb24gdG8gYmUgZGUtb3B0aW1pc2VkIGluIFY4XG4gICAgdmFyIHFFZGdlcyA9IE9iamVjdC5rZXlzKGZyYW1lLnFOb2RlLmVkZ2VzKSxcbiAgICAgICAgcUxlbiA9IHFFZGdlcy5sZW5ndGgsXG4gICAgICAgIG5FZGdlcyA9IE9iamVjdC5rZXlzKGZyYW1lLm5vZGUuZWRnZXMpLFxuICAgICAgICBuTGVuID0gbkVkZ2VzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIHEgPSAwOyBxIDwgcUxlbjsgcSsrKSB7XG4gICAgICB2YXIgcUVkZ2UgPSBxRWRnZXNbcV07XG5cbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbkxlbjsgbisrKSB7XG4gICAgICAgIHZhciBuRWRnZSA9IG5FZGdlc1tuXTtcblxuICAgICAgICBpZiAobkVkZ2UgPT0gcUVkZ2UgfHwgcUVkZ2UgPT0gJyonKSB7XG4gICAgICAgICAgdmFyIG5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW25FZGdlXSxcbiAgICAgICAgICAgICAgcU5vZGUgPSBmcmFtZS5xTm9kZS5lZGdlc1txRWRnZV0sXG4gICAgICAgICAgICAgIGZpbmFsID0gbm9kZS5maW5hbCAmJiBxTm9kZS5maW5hbCxcbiAgICAgICAgICAgICAgbmV4dDtcblxuICAgICAgICAgIGlmIChuRWRnZSBpbiBmcmFtZS5vdXRwdXQuZWRnZXMpIHtcbiAgICAgICAgICAgIC8vIGFuIGVkZ2UgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgY2hhcmFjdGVyXG4gICAgICAgICAgICAvLyBubyBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBub2RlLCBqdXN0IHNldCB0aGUgZmluYWxpdHlcbiAgICAgICAgICAgIC8vIGJpdCB1bmxlc3MgdGhpcyBub2RlIGlzIGFscmVhZHkgZmluYWxcbiAgICAgICAgICAgIG5leHQgPSBmcmFtZS5vdXRwdXQuZWRnZXNbbkVkZ2VdO1xuICAgICAgICAgICAgbmV4dC5maW5hbCA9IG5leHQuZmluYWwgfHwgZmluYWw7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gZWRnZSBleGlzdHMgeWV0LCBtdXN0IGNyZWF0ZSBvbmVcbiAgICAgICAgICAgIC8vIHNldCB0aGUgZmluYWxpdHkgYml0IGFuZCBpbnNlcnQgaXRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIG91dHB1dFxuICAgICAgICAgICAgbmV4dCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgICAgICBuZXh0LmZpbmFsID0gZmluYWw7XG4gICAgICAgICAgICBmcmFtZS5vdXRwdXQuZWRnZXNbbkVkZ2VdID0gbmV4dDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHFOb2RlOiBxTm9kZSxcbiAgICAgICAgICAgIG91dHB1dDogbmV4dCxcbiAgICAgICAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59O1xubHVuci5Ub2tlblNldC5CdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnByZXZpb3VzV29yZCA9IFwiXCI7XG4gIHRoaXMucm9vdCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gIHRoaXMudW5jaGVja2VkTm9kZXMgPSBbXTtcbiAgdGhpcy5taW5pbWl6ZWROb2RlcyA9IHt9O1xufTtcblxubHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAod29yZCkge1xuICB2YXIgbm9kZSxcbiAgICAgIGNvbW1vblByZWZpeCA9IDA7XG5cbiAgaWYgKHdvcmQgPCB0aGlzLnByZXZpb3VzV29yZCkge1xuICAgIHRocm93IG5ldyBFcnJvciAoXCJPdXQgb2Ygb3JkZXIgd29yZCBpbnNlcnRpb25cIik7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmQubGVuZ3RoICYmIGkgPCB0aGlzLnByZXZpb3VzV29yZC5sZW5ndGg7IGkrKykge1xuICAgIGlmICh3b3JkW2ldICE9IHRoaXMucHJldmlvdXNXb3JkW2ldKSBicmVhaztcbiAgICBjb21tb25QcmVmaXgrKztcbiAgfVxuXG4gIHRoaXMubWluaW1pemUoY29tbW9uUHJlZml4KTtcblxuICBpZiAodGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICBub2RlID0gdGhpcy5yb290O1xuICB9IGVsc2Uge1xuICAgIG5vZGUgPSB0aGlzLnVuY2hlY2tlZE5vZGVzW3RoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoIC0gMV0uY2hpbGQ7XG4gIH1cblxuICBmb3IgKHZhciBqID0gY29tbW9uUHJlZml4OyBqIDwgd29yZC5sZW5ndGg7IGorKykge1xuICAgIHZhciBuZXh0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCksXG4gICAgICAgIGNoYXIgPSB3b3JkW2pdO1xuXG4gICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHROb2RlO1xuXG4gICAgdGhpcy51bmNoZWNrZWROb2Rlcy5wdXNoKHtcbiAgICAgIHBhcmVudDogbm9kZSxcbiAgICAgIGNoYXI6IGNoYXIsXG4gICAgICBjaGlsZDogbmV4dE5vZGVcbiAgICB9KTtcblxuICAgIG5vZGUgPSBuZXh0Tm9kZTtcbiAgfVxuXG4gIG5vZGUuZmluYWwgPSB0cnVlO1xuICB0aGlzLnByZXZpb3VzV29yZCA9IHdvcmQ7XG59O1xuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5taW5pbWl6ZSgwKTtcbn07XG5cbmx1bnIuVG9rZW5TZXQuQnVpbGRlci5wcm90b3R5cGUubWluaW1pemUgPSBmdW5jdGlvbiAoZG93blRvKSB7XG4gIGZvciAodmFyIGkgPSB0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gZG93blRvOyBpLS0pIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMudW5jaGVja2VkTm9kZXNbaV0sXG4gICAgICAgIGNoaWxkS2V5ID0gbm9kZS5jaGlsZC50b1N0cmluZygpO1xuXG4gICAgaWYgKGNoaWxkS2V5IGluIHRoaXMubWluaW1pemVkTm9kZXMpIHtcbiAgICAgIG5vZGUucGFyZW50LmVkZ2VzW25vZGUuY2hhcl0gPSB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FjaGUgdGhlIGtleSBmb3IgdGhpcyBub2RlIHNpbmNlXG4gICAgICAvLyB3ZSBrbm93IGl0IGNhbid0IGNoYW5nZSBhbnltb3JlXG4gICAgICBub2RlLmNoaWxkLl9zdHIgPSBjaGlsZEtleTtcblxuICAgICAgdGhpcy5taW5pbWl6ZWROb2Rlc1tjaGlsZEtleV0gPSBub2RlLmNoaWxkO1xuICAgIH1cblxuICAgIHRoaXMudW5jaGVja2VkTm9kZXMucG9wKCk7XG4gIH1cbn07XG4vKiFcbiAqIGx1bnIuSW5kZXhcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEFuIGluZGV4IGNvbnRhaW5zIHRoZSBidWlsdCBpbmRleCBvZiBhbGwgZG9jdW1lbnRzIGFuZCBwcm92aWRlcyBhIHF1ZXJ5IGludGVyZmFjZVxuICogdG8gdGhlIGluZGV4LlxuICpcbiAqIFVzdWFsbHkgaW5zdGFuY2VzIG9mIGx1bnIuSW5kZXggd2lsbCBub3QgYmUgY3JlYXRlZCB1c2luZyB0aGlzIGNvbnN0cnVjdG9yLCBpbnN0ZWFkXG4gKiBsdW5yLkJ1aWxkZXIgc2hvdWxkIGJlIHVzZWQgdG8gY29uc3RydWN0IG5ldyBpbmRleGVzLCBvciBsdW5yLkluZGV4LmxvYWQgc2hvdWxkIGJlXG4gKiB1c2VkIHRvIGxvYWQgcHJldmlvdXNseSBidWlsdCBhbmQgc2VyaWFsaXplZCBpbmRleGVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IGF0dHJzIC0gVGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGJ1aWx0IHNlYXJjaCBpbmRleC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycy5pbnZlcnRlZEluZGV4IC0gQW4gaW5kZXggb2YgdGVybS9maWVsZCB0byBkb2N1bWVudCByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGx1bnIuVmVjdG9yPn0gYXR0cnMuZG9jdW1lbnRWZWN0b3JzIC0gRG9jdW1lbnQgdmVjdG9ycyBrZXllZCBieSBkb2N1bWVudCByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5TZXR9IGF0dHJzLnRva2VuU2V0IC0gQW4gc2V0IG9mIGFsbCBjb3JwdXMgdG9rZW5zLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gYXR0cnMuZmllbGRzIC0gVGhlIG5hbWVzIG9mIGluZGV4ZWQgZG9jdW1lbnQgZmllbGRzLlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lfSBhdHRycy5waXBlbGluZSAtIFRoZSBwaXBlbGluZSB0byB1c2UgZm9yIHNlYXJjaCB0ZXJtcy5cbiAqL1xubHVuci5JbmRleCA9IGZ1bmN0aW9uIChhdHRycykge1xuICB0aGlzLmludmVydGVkSW5kZXggPSBhdHRycy5pbnZlcnRlZEluZGV4O1xuICB0aGlzLmZpZWxkVmVjdG9ycyA9IGF0dHJzLmZpZWxkVmVjdG9ycztcbiAgdGhpcy50b2tlblNldCA9IGF0dHJzLnRva2VuU2V0O1xuICB0aGlzLmZpZWxkcyA9IGF0dHJzLmZpZWxkcztcbiAgdGhpcy5waXBlbGluZSA9IGF0dHJzLnBpcGVsaW5lO1xufTtcblxuLyoqXG4gKiBBIHJlc3VsdCBjb250YWlucyBkZXRhaWxzIG9mIGEgZG9jdW1lbnQgbWF0Y2hpbmcgYSBzZWFyY2ggcXVlcnkuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBsdW5yLkluZGV4flJlc3VsdFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJlZiAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRoaXMgcmVzdWx0IHJlcHJlc2VudHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2NvcmUgLSBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIGhvdyBzaW1pbGFyIHRoaXMgZG9jdW1lbnQgaXMgdG8gdGhlIHF1ZXJ5LlxuICogQHByb3BlcnR5IHtsdW5yLk1hdGNoRGF0YX0gbWF0Y2hEYXRhIC0gQ29udGFpbnMgbWV0YWRhdGEgYWJvdXQgdGhpcyBtYXRjaCBpbmNsdWRpbmcgd2hpY2ggdGVybShzKSBjYXVzZWQgdGhlIG1hdGNoLlxuICovXG5cbi8qKlxuICogQWx0aG91Z2ggbHVuciBwcm92aWRlcyB0aGUgYWJpbGl0eSB0byBjcmVhdGUgcXVlcmllcyB1c2luZyBsdW5yLlF1ZXJ5LCBpdCBhbHNvIHByb3ZpZGVzIGEgc2ltcGxlXG4gKiBxdWVyeSBsYW5ndWFnZSB3aGljaCBpdHNlbGYgaXMgcGFyc2VkIGludG8gYW4gaW5zdGFuY2Ugb2YgbHVuci5RdWVyeS5cbiAqXG4gKiBGb3IgcHJvZ3JhbW1hdGljYWxseSBidWlsZGluZyBxdWVyaWVzIGl0IGlzIGFkdmlzZWQgdG8gZGlyZWN0bHkgdXNlIGx1bnIuUXVlcnksIHRoZSBxdWVyeSBsYW5ndWFnZVxuICogaXMgYmVzdCB1c2VkIGZvciBodW1hbiBlbnRlcmVkIHRleHQgcmF0aGVyIHRoYW4gcHJvZ3JhbSBnZW5lcmF0ZWQgdGV4dC5cbiAqXG4gKiBBdCBpdHMgc2ltcGxlc3QgcXVlcmllcyBjYW4ganVzdCBiZSBhIHNpbmdsZSB0ZXJtLCBlLmcuIGBoZWxsb2AsIG11bHRpcGxlIHRlcm1zIGFyZSBhbHNvIHN1cHBvcnRlZFxuICogYW5kIHdpbGwgYmUgY29tYmluZWQgd2l0aCBPUiwgZS5nIGBoZWxsbyB3b3JsZGAgd2lsbCBtYXRjaCBkb2N1bWVudHMgdGhhdCBjb250YWluIGVpdGhlciAnaGVsbG8nXG4gKiBvciAnd29ybGQnLCB0aG91Z2ggdGhvc2UgdGhhdCBjb250YWluIGJvdGggd2lsbCByYW5rIGhpZ2hlciBpbiB0aGUgcmVzdWx0cy5cbiAqXG4gKiBXaWxkY2FyZHMgY2FuIGJlIGluY2x1ZGVkIGluIHRlcm1zIHRvIG1hdGNoIG9uZSBvciBtb3JlIHVuc3BlY2lmaWVkIGNoYXJhY3RlcnMsIHRoZXNlIHdpbGRjYXJkcyBjYW5cbiAqIGJlIGluc2VydGVkIGFueXdoZXJlIHdpdGhpbiB0aGUgdGVybSwgYW5kIG1vcmUgdGhhbiBvbmUgd2lsZGNhcmQgY2FuIGV4aXN0IGluIGEgc2luZ2xlIHRlcm0uIEFkZGluZ1xuICogd2lsZGNhcmRzIHdpbGwgaW5jcmVhc2UgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB3aWxsIGJlIGZvdW5kIGJ1dCBjYW4gYWxzbyBoYXZlIGEgbmVnYXRpdmVcbiAqIGltcGFjdCBvbiBxdWVyeSBwZXJmb3JtYW5jZSwgZXNwZWNpYWxseSB3aXRoIHdpbGRjYXJkcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgdGVybS5cbiAqXG4gKiBUZXJtcyBjYW4gYmUgcmVzdHJpY3RlZCB0byBzcGVjaWZpYyBmaWVsZHMsIGUuZy4gYHRpdGxlOmhlbGxvYCwgb25seSBkb2N1bWVudHMgd2l0aCB0aGUgdGVybVxuICogaGVsbG8gaW4gdGhlIHRpdGxlIGZpZWxkIHdpbGwgbWF0Y2ggdGhpcyBxdWVyeS4gVXNpbmcgYSBmaWVsZCBub3QgcHJlc2VudCBpbiB0aGUgaW5kZXggd2lsbCBsZWFkXG4gKiB0byBhbiBlcnJvciBiZWluZyB0aHJvd24uXG4gKlxuICogTW9kaWZpZXJzIGNhbiBhbHNvIGJlIGFkZGVkIHRvIHRlcm1zLCBsdW5yIHN1cHBvcnRzIGVkaXQgZGlzdGFuY2UgYW5kIGJvb3N0IG1vZGlmaWVycyBvbiB0ZXJtcy4gQSB0ZXJtXG4gKiBib29zdCB3aWxsIG1ha2UgZG9jdW1lbnRzIG1hdGNoaW5nIHRoYXQgdGVybSBzY29yZSBoaWdoZXIsIGUuZy4gYGZvb141YC4gRWRpdCBkaXN0YW5jZSBpcyBhbHNvIHN1cHBvcnRlZFxuICogdG8gcHJvdmlkZSBmdXp6eSBtYXRjaGluZywgZS5nLiAnaGVsbG9+Micgd2lsbCBtYXRjaCBkb2N1bWVudHMgd2l0aCBoZWxsbyB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMi5cbiAqIEF2b2lkIGxhcmdlIHZhbHVlcyBmb3IgZWRpdCBkaXN0YW5jZSB0byBpbXByb3ZlIHF1ZXJ5IHBlcmZvcm1hbmNlLlxuICpcbiAqIFRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgdGhlIGJhY2tzbGFzaCBjaGFyYWN0ZXIgJ1xcJyBjYW4gYmUgdXNlZCwgdGhpcyBhbGxvd3Mgc2VhcmNoZXMgdG8gaW5jbHVkZVxuICogY2hhcmFjdGVycyB0aGF0IHdvdWxkIG5vcm1hbGx5IGJlIGNvbnNpZGVyZWQgbW9kaWZpZXJzLCBlLmcuIGBmb29cXH4yYCB3aWxsIHNlYXJjaCBmb3IgYSB0ZXJtIFwiZm9vfjJcIiBpbnN0ZWFkXG4gKiBvZiBhdHRlbXB0aW5nIHRvIGFwcGx5IGEgYm9vc3Qgb2YgMiB0byB0aGUgc2VhcmNoIHRlcm0gXCJmb29cIi5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfSBsdW5yLkluZGV4flF1ZXJ5U3RyaW5nXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5TaW1wbGUgc2luZ2xlIHRlcm0gcXVlcnk8L2NhcHRpb24+XG4gKiBoZWxsb1xuICogQGV4YW1wbGUgPGNhcHRpb24+TXVsdGlwbGUgdGVybSBxdWVyeTwvY2FwdGlvbj5cbiAqIGhlbGxvIHdvcmxkXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHNjb3BlZCB0byBhIGZpZWxkPC9jYXB0aW9uPlxuICogdGl0bGU6aGVsbG9cbiAqIEBleGFtcGxlIDxjYXB0aW9uPnRlcm0gd2l0aCBhIGJvb3N0IG9mIDEwPC9jYXB0aW9uPlxuICogaGVsbG9eMTBcbiAqIEBleGFtcGxlIDxjYXB0aW9uPnRlcm0gd2l0aCBhbiBlZGl0IGRpc3RhbmNlIG9mIDI8L2NhcHRpb24+XG4gKiBoZWxsb34yXG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtcyBhIHNlYXJjaCBhZ2FpbnN0IHRoZSBpbmRleCB1c2luZyBsdW5yIHF1ZXJ5IHN5bnRheC5cbiAqXG4gKiBSZXN1bHRzIHdpbGwgYmUgcmV0dXJuZWQgc29ydGVkIGJ5IHRoZWlyIHNjb3JlLCB0aGUgbW9zdCByZWxldmFudCByZXN1bHRzXG4gKiB3aWxsIGJlIHJldHVybmVkIGZpcnN0LlxuICpcbiAqIEZvciBtb3JlIHByb2dyYW1tYXRpYyBxdWVyeWluZyB1c2UgbHVuci5JbmRleCNxdWVyeS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuSW5kZXh+UXVlcnlTdHJpbmd9IHF1ZXJ5U3RyaW5nIC0gQSBzdHJpbmcgY29udGFpbmluZyBhIGx1bnIgcXVlcnkuXG4gKiBAdGhyb3dzIHtsdW5yLlF1ZXJ5UGFyc2VFcnJvcn0gSWYgdGhlIHBhc3NlZCBxdWVyeSBzdHJpbmcgY2Fubm90IGJlIHBhcnNlZC5cbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4flJlc3VsdFtdfVxuICovXG5sdW5yLkluZGV4LnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAocXVlcnlTdHJpbmcpIHtcbiAgcmV0dXJuIHRoaXMucXVlcnkoZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgdmFyIHBhcnNlciA9IG5ldyBsdW5yLlF1ZXJ5UGFyc2VyKHF1ZXJ5U3RyaW5nLCBxdWVyeSk7XG4gICAgcGFyc2VyLnBhcnNlKCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBBIHF1ZXJ5IGJ1aWxkZXIgY2FsbGJhY2sgcHJvdmlkZXMgYSBxdWVyeSBvYmplY3QgdG8gYmUgdXNlZCB0byBleHByZXNzXG4gKiB0aGUgcXVlcnkgdG8gcGVyZm9ybSBvbiB0aGUgaW5kZXguXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuSW5kZXh+cXVlcnlCdWlsZGVyXG4gKiBAcGFyYW0ge2x1bnIuUXVlcnl9IHF1ZXJ5IC0gVGhlIHF1ZXJ5IG9iamVjdCB0byBidWlsZCB1cC5cbiAqIEB0aGlzIGx1bnIuUXVlcnlcbiAqL1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgdGhlIHlpZWxkZWQgbHVuci5RdWVyeSBvYmplY3QuXG4gKlxuICogSWYgcGVyZm9ybWluZyBwcm9ncmFtbWF0aWMgcXVlcmllcyBhZ2FpbnN0IHRoZSBpbmRleCwgdGhpcyBtZXRob2QgaXMgcHJlZmVycmVkXG4gKiBvdmVyIGx1bnIuSW5kZXgjc2VhcmNoIHNvIGFzIHRvIGF2b2lkIHRoZSBhZGRpdGlvbmFsIHF1ZXJ5IHBhcnNpbmcgb3ZlcmhlYWQuXG4gKlxuICogQSBxdWVyeSBvYmplY3QgaXMgeWllbGRlZCB0byB0aGUgc3VwcGxpZWQgZnVuY3Rpb24gd2hpY2ggc2hvdWxkIGJlIHVzZWQgdG9cbiAqIGV4cHJlc3MgdGhlIHF1ZXJ5IHRvIGJlIHJ1biBhZ2FpbnN0IHRoZSBpbmRleC5cbiAqXG4gKiBOb3RlIHRoYXQgYWx0aG91Z2ggdGhpcyBmdW5jdGlvbiB0YWtlcyBhIGNhbGxiYWNrIHBhcmFtZXRlciBpdCBpcyBfbm90XyBhblxuICogYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgdGhlIGNhbGxiYWNrIGlzIGp1c3QgeWllbGRlZCBhIHF1ZXJ5IG9iamVjdCB0byBiZVxuICogY3VzdG9taXplZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuSW5kZXh+cXVlcnlCdWlsZGVyfSBmbiAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIGJ1aWxkIHRoZSBxdWVyeS5cbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4flJlc3VsdFtdfVxuICovXG5sdW5yLkluZGV4LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChmbikge1xuICAvLyBmb3IgZWFjaCBxdWVyeSBjbGF1c2VcbiAgLy8gKiBwcm9jZXNzIHRlcm1zXG4gIC8vICogZXhwYW5kIHRlcm1zIGZyb20gdG9rZW4gc2V0XG4gIC8vICogZmluZCBtYXRjaGluZyBkb2N1bWVudHMgYW5kIG1ldGFkYXRhXG4gIC8vICogZ2V0IGRvY3VtZW50IHZlY3RvcnNcbiAgLy8gKiBzY29yZSBkb2N1bWVudHNcblxuICB2YXIgcXVlcnkgPSBuZXcgbHVuci5RdWVyeSh0aGlzLmZpZWxkcyksXG4gICAgICBtYXRjaGluZ0ZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBxdWVyeVZlY3RvcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgdGVybUZpZWxkQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZuLmNhbGwocXVlcnksIHF1ZXJ5KTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXJ5LmNsYXVzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAvKlxuICAgICAqIFVubGVzcyB0aGUgcGlwZWxpbmUgaGFzIGJlZW4gZGlzYWJsZWQgZm9yIHRoaXMgdGVybSwgd2hpY2ggaXNcbiAgICAgKiB0aGUgY2FzZSBmb3IgdGVybXMgd2l0aCB3aWxkY2FyZHMsIHdlIG5lZWQgdG8gcGFzcyB0aGUgY2xhdXNlXG4gICAgICogdGVybSB0aHJvdWdoIHRoZSBzZWFyY2ggcGlwZWxpbmUuIEEgcGlwZWxpbmUgcmV0dXJucyBhbiBhcnJheVxuICAgICAqIG9mIHByb2Nlc3NlZCB0ZXJtcy4gUGlwZWxpbmUgZnVuY3Rpb25zIG1heSBleHBhbmQgdGhlIHBhc3NlZFxuICAgICAqIHRlcm0sIHdoaWNoIG1lYW5zIHdlIG1heSBlbmQgdXAgcGVyZm9ybWluZyBtdWx0aXBsZSBpbmRleCBsb29rdXBzXG4gICAgICogZm9yIGEgc2luZ2xlIHF1ZXJ5IHRlcm0uXG4gICAgICovXG4gICAgdmFyIGNsYXVzZSA9IHF1ZXJ5LmNsYXVzZXNbaV0sXG4gICAgICAgIHRlcm1zID0gbnVsbDtcblxuICAgIGlmIChjbGF1c2UudXNlUGlwZWxpbmUpIHtcbiAgICAgIHRlcm1zID0gdGhpcy5waXBlbGluZS5ydW5TdHJpbmcoY2xhdXNlLnRlcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXJtcyA9IFtjbGF1c2UudGVybV07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCB0ZXJtcy5sZW5ndGg7IG0rKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1ttXTtcblxuICAgICAgLypcbiAgICAgICAqIEVhY2ggdGVybSByZXR1cm5lZCBmcm9tIHRoZSBwaXBlbGluZSBuZWVkcyB0byB1c2UgdGhlIHNhbWUgcXVlcnlcbiAgICAgICAqIGNsYXVzZSBvYmplY3QsIGUuZy4gdGhlIHNhbWUgYm9vc3QgYW5kIG9yIGVkaXQgZGlzdGFuY2UuIFRoZVxuICAgICAgICogc2ltcGxlc3Qgd2F5IHRvIGRvIHRoaXMgaXMgdG8gcmUtdXNlIHRoZSBjbGF1c2Ugb2JqZWN0IGJ1dCBtdXRhdGVcbiAgICAgICAqIGl0cyB0ZXJtIHByb3BlcnR5LlxuICAgICAgICovXG5cbiAgICAgIGNsYXVzZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2xhdXNlKSk7XG4gICAgICBjbGF1c2UudGVybSA9IHRlcm07XG5cbiAgICAgIC8qXG4gICAgICAgKiBGcm9tIHRoZSB0ZXJtIGluIHRoZSBjbGF1c2Ugd2UgY3JlYXRlIGEgdG9rZW4gc2V0IHdoaWNoIHdpbGwgdGhlblxuICAgICAgICogYmUgdXNlZCB0byBpbnRlcnNlY3QgdGhlIGluZGV4ZXMgdG9rZW4gc2V0IHRvIGdldCBhIGxpc3Qgb2YgdGVybXNcbiAgICAgICAqIHRvIGxvb2t1cCBpbiB0aGUgaW52ZXJ0ZWQgaW5kZXhcbiAgICAgICAqL1xuICAgICAgdmFyIHRlcm1Ub2tlblNldCA9IGx1bnIuVG9rZW5TZXQuZnJvbUNsYXVzZShjbGF1c2UpLFxuICAgICAgICAgIGV4cGFuZGVkVGVybXMgPSB0aGlzLnRva2VuU2V0LmludGVyc2VjdCh0ZXJtVG9rZW5TZXQpLnRvQXJyYXkoKTtcblxuICAgICAgdmFyIHRlcm1JbmRleDtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZXhwYW5kZWRUZXJtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAvKlxuICAgICAgICAgKiBGb3IgZWFjaCB0ZXJtIGdldCB0aGUgcG9zdGluZyBhbmQgdGVybUluZGV4LCB0aGlzIGlzIHJlcXVpcmVkIGZvclxuICAgICAgICAgKiBidWlsZGluZyB0aGUgcXVlcnkgdmVjdG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgICB2YXIgZXhwYW5kZWRUZXJtID0gZXhwYW5kZWRUZXJtc1tqXTtcbiAgICAgICAgICB2YXIgcG9zdGluZyA9IHRoaXMuaW52ZXJ0ZWRJbmRleFtleHBhbmRlZFRlcm1dO1xuICAgICAgICAgIGlmIChwb3N0aW5nKSB7XG4gICAgICAgICAgICAgIHRlcm1JbmRleCA9IHBvc3RpbmcuX2luZGV4O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjbGF1c2UuZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBGb3IgZWFjaCBmaWVsZCB0aGF0IHRoaXMgcXVlcnkgdGVybSBpcyBzY29wZWQgYnkgKGJ5IGRlZmF1bHRcbiAgICAgICAgICAgKiBhbGwgZmllbGRzIGFyZSBpbiBzY29wZSkgd2UgbmVlZCB0byBnZXQgYWxsIHRoZSBkb2N1bWVudCByZWZzXG4gICAgICAgICAgICogdGhhdCBoYXZlIHRoaXMgdGVybSBpbiB0aGF0IGZpZWxkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogVGhlIHBvc3RpbmcgaXMgdGhlIGVudHJ5IGluIHRoZSBpbnZlcnRlZEluZGV4IGZvciB0aGUgbWF0Y2hpbmdcbiAgICAgICAgICAgKiB0ZXJtIGZyb20gYWJvdmUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgdmFyIGZpZWxkID0gY2xhdXNlLmZpZWxkc1trXSxcbiAgICAgICAgICAgICAgZmllbGRQb3N0aW5nID0gcG9zdGluZ1tmaWVsZF0sXG4gICAgICAgICAgICAgIG1hdGNoaW5nRG9jdW1lbnRSZWZzID0gT2JqZWN0LmtleXMoZmllbGRQb3N0aW5nKSxcbiAgICAgICAgICAgICAgdGVybUZpZWxkID0gZXhwYW5kZWRUZXJtICsgXCIvXCIgKyBmaWVsZDtcblxuICAgICAgICAgIC8qXG4gICAgICAgICAgICogVG8gc3VwcG9ydCBmaWVsZCBsZXZlbCBib29zdHMgYSBxdWVyeSB2ZWN0b3IgaXMgY3JlYXRlZCBwZXJcbiAgICAgICAgICAgKiBmaWVsZC4gVGhpcyB2ZWN0b3IgaXMgcG9wdWxhdGVkIHVzaW5nIHRoZSB0ZXJtSW5kZXggZm91bmQgZm9yXG4gICAgICAgICAgICogdGhlIHRlcm0gYW5kIGEgdW5pdCB2YWx1ZSB3aXRoIHRoZSBhcHByb3ByaWF0ZSBib29zdCBhcHBsaWVkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogSWYgdGhlIHF1ZXJ5IHZlY3RvciBmb3IgdGhpcyBmaWVsZCBkb2VzIG5vdCBleGlzdCB5ZXQgaXQgbmVlZHNcbiAgICAgICAgICAgKiB0byBiZSBjcmVhdGVkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChxdWVyeVZlY3RvcnNbZmllbGRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5VmVjdG9yc1tmaWVsZF0gPSBuZXcgbHVuci5WZWN0b3IoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIFVzaW5nIHVwc2VydCBiZWNhdXNlIHRoZXJlIGNvdWxkIGFscmVhZHkgYmUgYW4gZW50cnkgaW4gdGhlIHZlY3RvclxuICAgICAgICAgICAqIGZvciB0aGUgdGVybSB3ZSBhcmUgd29ya2luZyB3aXRoLiBJbiB0aGF0IGNhc2Ugd2UganVzdCBhZGQgdGhlIHNjb3Jlc1xuICAgICAgICAgICAqIHRvZ2V0aGVyLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHF1ZXJ5VmVjdG9yc1tmaWVsZF0udXBzZXJ0KHRlcm1JbmRleCwgMSAqIGNsYXVzZS5ib29zdCwgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgKyBiOyB9KTtcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIElmIHdlJ3ZlIGFscmVhZHkgc2VlbiB0aGlzIHRlcm0sIGZpZWxkIGNvbWJvIHRoZW4gd2UndmUgYWxyZWFkeSBjb2xsZWN0ZWRcbiAgICAgICAgICAgKiB0aGUgbWF0Y2hpbmcgZG9jdW1lbnRzIGFuZCBtZXRhZGF0YSwgbm8gbmVlZCB0byBnbyB0aHJvdWdoIGFsbCB0aGF0IGFnYWluXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHRlcm1GaWVsZENhY2hlW3Rlcm1GaWVsZF0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbWF0Y2hpbmdEb2N1bWVudFJlZnMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBBbGwgbWV0YWRhdGEgZm9yIHRoaXMgdGVybS9maWVsZC9kb2N1bWVudCB0cmlwbGVcbiAgICAgICAgICAgICAqIGFyZSB0aGVuIGV4dHJhY3RlZCBhbmQgY29sbGVjdGVkIGludG8gYW4gaW5zdGFuY2VcbiAgICAgICAgICAgICAqIG9mIGx1bnIuTWF0Y2hEYXRhIHJlYWR5IHRvIGJlIHJldHVybmVkIGluIHRoZSBxdWVyeVxuICAgICAgICAgICAgICogcmVzdWx0c1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdEb2N1bWVudFJlZiA9IG1hdGNoaW5nRG9jdW1lbnRSZWZzW2xdLFxuICAgICAgICAgICAgICAgIG1hdGNoaW5nRmllbGRSZWYgPSBuZXcgbHVuci5GaWVsZFJlZiAobWF0Y2hpbmdEb2N1bWVudFJlZiwgZmllbGQpLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gZmllbGRQb3N0aW5nW21hdGNoaW5nRG9jdW1lbnRSZWZdLFxuICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2g7XG5cbiAgICAgICAgICAgIGlmICgoZmllbGRNYXRjaCA9IG1hdGNoaW5nRmllbGRzW21hdGNoaW5nRmllbGRSZWZdKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1hdGNoaW5nRmllbGRzW21hdGNoaW5nRmllbGRSZWZdID0gbmV3IGx1bnIuTWF0Y2hEYXRhIChleHBhbmRlZFRlcm0sIGZpZWxkLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmaWVsZE1hdGNoLmFkZChleHBhbmRlZFRlcm0sIGZpZWxkLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBtYXRjaGluZ0ZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKG1hdGNoaW5nRmllbGRzKSxcbiAgICAgIHJlc3VsdHMgPSBbXSxcbiAgICAgIG1hdGNoZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAoIGkgPSAwOyBpIDwgbWF0Y2hpbmdGaWVsZFJlZnMubGVuZ3RoOyBpKyspIHtcbiAgICAvKlxuICAgICAqIEN1cnJlbnRseSB3ZSBoYXZlIGRvY3VtZW50IGZpZWxkcyB0aGF0IG1hdGNoIHRoZSBxdWVyeSwgYnV0IHdlXG4gICAgICogbmVlZCB0byByZXR1cm4gZG9jdW1lbnRzLiBUaGUgbWF0Y2hEYXRhIGFuZCBzY29yZXMgYXJlIGNvbWJpbmVkXG4gICAgICogZnJvbSBtdWx0aXBsZSBmaWVsZHMgYmVsb25naW5nIHRvIHRoZSBzYW1lIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogU2NvcmVzIGFyZSBjYWxjdWxhdGVkIGJ5IGZpZWxkLCB1c2luZyB0aGUgcXVlcnkgdmVjdG9ycyBjcmVhdGVkXG4gICAgICogYWJvdmUsIGFuZCBjb21iaW5lZCBpbnRvIGEgZmluYWwgZG9jdW1lbnQgc2NvcmUgdXNpbmcgYWRkaXRpb24uXG4gICAgICovXG4gICAgdmFyIGZpZWxkUmVmID0gbHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nKG1hdGNoaW5nRmllbGRSZWZzW2ldKSxcbiAgICAgICAgZG9jUmVmID0gZmllbGRSZWYuZG9jUmVmLFxuICAgICAgICBmaWVsZFZlY3RvciA9IHRoaXMuZmllbGRWZWN0b3JzW2ZpZWxkUmVmXSxcbiAgICAgICAgc2NvcmUgPSBxdWVyeVZlY3RvcnNbZmllbGRSZWYuZmllbGROYW1lXS5zaW1pbGFyaXR5KGZpZWxkVmVjdG9yKSxcbiAgICAgICAgZG9jTWF0Y2g7XG5cbiAgICBpZiAoKGRvY01hdGNoID0gbWF0Y2hlc1tkb2NSZWZdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkb2NNYXRjaC5zY29yZSArPSBzY29yZTtcbiAgICAgIGRvY01hdGNoLm1hdGNoRGF0YS5jb21iaW5lKG1hdGNoaW5nRmllbGRzW2ZpZWxkUmVmXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtYXRjaCA9IHtcbiAgICAgICAgcmVmOiBkb2NSZWYsXG4gICAgICAgIHNjb3JlOiBzY29yZSxcbiAgICAgICAgbWF0Y2hEYXRhOiBtYXRjaGluZ0ZpZWxkc1tmaWVsZFJlZl1cbiAgICAgIH07XG4gICAgICBtYXRjaGVzW2RvY1JlZl0gPSBtYXRjaDtcbiAgICAgIHJlc3VsdHMucHVzaChtYXRjaCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogU29ydCB0aGUgcmVzdWx0cyBvYmplY3RzIGJ5IHNjb3JlLCBoaWdoZXN0IGZpcnN0LlxuICAgKi9cbiAgcmV0dXJuIHJlc3VsdHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFByZXBhcmVzIHRoZSBpbmRleCBmb3IgSlNPTiBzZXJpYWxpemF0aW9uLlxuICpcbiAqIFRoZSBzY2hlbWEgZm9yIHRoaXMgSlNPTiBibG9iIHdpbGwgYmUgZGVzY3JpYmVkIGluIGFcbiAqIHNlcGFyYXRlIEpTT04gc2NoZW1hIGZpbGUuXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xubHVuci5JbmRleC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaW52ZXJ0ZWRJbmRleCA9IE9iamVjdC5rZXlzKHRoaXMuaW52ZXJ0ZWRJbmRleClcbiAgICAuc29ydCgpXG4gICAgLm1hcChmdW5jdGlvbiAodGVybSkge1xuICAgICAgcmV0dXJuIFt0ZXJtLCB0aGlzLmludmVydGVkSW5kZXhbdGVybV1dO1xuICAgIH0sIHRoaXMpO1xuXG4gIHZhciBmaWVsZFZlY3RvcnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVmVjdG9ycylcbiAgICAubWFwKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgIHJldHVybiBbcmVmLCB0aGlzLmZpZWxkVmVjdG9yc1tyZWZdLnRvSlNPTigpXTtcbiAgICB9LCB0aGlzKTtcblxuICByZXR1cm4ge1xuICAgIHZlcnNpb246IGx1bnIudmVyc2lvbixcbiAgICBmaWVsZHM6IHRoaXMuZmllbGRzLFxuICAgIGZpZWxkVmVjdG9yczogZmllbGRWZWN0b3JzLFxuICAgIGludmVydGVkSW5kZXg6IGludmVydGVkSW5kZXgsXG4gICAgcGlwZWxpbmU6IHRoaXMucGlwZWxpbmUudG9KU09OKClcbiAgfTtcbn07XG5cbi8qKlxuICogTG9hZHMgYSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXJpYWxpemVkSW5kZXggLSBBIHByZXZpb3VzbHkgc2VyaWFsaXplZCBsdW5yLkluZGV4XG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH1cbiAqL1xubHVuci5JbmRleC5sb2FkID0gZnVuY3Rpb24gKHNlcmlhbGl6ZWRJbmRleCkge1xuICB2YXIgYXR0cnMgPSB7fSxcbiAgICAgIGZpZWxkVmVjdG9ycyA9IHt9LFxuICAgICAgc2VyaWFsaXplZFZlY3RvcnMgPSBzZXJpYWxpemVkSW5kZXguZmllbGRWZWN0b3JzLFxuICAgICAgaW52ZXJ0ZWRJbmRleCA9IHt9LFxuICAgICAgc2VyaWFsaXplZEludmVydGVkSW5kZXggPSBzZXJpYWxpemVkSW5kZXguaW52ZXJ0ZWRJbmRleCxcbiAgICAgIHRva2VuU2V0QnVpbGRlciA9IG5ldyBsdW5yLlRva2VuU2V0LkJ1aWxkZXIoKSxcbiAgICAgIHBpcGVsaW5lID0gbHVuci5QaXBlbGluZS5sb2FkKHNlcmlhbGl6ZWRJbmRleC5waXBlbGluZSk7XG5cbiAgaWYgKHNlcmlhbGl6ZWRJbmRleC52ZXJzaW9uICE9IGx1bnIudmVyc2lvbikge1xuICAgIGx1bnIudXRpbHMud2FybihcIlZlcnNpb24gbWlzbWF0Y2ggd2hlbiBsb2FkaW5nIHNlcmlhbGlzZWQgaW5kZXguIEN1cnJlbnQgdmVyc2lvbiBvZiBsdW5yICdcIiArIGx1bnIudmVyc2lvbiArIFwiJyBkb2VzIG5vdCBtYXRjaCBzZXJpYWxpemVkIGluZGV4ICdcIiArIHNlcmlhbGl6ZWRJbmRleC52ZXJzaW9uICsgXCInXCIpO1xuICB9XG5cbiAgdmFyIHR1cGxlO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcmlhbGl6ZWRWZWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdHVwbGUgPSBzZXJpYWxpemVkVmVjdG9yc1tpXTtcbiAgICByZWYgPSB0dXBsZVswXTtcbiAgICBlbGVtZW50cyA9IHR1cGxlWzFdO1xuXG4gICAgZmllbGRWZWN0b3JzW3JlZl0gPSBuZXcgbHVuci5WZWN0b3IoZWxlbWVudHMpO1xuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4Lmxlbmd0aDsgaSsrKSB7XG4gICAgdHVwbGUgPSBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleFtpXTtcbiAgICB0ZXJtID0gdHVwbGVbMF07XG4gICAgcG9zdGluZyA9IHR1cGxlWzFdO1xuXG4gICAgdG9rZW5TZXRCdWlsZGVyLmluc2VydCh0ZXJtKTtcbiAgICBpbnZlcnRlZEluZGV4W3Rlcm1dID0gcG9zdGluZztcbiAgfVxuXG4gIHRva2VuU2V0QnVpbGRlci5maW5pc2goKTtcblxuICBhdHRycy5maWVsZHMgPSBzZXJpYWxpemVkSW5kZXguZmllbGRzO1xuXG4gIGF0dHJzLmZpZWxkVmVjdG9ycyA9IGZpZWxkVmVjdG9ycztcbiAgYXR0cnMuaW52ZXJ0ZWRJbmRleCA9IGludmVydGVkSW5kZXg7XG4gIGF0dHJzLnRva2VuU2V0ID0gdG9rZW5TZXRCdWlsZGVyLnJvb3Q7XG4gIGF0dHJzLnBpcGVsaW5lID0gcGlwZWxpbmU7XG5cbiAgcmV0dXJuIG5ldyBsdW5yLkluZGV4KGF0dHJzKTtcbn07XG4vKiFcbiAqIGx1bnIuQnVpbGRlclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci5CdWlsZGVyIHBlcmZvcm1zIGluZGV4aW5nIG9uIGEgc2V0IG9mIGRvY3VtZW50cyBhbmRcbiAqIHJldHVybnMgaW5zdGFuY2VzIG9mIGx1bnIuSW5kZXggcmVhZHkgZm9yIHF1ZXJ5aW5nLlxuICpcbiAqIEFsbCBjb25maWd1cmF0aW9uIG9mIHRoZSBpbmRleCBpcyBkb25lIHZpYSB0aGUgYnVpbGRlciwgdGhlXG4gKiBmaWVsZHMgdG8gaW5kZXgsIHRoZSBkb2N1bWVudCByZWZlcmVuY2UsIHRoZSB0ZXh0IHByb2Nlc3NpbmdcbiAqIHBpcGVsaW5lIGFuZCBkb2N1bWVudCBzY29yaW5nIHBhcmFtZXRlcnMgYXJlIGFsbCBzZXQgb24gdGhlXG4gKiBidWlsZGVyIGJlZm9yZSBpbmRleGluZy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBfcmVmIC0gSW50ZXJuYWwgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCByZWZlcmVuY2UgZmllbGQuXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBfZmllbGRzIC0gSW50ZXJuYWwgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCBmaWVsZHMgdG8gaW5kZXguXG4gKiBAcHJvcGVydHkge29iamVjdH0gaW52ZXJ0ZWRJbmRleCAtIFRoZSBpbnZlcnRlZCBpbmRleCBtYXBzIHRlcm1zIHRvIGRvY3VtZW50IGZpZWxkcy5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBkb2N1bWVudFRlcm1GcmVxdWVuY2llcyAtIEtlZXBzIHRyYWNrIG9mIGRvY3VtZW50IHRlcm0gZnJlcXVlbmNpZXMuXG4gKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRMZW5ndGhzIC0gS2VlcHMgdHJhY2sgb2YgdGhlIGxlbmd0aCBvZiBkb2N1bWVudHMgYWRkZWQgdG8gdGhlIGluZGV4LlxuICogQHByb3BlcnR5IHtsdW5yLnRva2VuaXplcn0gdG9rZW5pemVyIC0gRnVuY3Rpb24gZm9yIHNwbGl0dGluZyBzdHJpbmdzIGludG8gdG9rZW5zIGZvciBpbmRleGluZy5cbiAqIEBwcm9wZXJ0eSB7bHVuci5QaXBlbGluZX0gcGlwZWxpbmUgLSBUaGUgcGlwZWxpbmUgcGVyZm9ybXMgdGV4dCBwcm9jZXNzaW5nIG9uIHRva2VucyBiZWZvcmUgaW5kZXhpbmcuXG4gKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHNlYXJjaFBpcGVsaW5lIC0gQSBwaXBlbGluZSBmb3IgcHJvY2Vzc2luZyBzZWFyY2ggdGVybXMgYmVmb3JlIHF1ZXJ5aW5nIHRoZSBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkb2N1bWVudENvdW50IC0gS2VlcHMgdHJhY2sgb2YgdGhlIHRvdGFsIG51bWJlciBvZiBkb2N1bWVudHMgaW5kZXhlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBfYiAtIEEgcGFyYW1ldGVyIHRvIGNvbnRyb2wgZmllbGQgbGVuZ3RoIG5vcm1hbGl6YXRpb24sIHNldHRpbmcgdGhpcyB0byAwIGRpc2FibGVkIG5vcm1hbGl6YXRpb24sIDEgZnVsbHkgbm9ybWFsaXplcyBmaWVsZCBsZW5ndGhzLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyAwLjc1LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IF9rMSAtIEEgcGFyYW1ldGVyIHRvIGNvbnRyb2wgaG93IHF1aWNrbHkgYW4gaW5jcmVhc2UgaW4gdGVybSBmcmVxdWVuY3kgcmVzdWx0cyBpbiB0ZXJtIGZyZXF1ZW5jeSBzYXR1cmF0aW9uLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyAxLjIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGVybUluZGV4IC0gQSBjb3VudGVyIGluY3JlbWVudGVkIGZvciBlYWNoIHVuaXF1ZSB0ZXJtLCB1c2VkIHRvIGlkZW50aWZ5IGEgdGVybXMgcG9zaXRpb24gaW4gdGhlIHZlY3RvciBzcGFjZS5cbiAqIEBwcm9wZXJ0eSB7YXJyYXl9IG1ldGFkYXRhV2hpdGVsaXN0IC0gQSBsaXN0IG9mIG1ldGFkYXRhIGtleXMgdGhhdCBoYXZlIGJlZW4gd2hpdGVsaXN0ZWQgZm9yIGVudHJ5IGluIHRoZSBpbmRleC5cbiAqL1xubHVuci5CdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9yZWYgPSBcImlkXCI7XG4gIHRoaXMuX2ZpZWxkcyA9IFtdO1xuICB0aGlzLmludmVydGVkSW5kZXggPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzID0ge307XG4gIHRoaXMuZmllbGRMZW5ndGhzID0ge307XG4gIHRoaXMudG9rZW5pemVyID0gbHVuci50b2tlbml6ZXI7XG4gIHRoaXMucGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZSgpO1xuICB0aGlzLnNlYXJjaFBpcGVsaW5lID0gbmV3IGx1bnIuUGlwZWxpbmUoKTtcbiAgdGhpcy5kb2N1bWVudENvdW50ID0gMDtcbiAgdGhpcy5fYiA9IDAuNzU7XG4gIHRoaXMuX2sxID0gMS4yO1xuICB0aGlzLnRlcm1JbmRleCA9IDA7XG4gIHRoaXMubWV0YWRhdGFXaGl0ZWxpc3QgPSBbXTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgZG9jdW1lbnQgZmllbGQgdXNlZCBhcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlLiBFdmVyeSBkb2N1bWVudCBtdXN0IGhhdmUgdGhpcyBmaWVsZC5cbiAqIFRoZSB0eXBlIG9mIHRoaXMgZmllbGQgaW4gdGhlIGRvY3VtZW50IHNob3VsZCBiZSBhIHN0cmluZywgaWYgaXQgaXMgbm90IGEgc3RyaW5nIGl0IHdpbGwgYmVcbiAqIGNvZXJjZWQgaW50byBhIHN0cmluZyBieSBjYWxsaW5nIHRvU3RyaW5nLlxuICpcbiAqIFRoZSBkZWZhdWx0IHJlZiBpcyAnaWQnLlxuICpcbiAqIFRoZSByZWYgc2hvdWxkIF9ub3RfIGJlIGNoYW5nZWQgZHVyaW5nIGluZGV4aW5nLCBpdCBzaG91bGQgYmUgc2V0IGJlZm9yZSBhbnkgZG9jdW1lbnRzIGFyZVxuICogYWRkZWQgdG8gdGhlIGluZGV4LiBDaGFuZ2luZyBpdCBkdXJpbmcgaW5kZXhpbmcgY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW50IHJlc3VsdHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZiAtIFRoZSBuYW1lIG9mIHRoZSByZWZlcmVuY2UgZmllbGQgaW4gdGhlIGRvY3VtZW50LlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgdGhpcy5fcmVmID0gcmVmO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgZmllbGQgdG8gdGhlIGxpc3Qgb2YgZG9jdW1lbnQgZmllbGRzIHRoYXQgd2lsbCBiZSBpbmRleGVkLiBFdmVyeSBkb2N1bWVudCBiZWluZ1xuICogaW5kZXhlZCBzaG91bGQgaGF2ZSB0aGlzIGZpZWxkLiBOdWxsIHZhbHVlcyBmb3IgdGhpcyBmaWVsZCBpbiBpbmRleGVkIGRvY3VtZW50cyB3aWxsXG4gKiBub3QgY2F1c2UgZXJyb3JzIGJ1dCB3aWxsIGxpbWl0IHRoZSBjaGFuY2Ugb2YgdGhhdCBkb2N1bWVudCBiZWluZyByZXRyaWV2ZWQgYnkgc2VhcmNoZXMuXG4gKlxuICogQWxsIGZpZWxkcyBzaG91bGQgYmUgYWRkZWQgYmVmb3JlIGFkZGluZyBkb2N1bWVudHMgdG8gdGhlIGluZGV4LiBBZGRpbmcgZmllbGRzIGFmdGVyXG4gKiBhIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQgd2lsbCBoYXZlIG5vIGVmZmVjdCBvbiBhbHJlYWR5IGluZGV4ZWQgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBuYW1lIG9mIGEgZmllbGQgdG8gaW5kZXggaW4gYWxsIGRvY3VtZW50cy5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICB0aGlzLl9maWVsZHMucHVzaChmaWVsZCk7XG59O1xuXG4vKipcbiAqIEEgcGFyYW1ldGVyIHRvIHR1bmUgdGhlIGFtb3VudCBvZiBmaWVsZCBsZW5ndGggbm9ybWFsaXNhdGlvbiB0aGF0IGlzIGFwcGxpZWQgd2hlblxuICogY2FsY3VsYXRpbmcgcmVsZXZhbmNlIHNjb3Jlcy4gQSB2YWx1ZSBvZiAwIHdpbGwgY29tcGxldGVseSBkaXNhYmxlIGFueSBub3JtYWxpc2F0aW9uXG4gKiBhbmQgYSB2YWx1ZSBvZiAxIHdpbGwgZnVsbHkgbm9ybWFsaXNlIGZpZWxkIGxlbmd0aHMuIFRoZSBkZWZhdWx0IGlzIDAuNzUuIFZhbHVlcyBvZiBiXG4gKiB3aWxsIGJlIGNsYW1wZWQgdG8gdGhlIHJhbmdlIDAgLSAxLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgLSBUaGUgdmFsdWUgdG8gc2V0IGZvciB0aGlzIHR1bmluZyBwYXJhbWV0ZXIuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYiA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICB0aGlzLl9iID0gMDtcbiAgfSBlbHNlIGlmIChudW1iZXIgPiAxKSB7XG4gICAgdGhpcy5fYiA9IDE7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fYiA9IG51bWJlcjtcbiAgfVxufTtcblxuLyoqXG4gKiBBIHBhcmFtZXRlciB0aGF0IGNvbnRyb2xzIHRoZSBzcGVlZCBhdCB3aGljaCBhIHJpc2UgaW4gdGVybSBmcmVxdWVuY3kgcmVzdWx0cyBpbiB0ZXJtXG4gKiBmcmVxdWVuY3kgc2F0dXJhdGlvbi4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgMS4yLiBTZXR0aW5nIHRoaXMgdG8gYSBoaWdoZXIgdmFsdWUgd2lsbCBnaXZlXG4gKiBzbG93ZXIgc2F0dXJhdGlvbiBsZXZlbHMsIGEgbG93ZXIgdmFsdWUgd2lsbCByZXN1bHQgaW4gcXVpY2tlciBzYXR1cmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgLSBUaGUgdmFsdWUgdG8gc2V0IGZvciB0aGlzIHR1bmluZyBwYXJhbWV0ZXIuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuazEgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gIHRoaXMuX2sxID0gbnVtYmVyO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgZG9jdW1lbnQgdG8gdGhlIGluZGV4LlxuICpcbiAqIEJlZm9yZSBhZGRpbmcgZmllbGRzIHRvIHRoZSBpbmRleCB0aGUgaW5kZXggc2hvdWxkIGhhdmUgYmVlbiBmdWxseSBzZXR1cCwgd2l0aCB0aGUgZG9jdW1lbnRcbiAqIHJlZiBhbmQgYWxsIGZpZWxkcyB0byBpbmRleCBhbHJlYWR5IGhhdmluZyBiZWVuIHNwZWNpZmllZC5cbiAqXG4gKiBUaGUgZG9jdW1lbnQgbXVzdCBoYXZlIGEgZmllbGQgbmFtZSBhcyBzcGVjaWZpZWQgYnkgdGhlIHJlZiAoYnkgZGVmYXVsdCB0aGlzIGlzICdpZCcpIGFuZFxuICogaXQgc2hvdWxkIGhhdmUgYWxsIGZpZWxkcyBkZWZpbmVkIGZvciBpbmRleGluZywgdGhvdWdoIG51bGwgb3IgdW5kZWZpbmVkIHZhbHVlcyB3aWxsIG5vdFxuICogY2F1c2UgZXJyb3JzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBkb2MgLSBUaGUgZG9jdW1lbnQgdG8gYWRkIHRvIHRoZSBpbmRleC5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZG9jKSB7XG4gIHZhciBkb2NSZWYgPSBkb2NbdGhpcy5fcmVmXTtcblxuICB0aGlzLmRvY3VtZW50Q291bnQgKz0gMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2ZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBmaWVsZE5hbWUgPSB0aGlzLl9maWVsZHNbaV0sXG4gICAgICAgIGZpZWxkID0gZG9jW2ZpZWxkTmFtZV0sXG4gICAgICAgIHRva2VucyA9IHRoaXMudG9rZW5pemVyKGZpZWxkKSxcbiAgICAgICAgdGVybXMgPSB0aGlzLnBpcGVsaW5lLnJ1bih0b2tlbnMpLFxuICAgICAgICBmaWVsZFJlZiA9IG5ldyBsdW5yLkZpZWxkUmVmIChkb2NSZWYsIGZpZWxkTmFtZSksXG4gICAgICAgIGZpZWxkVGVybXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llc1tmaWVsZFJlZl0gPSBmaWVsZFRlcm1zO1xuICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSA9IDA7XG5cbiAgICAvLyBzdG9yZSB0aGUgbGVuZ3RoIG9mIHRoaXMgZmllbGQgZm9yIHRoaXMgZG9jdW1lbnRcbiAgICB0aGlzLmZpZWxkTGVuZ3Roc1tmaWVsZFJlZl0gKz0gdGVybXMubGVuZ3RoO1xuXG4gICAgLy8gY2FsY3VsYXRlIHRlcm0gZnJlcXVlbmNpZXMgZm9yIHRoaXMgZmllbGRcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW2pdO1xuXG4gICAgICBpZiAoZmllbGRUZXJtc1t0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpZWxkVGVybXNbdGVybV0gPSAwO1xuICAgICAgfVxuXG4gICAgICBmaWVsZFRlcm1zW3Rlcm1dICs9IDE7XG5cbiAgICAgIC8vIGFkZCB0byBpbnZlcnRlZCBpbmRleFxuICAgICAgLy8gY3JlYXRlIGFuIGluaXRpYWwgcG9zdGluZyBpZiBvbmUgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBwb3N0aW5nID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgcG9zdGluZy5faW5kZXggPSB0aGlzLnRlcm1JbmRleDtcbiAgICAgICAgdGhpcy50ZXJtSW5kZXggKz0gMTtcblxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMuX2ZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIHBvc3RpbmdbdGhpcy5fZmllbGRzW2tdXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV0gPSBwb3N0aW5nO1xuICAgICAgfVxuXG4gICAgICAvLyBhZGQgYW4gZW50cnkgZm9yIHRoaXMgdGVybS9maWVsZE5hbWUvZG9jUmVmIHRvIHRoZSBpbnZlcnRlZEluZGV4XG4gICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBzdG9yZSBhbGwgd2hpdGVsaXN0ZWQgbWV0YWRhdGEgYWJvdXQgdGhpcyB0b2tlbiBpbiB0aGVcbiAgICAgIC8vIGludmVydGVkIGluZGV4XG4gICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHRoaXMubWV0YWRhdGFXaGl0ZWxpc3QubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgdmFyIG1ldGFkYXRhS2V5ID0gdGhpcy5tZXRhZGF0YVdoaXRlbGlzdFtsXSxcbiAgICAgICAgICAgIG1ldGFkYXRhID0gdGVybS5tZXRhZGF0YVttZXRhZGF0YUtleV07XG5cbiAgICAgICAgaWYgKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl1bbWV0YWRhdGFLZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0ucHVzaChtZXRhZGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYXZlcmFnZSBkb2N1bWVudCBsZW5ndGggZm9yIHRoaXMgaW5kZXhcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRMZW5ndGhzKSxcbiAgICAgIG51bWJlck9mRmllbGRzID0gZmllbGRSZWZzLmxlbmd0aCxcbiAgICAgIGFjY3VtdWxhdG9yID0ge30sXG4gICAgICBkb2N1bWVudHNXaXRoRmllbGQgPSB7fTtcblxuICB2YXIgZmllbGQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZGaWVsZHM7IGkrKykge1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhmaWVsZFJlZnNbaV0pO1xuICAgIGZpZWxkID0gZmllbGRSZWYuZmllbGROYW1lO1xuXG4gICAgaWYgKGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gfHwgKGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gPSAwKSkge1xuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSArPSAxO1xuICAgIH1cblxuXG4gICAgaWYgKGFjY3VtdWxhdG9yW2ZpZWxkXSB8fCAoYWNjdW11bGF0b3JbZmllbGRdID0gMCkpIHtcbiAgICAgIGFjY3VtdWxhdG9yW2ZpZWxkXSArPSB0aGlzLmZpZWxkTGVuZ3Roc1tmaWVsZFJlZl07XG4gICAgfVxuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IHRoaXMuX2ZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGZpZWxkID0gdGhpcy5fZmllbGRzW2ldO1xuICAgIGFjY3VtdWxhdG9yW2ZpZWxkXSA9IGFjY3VtdWxhdG9yW2ZpZWxkXSAvIGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF07XG4gIH1cblxuICB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aCA9IGFjY3VtdWxhdG9yO1xufTtcblxuLyoqXG4gKiBCdWlsZHMgYSB2ZWN0b3Igc3BhY2UgbW9kZWwgb2YgZXZlcnkgZG9jdW1lbnQgdXNpbmcgbHVuci5WZWN0b3JcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZUZpZWxkVmVjdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZpZWxkVmVjdG9ycyA9IHt9LFxuICAgICAgZmllbGRSZWZzID0gT2JqZWN0LmtleXModGhpcy5maWVsZFRlcm1GcmVxdWVuY2llcyksXG4gICAgICBmaWVsZFJlZnNMZW5ndGggPSBmaWVsZFJlZnMubGVuZ3RoLFxuICAgICAgdGVybUlkZkNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkUmVmc0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZpZWxkUmVmID0gbHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nKGZpZWxkUmVmc1tpXSksXG4gICAgICAgIGZpZWxkID0gZmllbGRSZWYuZmllbGROYW1lLFxuICAgICAgICBmaWVsZExlbmd0aCA9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSxcbiAgICAgICAgZmllbGRWZWN0b3IgPSBuZXcgbHVuci5WZWN0b3IoKSxcbiAgICAgICAgdGVybUZyZXF1ZW5jaWVzID0gdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llc1tmaWVsZFJlZl0sXG4gICAgICAgIHRlcm1zID0gT2JqZWN0LmtleXModGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgICAgdGVybXNMZW5ndGggPSB0ZXJtcy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlcm1zTGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbal0sXG4gICAgICAgICAgdGYgPSB0ZXJtRnJlcXVlbmNpZXNbdGVybV0sXG4gICAgICAgICAgdGVybUluZGV4ID0gdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dLl9pbmRleCxcbiAgICAgICAgICBpZGYsIHNjb3JlLCBzY29yZVdpdGhQcmVjaXNpb247XG5cbiAgICAgIGlmICh0ZXJtSWRmQ2FjaGVbdGVybV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZGYgPSBsdW5yLmlkZih0aGlzLmludmVydGVkSW5kZXhbdGVybV0sIHRoaXMuZG9jdW1lbnRDb3VudCk7XG4gICAgICAgIHRlcm1JZGZDYWNoZVt0ZXJtXSA9IGlkZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkZiA9IHRlcm1JZGZDYWNoZVt0ZXJtXTtcbiAgICAgIH1cblxuICAgICAgc2NvcmUgPSBpZGYgKiAoKHRoaXMuX2sxICsgMSkgKiB0ZikgLyAodGhpcy5fazEgKiAoMSAtIHRoaXMuX2IgKyB0aGlzLl9iICogKGZpZWxkTGVuZ3RoIC8gdGhpcy5hdmVyYWdlRmllbGRMZW5ndGhbZmllbGRdKSkgKyB0Zik7XG4gICAgICBzY29yZVdpdGhQcmVjaXNpb24gPSBNYXRoLnJvdW5kKHNjb3JlICogMTAwMCkgLyAxMDAwO1xuICAgICAgLy8gQ29udmVydHMgMS4yMzQ1Njc4OSB0byAxLjIzNC5cbiAgICAgIC8vIFJlZHVjaW5nIHRoZSBwcmVjaXNpb24gc28gdGhhdCB0aGUgdmVjdG9ycyB0YWtlIHVwIGxlc3NcbiAgICAgIC8vIHNwYWNlIHdoZW4gc2VyaWFsaXNlZC4gRG9pbmcgaXQgbm93IHNvIHRoYXQgdGhleSBiZWhhdmVcbiAgICAgIC8vIHRoZSBzYW1lIGJlZm9yZSBhbmQgYWZ0ZXIgc2VyaWFsaXNhdGlvbi4gQWxzbywgdGhpcyBpc1xuICAgICAgLy8gdGhlIGZhc3Rlc3QgYXBwcm9hY2ggdG8gcmVkdWNpbmcgYSBudW1iZXIncyBwcmVjaXNpb24gaW5cbiAgICAgIC8vIEphdmFTY3JpcHQuXG5cbiAgICAgIGZpZWxkVmVjdG9yLmluc2VydCh0ZXJtSW5kZXgsIHNjb3JlV2l0aFByZWNpc2lvbik7XG4gICAgfVxuXG4gICAgZmllbGRWZWN0b3JzW2ZpZWxkUmVmXSA9IGZpZWxkVmVjdG9yO1xuICB9XG5cbiAgdGhpcy5maWVsZFZlY3RvcnMgPSBmaWVsZFZlY3RvcnM7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgb2YgYWxsIHRva2VucyBpbiB0aGUgaW5kZXggdXNpbmcgbHVuci5Ub2tlblNldFxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlVG9rZW5TZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudG9rZW5TZXQgPSBsdW5yLlRva2VuU2V0LmZyb21BcnJheShcbiAgICBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpLnNvcnQoKVxuICApO1xufTtcblxuLyoqXG4gKiBCdWlsZHMgdGhlIGluZGV4LCBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiBsdW5yLkluZGV4LlxuICpcbiAqIFRoaXMgY29tcGxldGVzIHRoZSBpbmRleGluZyBwcm9jZXNzIGFuZCBzaG91bGQgb25seSBiZSBjYWxsZWRcbiAqIG9uY2UgYWxsIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGluZGV4LlxuICpcbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4fVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMoKTtcbiAgdGhpcy5jcmVhdGVGaWVsZFZlY3RvcnMoKTtcbiAgdGhpcy5jcmVhdGVUb2tlblNldCgpO1xuXG4gIHJldHVybiBuZXcgbHVuci5JbmRleCh7XG4gICAgaW52ZXJ0ZWRJbmRleDogdGhpcy5pbnZlcnRlZEluZGV4LFxuICAgIGZpZWxkVmVjdG9yczogdGhpcy5maWVsZFZlY3RvcnMsXG4gICAgdG9rZW5TZXQ6IHRoaXMudG9rZW5TZXQsXG4gICAgZmllbGRzOiB0aGlzLl9maWVsZHMsXG4gICAgcGlwZWxpbmU6IHRoaXMuc2VhcmNoUGlwZWxpbmVcbiAgfSk7XG59O1xuXG4vKipcbiAqIEFwcGxpZXMgYSBwbHVnaW4gdG8gdGhlIGluZGV4IGJ1aWxkZXIuXG4gKlxuICogQSBwbHVnaW4gaXMgYSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICogUGx1Z2lucyBjYW4gYmUgdXNlZCB0byBjdXN0b21pc2Ugb3IgZXh0ZW5kIHRoZSBiZWhhdmlvdXIgb2YgdGhlIGluZGV4XG4gKiBpbiBzb21lIHdheS4gQSBwbHVnaW4gaXMganVzdCBhIGZ1bmN0aW9uLCB0aGF0IGVuY2Fwc3VsYXRlZCB0aGUgY3VzdG9tXG4gKiBiZWhhdmlvdXIgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIGJ1aWxkaW5nIHRoZSBpbmRleC5cbiAqXG4gKiBUaGUgcGx1Z2luIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGFyZ3VtZW50LCBhZGRpdGlvbmFsXG4gKiBhcmd1bWVudHMgY2FuIGFsc28gYmUgcGFzc2VkIHdoZW4gY2FsbGluZyB1c2UuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICogd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgY29udGV4dC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwbHVnaW4gVGhlIHBsdWdpbiB0byBhcHBseS5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xufTtcbi8qKlxuICogQ29udGFpbnMgYW5kIGNvbGxlY3RzIG1ldGFkYXRhIGFib3V0IGEgbWF0Y2hpbmcgZG9jdW1lbnQuXG4gKiBBIHNpbmdsZSBpbnN0YW5jZSBvZiBsdW5yLk1hdGNoRGF0YSBpcyByZXR1cm5lZCBhcyBwYXJ0IG9mIGV2ZXJ5XG4gKiBsdW5yLkluZGV4flJlc3VsdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gVGhlIHRlcm0gdGhpcyBtYXRjaCBkYXRhIGlzIGFzc29jaWF0ZWQgd2l0aFxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIGZpZWxkIGluIHdoaWNoIHRoZSB0ZXJtIHdhcyBmb3VuZFxuICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhIC0gVGhlIG1ldGFkYXRhIHJlY29yZGVkIGFib3V0IHRoaXMgdGVybSBpbiB0aGlzIGZpZWxkXG4gKiBAcHJvcGVydHkge29iamVjdH0gbWV0YWRhdGEgLSBBIGNsb25lZCBjb2xsZWN0aW9uIG9mIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRvY3VtZW50LlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhID0gZnVuY3Rpb24gKHRlcm0sIGZpZWxkLCBtZXRhZGF0YSkge1xuICB2YXIgY2xvbmVkTWV0YWRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgbWV0YWRhdGFLZXlzID0gT2JqZWN0LmtleXMobWV0YWRhdGEpO1xuXG4gIC8vIENsb25pbmcgdGhlIG1ldGFkYXRhIHRvIHByZXZlbnQgdGhlIG9yaWdpbmFsXG4gIC8vIGJlaW5nIG11dGF0ZWQgZHVyaW5nIG1hdGNoIGRhdGEgY29tYmluYXRpb24uXG4gIC8vIE1ldGFkYXRhIGlzIGtlcHQgaW4gYW4gYXJyYXkgd2l0aGluIHRoZSBpbnZlcnRlZFxuICAvLyBpbmRleCBzbyBjbG9uaW5nIHRoZSBkYXRhIGNhbiBiZSBkb25lIHdpdGhcbiAgLy8gQXJyYXkjc2xpY2VcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldO1xuICAgIGNsb25lZE1ldGFkYXRhW2tleV0gPSBtZXRhZGF0YVtrZXldLnNsaWNlKCk7XG4gIH1cblxuICB0aGlzLm1ldGFkYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gY2xvbmVkTWV0YWRhdGE7XG59O1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpbGwgYmUgY3JlYXRlZCBmb3IgZXZlcnkgdGVybSB0aGF0IG1hdGNoZXMgYVxuICogZG9jdW1lbnQuIEhvd2V2ZXIgb25seSBvbmUgaW5zdGFuY2UgaXMgcmVxdWlyZWQgaW4gYSBsdW5yLkluZGV4flJlc3VsdC4gVGhpc1xuICogbWV0aG9kIGNvbWJpbmVzIG1ldGFkYXRhIGZyb20gYW5vdGhlciBpbnN0YW5jZSBvZiBsdW5yLk1hdGNoRGF0YSB3aXRoIHRoaXNcbiAqIG9iamVjdHMgbWV0YWRhdGEuXG4gKlxuICogQHBhcmFtIHtsdW5yLk1hdGNoRGF0YX0gb3RoZXJNYXRjaERhdGEgLSBBbm90aGVyIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEgdG8gbWVyZ2Ugd2l0aCB0aGlzIG9uZS5cbiAqIEBzZWUge0BsaW5rIGx1bnIuSW5kZXh+UmVzdWx0fVxuICovXG5sdW5yLk1hdGNoRGF0YS5wcm90b3R5cGUuY29tYmluZSA9IGZ1bmN0aW9uIChvdGhlck1hdGNoRGF0YSkge1xuICB2YXIgdGVybXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXJtcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0ZXJtID0gdGVybXNbaV0sXG4gICAgICAgIGZpZWxkcyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhW3Rlcm1dKTtcblxuICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgZmllbGQgPSBmaWVsZHNbal0sXG4gICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSk7XG5cbiAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2tdO1xuXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gb3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0uY29uY2F0KG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEFkZCBtZXRhZGF0YSBmb3IgYSB0ZXJtL2ZpZWxkIHBhaXIgdG8gdGhpcyBpbnN0YW5jZSBvZiBtYXRjaCBkYXRhLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gVGhlIHRlcm0gdGhpcyBtYXRjaCBkYXRhIGlzIGFzc29jaWF0ZWQgd2l0aFxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIGZpZWxkIGluIHdoaWNoIHRoZSB0ZXJtIHdhcyBmb3VuZFxuICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhIC0gVGhlIG1ldGFkYXRhIHJlY29yZGVkIGFib3V0IHRoaXMgdGVybSBpbiB0aGlzIGZpZWxkXG4gKi9cbmx1bnIuTWF0Y2hEYXRhLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVybSwgZmllbGQsIG1ldGFkYXRhKSB7XG4gIGlmICghKHRlcm0gaW4gdGhpcy5tZXRhZGF0YSkpIHtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IG1ldGFkYXRhO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghKGZpZWxkIGluIHRoaXMubWV0YWRhdGFbdGVybV0pKSB7XG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBtZXRhZGF0YTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbWV0YWRhdGFLZXlzID0gT2JqZWN0LmtleXMobWV0YWRhdGEpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YWRhdGFLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IG1ldGFkYXRhS2V5c1tpXTtcblxuICAgIGlmIChrZXkgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0pIHtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldLmNvbmNhdChtZXRhZGF0YVtrZXldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IG1ldGFkYXRhW2tleV07XG4gICAgfVxuICB9XG59O1xuLyoqXG4gKiBBIGx1bnIuUXVlcnkgcHJvdmlkZXMgYSBwcm9ncmFtbWF0aWMgd2F5IG9mIGRlZmluaW5nIHF1ZXJpZXMgdG8gYmUgcGVyZm9ybWVkXG4gKiBhZ2FpbnN0IGEge0BsaW5rIGx1bnIuSW5kZXh9LlxuICpcbiAqIFByZWZlciBjb25zdHJ1Y3RpbmcgYSBsdW5yLlF1ZXJ5IHVzaW5nIHRoZSB7QGxpbmsgbHVuci5JbmRleCNxdWVyeX0gbWV0aG9kXG4gKiBzbyB0aGUgcXVlcnkgb2JqZWN0IGlzIHByZS1pbml0aWFsaXplZCB3aXRoIHRoZSByaWdodCBpbmRleCBmaWVsZHMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJvcGVydHkge2x1bnIuUXVlcnl+Q2xhdXNlW119IGNsYXVzZXMgLSBBbiBhcnJheSBvZiBxdWVyeSBjbGF1c2VzLlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gYWxsRmllbGRzIC0gQW4gYXJyYXkgb2YgYWxsIGF2YWlsYWJsZSBmaWVsZHMgaW4gYSBsdW5yLkluZGV4LlxuICovXG5sdW5yLlF1ZXJ5ID0gZnVuY3Rpb24gKGFsbEZpZWxkcykge1xuICB0aGlzLmNsYXVzZXMgPSBbXTtcbiAgdGhpcy5hbGxGaWVsZHMgPSBhbGxGaWVsZHM7XG59O1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgaW5kaWNhdGluZyB3aGF0IGtpbmQgb2YgYXV0b21hdGljIHdpbGRjYXJkIGluc2VydGlvbiB3aWxsIGJlIHVzZWQgd2hlbiBjb25zdHJ1Y3RpbmcgYSBxdWVyeSBjbGF1c2UuXG4gKlxuICogVGhpcyBhbGxvd3Mgd2lsZGNhcmRzIHRvIGJlIGFkZGVkIHRvIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHRlcm0gd2l0aG91dCBoYXZpbmcgdG8gbWFudWFsbHkgZG8gYW55IHN0cmluZ1xuICogY29uY2F0ZW5hdGlvbi5cbiAqXG4gKiBUaGUgd2lsZGNhcmQgY29uc3RhbnRzIGNhbiBiZSBiaXR3aXNlIGNvbWJpbmVkIHRvIHNlbGVjdCBib3RoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdpbGRjYXJkcy5cbiAqXG4gKiBAY29uc3RhbnRcbiAqIEBkZWZhdWx0XG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lsZGNhcmQuTk9ORSAtIFRoZSB0ZXJtIHdpbGwgaGF2ZSBubyB3aWxkY2FyZHMgaW5zZXJ0ZWQsIHRoaXMgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3VyXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lsZGNhcmQuTEVBRElORyAtIFByZXBlbmQgdGhlIHRlcm0gd2l0aCBhIHdpbGRjYXJkLCB1bmxlc3MgYSBsZWFkaW5nIHdpbGRjYXJkIGFscmVhZHkgZXhpc3RzXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lsZGNhcmQuVFJBSUxJTkcgLSBBcHBlbmQgYSB3aWxkY2FyZCB0byB0aGUgdGVybSwgdW5sZXNzIGEgdHJhaWxpbmcgd2lsZGNhcmQgYWxyZWFkeSBleGlzdHNcbiAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAqIEBzZWUgbHVuci5RdWVyeSNjbGF1c2VcbiAqIEBzZWUgbHVuci5RdWVyeSN0ZXJtXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5xdWVyeSB0ZXJtIHdpdGggdHJhaWxpbmcgd2lsZGNhcmQ8L2NhcHRpb24+XG4gKiBxdWVyeS50ZXJtKCdmb28nLCB7IHdpbGRjYXJkOiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HIH0pXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5xdWVyeSB0ZXJtIHdpdGggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2lsZGNhcmQ8L2NhcHRpb24+XG4gKiBxdWVyeS50ZXJtKCdmb28nLCB7XG4gKiAgIHdpbGRjYXJkOiBsdW5yLlF1ZXJ5LndpbGRjYXJkLkxFQURJTkcgfCBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HXG4gKiB9KVxuICovXG5cbmx1bnIuUXVlcnkud2lsZGNhcmQgPSBcIipcIjtcbmx1bnIuUXVlcnkud2lsZGNhcmQuTk9ORSA9IDA7XG5sdW5yLlF1ZXJ5LndpbGRjYXJkLkxFQURJTkcgPSAxO1xubHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORyA9IDI7XG5cbi8qKlxuICogQSBzaW5nbGUgY2xhdXNlIGluIGEge0BsaW5rIGx1bnIuUXVlcnl9IGNvbnRhaW5zIGEgdGVybSBhbmQgZGV0YWlscyBvbiBob3cgdG9cbiAqIG1hdGNoIHRoYXQgdGVybSBhZ2FpbnN0IGEge0BsaW5rIGx1bnIuSW5kZXh9LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBmaWVsZHMgLSBUaGUgZmllbGRzIGluIGFuIGluZGV4IHRoaXMgY2xhdXNlIHNob3VsZCBiZSBtYXRjaGVkIGFnYWluc3QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Jvb3N0PTFdIC0gQW55IGJvb3N0IHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgd2hlbiBtYXRjaGluZyB0aGlzIGNsYXVzZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZWRpdERpc3RhbmNlXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgZnV6enkgbWF0Y2hpbmcgYXBwbGllZCwgYW5kIGhvdyBmdXp6eSB0aGUgbWF0Y2ggc2hvdWxkIGJlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlUGlwZWxpbmVdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHNlYXJjaCBwaXBlbGluZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbd2lsZGNhcmQ9MF0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBoYXZlIHdpbGRjYXJkcyBhcHBlbmRlZCBvciBwcmVwZW5kZWQuXG4gKi9cblxuLyoqXG4gKiBBZGRzIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfSB0byB0aGlzIHF1ZXJ5LlxuICpcbiAqIFVubGVzcyB0aGUgY2xhdXNlIGNvbnRhaW5zIHRoZSBmaWVsZHMgdG8gYmUgbWF0Y2hlZCBhbGwgZmllbGRzIHdpbGwgYmUgbWF0Y2hlZC4gSW4gYWRkaXRpb25cbiAqIGEgZGVmYXVsdCBib29zdCBvZiAxIGlzIGFwcGxpZWQgdG8gdGhlIGNsYXVzZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUXVlcnl+Q2xhdXNlfSBjbGF1c2UgLSBUaGUgY2xhdXNlIHRvIGFkZCB0byB0aGlzIHF1ZXJ5LlxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQHJldHVybnMge2x1bnIuUXVlcnl9XG4gKi9cbmx1bnIuUXVlcnkucHJvdG90eXBlLmNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgaWYgKCEoJ2ZpZWxkcycgaW4gY2xhdXNlKSkge1xuICAgIGNsYXVzZS5maWVsZHMgPSB0aGlzLmFsbEZpZWxkcztcbiAgfVxuXG4gIGlmICghKCdib29zdCcgaW4gY2xhdXNlKSkge1xuICAgIGNsYXVzZS5ib29zdCA9IDE7XG4gIH1cblxuICBpZiAoISgndXNlUGlwZWxpbmUnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UudXNlUGlwZWxpbmUgPSB0cnVlO1xuICB9XG5cbiAgaWYgKCEoJ3dpbGRjYXJkJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLndpbGRjYXJkID0gbHVuci5RdWVyeS53aWxkY2FyZC5OT05FO1xuICB9XG5cbiAgaWYgKChjbGF1c2Uud2lsZGNhcmQgJiBsdW5yLlF1ZXJ5LndpbGRjYXJkLkxFQURJTkcpICYmIChjbGF1c2UudGVybS5jaGFyQXQoMCkgIT0gbHVuci5RdWVyeS53aWxkY2FyZCkpIHtcbiAgICBjbGF1c2UudGVybSA9IFwiKlwiICsgY2xhdXNlLnRlcm07XG4gIH1cblxuICBpZiAoKGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcpICYmIChjbGF1c2UudGVybS5zbGljZSgtMSkgIT0gbHVuci5RdWVyeS53aWxkY2FyZCkpIHtcbiAgICBjbGF1c2UudGVybSA9IFwiXCIgKyBjbGF1c2UudGVybSArIFwiKlwiO1xuICB9XG5cbiAgdGhpcy5jbGF1c2VzLnB1c2goY2xhdXNlKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWRkcyBhIHRlcm0gdG8gdGhlIGN1cnJlbnQgcXVlcnksIHVuZGVyIHRoZSBjb3ZlcnMgdGhpcyB3aWxsIGNyZWF0ZSBhIHtAbGluayBsdW5yLlF1ZXJ5fkNsYXVzZX1cbiAqIHRvIHRoZSBsaXN0IG9mIGNsYXVzZXMgdGhhdCBtYWtlIHVwIHRoaXMgcXVlcnkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0byBhZGQgdG8gdGhlIHF1ZXJ5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEFueSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBxdWVyeSBjbGF1c2UuXG4gKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAqIEBzZWUgbHVuci5RdWVyeSNjbGF1c2VcbiAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAqIEBleGFtcGxlIDxjYXB0aW9uPmFkZGluZyBhIHNpbmdsZSB0ZXJtIHRvIGEgcXVlcnk8L2NhcHRpb24+XG4gKiBxdWVyeS50ZXJtKFwiZm9vXCIpXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5hZGRpbmcgYSBzaW5nbGUgdGVybSB0byBhIHF1ZXJ5IGFuZCBzcGVjaWZ5aW5nIHNlYXJjaCBmaWVsZHMsIHRlcm0gYm9vc3QgYW5kIGF1dG9tYXRpYyB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oXCJmb29cIiwge1xuICogICBmaWVsZHM6IFtcInRpdGxlXCJdLFxuICogICBib29zdDogMTAsXG4gKiAgIHdpbGRjYXJkOiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HXG4gKiB9KVxuICovXG5sdW5yLlF1ZXJ5LnByb3RvdHlwZS50ZXJtID0gZnVuY3Rpb24gKHRlcm0sIG9wdGlvbnMpIHtcbiAgdmFyIGNsYXVzZSA9IG9wdGlvbnMgfHwge307XG4gIGNsYXVzZS50ZXJtID0gdGVybTtcblxuICB0aGlzLmNsYXVzZShjbGF1c2UpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcbmx1bnIuUXVlcnlQYXJzZUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHN0YXJ0LCBlbmQpIHtcbiAgdGhpcy5uYW1lID0gXCJRdWVyeVBhcnNlRXJyb3JcIjtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICB0aGlzLmVuZCA9IGVuZDtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZUVycm9yLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xubHVuci5RdWVyeUxleGVyID0gZnVuY3Rpb24gKHN0cikge1xuICB0aGlzLmxleGVtZXMgPSBbXTtcbiAgdGhpcy5zdHIgPSBzdHI7XG4gIHRoaXMubGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgdGhpcy5wb3MgPSAwO1xuICB0aGlzLnN0YXJ0ID0gMDtcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zID0gW107XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG5cbiAgd2hpbGUgKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSh0aGlzKTtcbiAgfVxufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5zbGljZVN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN1YlNsaWNlcyA9IFtdLFxuICAgICAgc2xpY2VTdGFydCA9IHRoaXMuc3RhcnQsXG4gICAgICBzbGljZUVuZCA9IHRoaXMucG9zO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgc2xpY2VFbmQgPSB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnNbaV07XG4gICAgc3ViU2xpY2VzLnB1c2godGhpcy5zdHIuc2xpY2Uoc2xpY2VTdGFydCwgc2xpY2VFbmQpKTtcbiAgICBzbGljZVN0YXJ0ID0gc2xpY2VFbmQgKyAxO1xuICB9XG5cbiAgc3ViU2xpY2VzLnB1c2godGhpcy5zdHIuc2xpY2Uoc2xpY2VTdGFydCwgdGhpcy5wb3MpKTtcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLmxlbmd0aCA9IDA7XG5cbiAgcmV0dXJuIHN1YlNsaWNlcy5qb2luKCcnKTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIHRoaXMubGV4ZW1lcy5wdXNoKHtcbiAgICB0eXBlOiB0eXBlLFxuICAgIHN0cjogdGhpcy5zbGljZVN0cmluZygpLFxuICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgIGVuZDogdGhpcy5wb3NcbiAgfSk7XG5cbiAgdGhpcy5zdGFydCA9IHRoaXMucG9zO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5lc2NhcGVDaGFyYWN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9ucy5wdXNoKHRoaXMucG9zIC0gMSk7XG4gIHRoaXMucG9zICs9IDE7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIuRU9TO1xuICB9XG5cbiAgdmFyIGNoYXIgPSB0aGlzLnN0ci5jaGFyQXQodGhpcy5wb3MpO1xuICB0aGlzLnBvcyArPSAxO1xuICByZXR1cm4gY2hhcjtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnBvcyAtIHRoaXMuc3RhcnQ7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmlnbm9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuc3RhcnQgPT0gdGhpcy5wb3MpIHtcbiAgICB0aGlzLnBvcyArPSAxO1xuICB9XG5cbiAgdGhpcy5zdGFydCA9IHRoaXMucG9zO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5iYWNrdXAgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucG9zIC09IDE7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmFjY2VwdERpZ2l0UnVuID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY2hhciwgY2hhckNvZGU7XG5cbiAgZG8ge1xuICAgIGNoYXIgPSB0aGlzLm5leHQoKTtcbiAgICBjaGFyQ29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcbiAgfSB3aGlsZSAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KTtcblxuICBpZiAoY2hhciAhPSBsdW5yLlF1ZXJ5TGV4ZXIuRU9TKSB7XG4gICAgdGhpcy5iYWNrdXAoKTtcbiAgfVxufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5tb3JlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5wb3MgPCB0aGlzLmxlbmd0aDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5FT1MgPSAnRU9TJztcbmx1bnIuUXVlcnlMZXhlci5GSUVMRCA9ICdGSUVMRCc7XG5sdW5yLlF1ZXJ5TGV4ZXIuVEVSTSA9ICdURVJNJztcbmx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFID0gJ0VESVRfRElTVEFOQ0UnO1xubHVuci5RdWVyeUxleGVyLkJPT1NUID0gJ0JPT1NUJztcblxubHVuci5RdWVyeUxleGVyLmxleEZpZWxkID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGxleGVyLmJhY2t1cCgpO1xuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5GSUVMRCk7XG4gIGxleGVyLmlnbm9yZSgpO1xuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4VGVybSA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBpZiAobGV4ZXIud2lkdGgoKSA+IDEpIHtcbiAgICBsZXhlci5iYWNrdXAoKTtcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKTtcbiAgfVxuXG4gIGxleGVyLmlnbm9yZSgpO1xuXG4gIGlmIChsZXhlci5tb3JlKCkpIHtcbiAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhFZGl0RGlzdGFuY2UgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuaWdub3JlKCk7XG4gIGxleGVyLmFjY2VwdERpZ2l0UnVuKCk7XG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0UpO1xuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4Qm9vc3QgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuaWdub3JlKCk7XG4gIGxleGVyLmFjY2VwdERpZ2l0UnVuKCk7XG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkJPT1NUKTtcbiAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xufTtcblxubHVuci5RdWVyeUxleGVyLmxleEVPUyA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKTtcbiAgfVxufTtcblxuLy8gVGhpcyBtYXRjaGVzIHRoZSBzZXBhcmF0b3IgdXNlZCB3aGVuIHRva2VuaXNpbmcgZmllbGRzXG4vLyB3aXRoaW4gYSBkb2N1bWVudC4gVGhlc2Ugc2hvdWxkIG1hdGNoIG90aGVyd2lzZSBpdCBpc1xuLy8gbm90IHBvc3NpYmxlIHRvIHNlYXJjaCBmb3Igc29tZSB0b2tlbnMgd2l0aGluIGEgZG9jdW1lbnQuXG4vL1xuLy8gSXQgaXMgcG9zc2libGUgZm9yIHRoZSB1c2VyIHRvIGNoYW5nZSB0aGUgc2VwYXJhdG9yIG9uIHRoZVxuLy8gdG9rZW5pemVyIHNvIGl0IF9taWdodF8gY2xhc2ggd2l0aCBhbnkgb3RoZXIgb2YgdGhlIHNwZWNpYWxcbi8vIGNoYXJhY3RlcnMgYWxyZWFkeSB1c2VkIHdpdGhpbiB0aGUgc2VhcmNoIHN0cmluZywgZS5nLiA6LlxuLy9cbi8vIFRoaXMgbWVhbnMgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIHNlcGFyYXRvciBpblxuLy8gc3VjaCBhIHdheSB0aGF0IG1ha2VzIHNvbWUgd29yZHMgdW5zZWFyY2hhYmxlIHVzaW5nIGEgc2VhcmNoXG4vLyBzdHJpbmcuXG5sdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvciA9IGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcjtcblxubHVuci5RdWVyeUxleGVyLmxleFRleHQgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICB2YXIgY2hhciA9IGxleGVyLm5leHQoKTtcblxuICAgIGlmIChjaGFyID09IGx1bnIuUXVlcnlMZXhlci5FT1MpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RU9TO1xuICAgIH1cblxuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXIgaXMgJ1xcJ1xuICAgIGlmIChjaGFyLmNoYXJDb2RlQXQoMCkgPT0gOTIpIHtcbiAgICAgIGxleGVyLmVzY2FwZUNoYXJhY3RlcigpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCI6XCIpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RmllbGQ7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCJ+XCIpIHtcbiAgICAgIGxleGVyLmJhY2t1cCgpO1xuICAgICAgaWYgKGxleGVyLndpZHRoKCkgPiAwKSB7XG4gICAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhFZGl0RGlzdGFuY2U7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCJeXCIpIHtcbiAgICAgIGxleGVyLmJhY2t1cCgpO1xuICAgICAgaWYgKGxleGVyLndpZHRoKCkgPiAwKSB7XG4gICAgICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhCb29zdDtcbiAgICB9XG5cbiAgICBpZiAoY2hhci5tYXRjaChsdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvcikpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGVybTtcbiAgICB9XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIgPSBmdW5jdGlvbiAoc3RyLCBxdWVyeSkge1xuICB0aGlzLmxleGVyID0gbmV3IGx1bnIuUXVlcnlMZXhlciAoc3RyKTtcbiAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICB0aGlzLmN1cnJlbnRDbGF1c2UgPSB7fTtcbiAgdGhpcy5sZXhlbWVJZHggPSAwO1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubGV4ZXIucnVuKCk7XG4gIHRoaXMubGV4ZW1lcyA9IHRoaXMubGV4ZXIubGV4ZW1lcztcblxuICB2YXIgc3RhdGUgPSBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGRPclRlcm07XG5cbiAgd2hpbGUgKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSh0aGlzKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLnF1ZXJ5O1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUucGVla0xleGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubGV4ZW1lc1t0aGlzLmxleGVtZUlkeF07XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5jb25zdW1lTGV4ZW1lID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGV4ZW1lID0gdGhpcy5wZWVrTGV4ZW1lKCk7XG4gIHRoaXMubGV4ZW1lSWR4ICs9IDE7XG4gIHJldHVybiBsZXhlbWU7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5uZXh0Q2xhdXNlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY29tcGxldGVkQ2xhdXNlID0gdGhpcy5jdXJyZW50Q2xhdXNlO1xuICB0aGlzLnF1ZXJ5LmNsYXVzZShjb21wbGV0ZWRDbGF1c2UpO1xuICB0aGlzLmN1cnJlbnRDbGF1c2UgPSB7fTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZE9yVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChsZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZDtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RlZCBlaXRoZXIgYSBmaWVsZCBvciBhIHRlcm0sIGZvdW5kIFwiICsgbGV4ZW1lLnR5cGU7XG5cbiAgICAgIGlmIChsZXhlbWUuc3RyLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPSBcIiB3aXRoIHZhbHVlICdcIiArIGxleGVtZS5zdHIgKyBcIidcIjtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGVycm9yTWVzc2FnZTtcbiAgaWYgKHBhcnNlci5xdWVyeS5hbGxGaWVsZHMuaW5kZXhPZihsZXhlbWUuc3RyKSA9PSAtMSkge1xuICAgIHZhciBwb3NzaWJsZUZpZWxkcyA9IHBhcnNlci5xdWVyeS5hbGxGaWVsZHMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBcIidcIiArIGYgKyBcIidcIjsgfSkuam9pbignLCAnKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJ1bnJlY29nbmlzZWQgZmllbGQgJ1wiICsgbGV4ZW1lLnN0ciArIFwiJywgcG9zc2libGUgZmllbGRzOiBcIiArIHBvc3NpYmxlRmllbGRzO1xuXG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5maWVsZHMgPSBbbGV4ZW1lLnN0cl07XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpO1xuXG4gIGlmIChuZXh0TGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGluZyB0ZXJtLCBmb3VuZCBub3RoaW5nXCI7XG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgZGVmYXVsdDpcbiAgICAgIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0aW5nIHRlcm0sIGZvdW5kICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm0gPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIHZhciBsZXhlbWUgPSBwYXJzZXIuY29uc3VtZUxleGVtZSgpO1xuXG4gIGlmIChsZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLnRlcm0gPSBsZXhlbWUuc3RyLnRvTG93ZXJDYXNlKCk7XG5cbiAgaWYgKGxleGVtZS5zdHIuaW5kZXhPZihcIipcIikgIT0gLTEpIHtcbiAgICBwYXJzZXIuY3VycmVudENsYXVzZS51c2VQaXBlbGluZSA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpO1xuXG4gIGlmIChuZXh0TGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZDtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2U7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1Q6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0O1xuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGVkaXREaXN0YW5jZSA9IHBhcnNlSW50KGxleGVtZS5zdHIsIDEwKTtcblxuICB2YXIgZXJyb3JNZXNzYWdlO1xuICBpZiAoaXNOYU4oZWRpdERpc3RhbmNlKSkge1xuICAgIGVycm9yTWVzc2FnZSA9IFwiZWRpdCBkaXN0YW5jZSBtdXN0IGJlIG51bWVyaWNcIjtcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmVkaXREaXN0YW5jZSA9IGVkaXREaXN0YW5jZTtcblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQm9vc3Q7XG4gICAgZGVmYXVsdDpcbiAgICAgIGVycm9yTWVzc2FnZSA9IFwiVW5leHBlY3RlZCBsZXhlbWUgdHlwZSAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZCk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgdmFyIGVycm9yTWVzc2FnZTtcbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGJvb3N0ID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApO1xuXG4gIGlmIChpc05hTihib29zdCkpIHtcbiAgICBlcnJvck1lc3NhZ2UgPSBcImJvb3N0IG11c3QgYmUgbnVtZXJpY1wiO1xuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuYm9vc3QgPSBib29zdDtcblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQm9vc3Q7XG4gICAgZGVmYXVsdDpcbiAgICAgIGVycm9yTWVzc2FnZSA9IFwiVW5leHBlY3RlZCBsZXhlbWUgdHlwZSAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZCk7XG4gIH1cbn1cblxuICAvKipcbiAgICogZXhwb3J0IHRoZSBtb2R1bGUgdmlhIEFNRCwgQ29tbW9uSlMgb3IgYXMgYSBicm93c2VyIGdsb2JhbFxuICAgKiBFeHBvcnQgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICAgKi9cbiAgOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgIGRlZmluZShmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgLyoqXG4gICAgICAgKiBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAqIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgKiBsaWtlIE5vZGUuXG4gICAgICAgKi9cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgcm9vdC5sdW5yID0gZmFjdG9yeSgpO1xuICAgIH1cbiAgfSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogSnVzdCByZXR1cm4gYSB2YWx1ZSB0byBkZWZpbmUgdGhlIG1vZHVsZSBleHBvcnQuXG4gICAgICogVGhpcyBleGFtcGxlIHJldHVybnMgYW4gb2JqZWN0LCBidXQgdGhlIG1vZHVsZVxuICAgICAqIGNhbiByZXR1cm4gYSBmdW5jdGlvbiBhcyB0aGUgZXhwb3J0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuIGx1bnI7XG4gIH0pKTtcbn0pKCk7XG5cblxuICAvLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3BzZXVkb255bTExNy9MZXZlbnNodGVpblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3Rvcnkpe1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KHJvb3QpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyb290KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LkxldmVuc2h0ZWluID0gZmFjdG9yeShyb290KTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uKHJvb3Qpe1xuXG4gICAgZnVuY3Rpb24gZm9yRWFjaCggYXJyYXksIGZuICkgeyB2YXIgaSwgbGVuZ3RoO1xuICAgICAgICBpID0gLTE7XG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKCArK2kgPCBsZW5ndGggKVxuICAgICAgICAgICAgZm4oIGFycmF5WyBpIF0sIGksIGFycmF5ICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFwKCBhcnJheSwgZm4gKSB7IHZhciByZXN1bHQ7XG4gICAgICAgIHJlc3VsdCA9IEFycmF5KCBhcnJheS5sZW5ndGggKTtcbiAgICAgICAgZm9yRWFjaCggYXJyYXksIGZ1bmN0aW9uICggdmFsLCBpLCBhcnJheSApIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKCBmbiggdmFsLCBpLCBhcnJheSApICk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZHVjZSggYXJyYXksIGZuLCBhY2N1bXVsYXRvciApIHtcbiAgICAgICAgZm9yRWFjaCggYXJyYXksIGZ1bmN0aW9uKCB2YWwsIGksIGFycmF5ICkge1xuICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBmbiggdmFsLCBpLCBhcnJheSApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8vIEZvciBzdHJpbmcgbW9kZVxuICAgIGZ1bmN0aW9uIGdldENoYXIoc3RyLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5jaGFyQXQoaWR4KTtcbiAgICB9XG5cbiAgICAvLyBGb3IgYXJyYXkgbW9kZVxuICAgIGZ1bmN0aW9uIGdldEFycmF5TWVtYmVyKGFyciwgaWR4KSB7XG4gICAgICAgIHJldHVybiBhcnJbaWR4XTtcbiAgICB9XG5cbiAgICAvLyBMZXZlbnNodGVpbiBkaXN0YW5jZVxuICAgIGZ1bmN0aW9uIExldmVuc2h0ZWluKCBzdHJfbSwgc3RyX24gKSB7XG4gICAgICAgIHZhciBwcmV2aW91cywgY3VycmVudCwgbWF0cml4LCBnZXRFbGVtO1xuICAgICAgICAvLyBTZXQgdG8gc3RyaW5nIG9yIGFycmF5IG1vZGVcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJfbSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Ygc3RyX24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGdldEVsZW0gPSBnZXRDaGFyO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdHJfbSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygc3RyX24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGdldEVsZW0gPSBnZXRBcnJheU1lbWJlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IFwiTGV2ZW5zdGh0ZWluOiBpbnB1dCBtdXN0IGJlIHR3byBzdHJpbmdzIG9yIHR3byBhcnJheXNcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb25zdHJ1Y3RvclxuICAgICAgICBtYXRyaXggPSB0aGlzLl9tYXRyaXggPSBbXTtcblxuICAgICAgICAvLyBTYW5pdHkgY2hlY2tzXG4gICAgICAgIGlmICggc3RyX20gPT0gc3RyX24gKSB7XG4gICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IDA7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIH1lbHNlIGlmICggc3RyX20gPT09ICcnICl7XG4gICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHN0cl9uLmxlbmd0aDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgfWVsc2UgaWYgKCBzdHJfbiA9PT0gJycgKSB7XG4gICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHN0cl9tLmxlbmd0aDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgLy8gRGFuZ2VyIFdpbGwgUm9iaW5zb25cbiAgICAgICAgICAgIHByZXZpb3VzID0gWyAwIF07XG4gICAgICAgICAgICBmb3JFYWNoKCBzdHJfbSwgZnVuY3Rpb24odixpKXtcbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICBwcmV2aW91c1tpXSA9IGk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWF0cml4WzBdID0gcHJldmlvdXM7XG4gICAgICAgICAgICBmb3JFYWNoKCBzdHJfbiwgZnVuY3Rpb24oIG5fdmFsLCBuX2lkeCApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gWyArK25faWR4IF07XG4gICAgICAgICAgICAgICAgZm9yRWFjaCggc3RyX20sIGZ1bmN0aW9uKCBtX3ZhbCwgbV9pZHggKSB7XG4gICAgICAgICAgICAgICAgICAgIG1faWR4Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmICggZ2V0RWxlbShzdHJfbSwgbV9pZHggLSAxKSA9PSBnZXRFbGVtKHN0cl9uLCBuX2lkeCAtIDEpIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbIG1faWR4IF0gPSBwcmV2aW91c1sgbV9pZHggLSAxIF07XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbIG1faWR4IF0gPSBNYXRoLm1pbiggcHJldmlvdXNbIG1faWR4IF0gKyAxLCBjdXJyZW50WyBtX2lkeCAtIDEgXSArIDEsIHByZXZpb3VzWyBtX2lkeCAtIDEgXSArIDEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICBtYXRyaXhbIG1hdHJpeC5sZW5ndGggXSA9IHByZXZpb3VzO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBjdXJyZW50WyBjdXJyZW50Lmxlbmd0aCAtIDEgXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGV2ZW5zaHRlaW4ucHJvdG90eXBlLnRvU3RyaW5nID0gTGV2ZW5zaHRlaW4ucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICggbm9fcHJpbnQgKSB7IHZhciBtYXRyaXgsIG1heCwgYnVmZiwgc2VwLCByb3dzO1xuICAgICAgICBtYXRyaXggPSB0aGlzLmdldE1hdHJpeCgpO1xuICAgICAgICBtYXggPSByZWR1Y2UoIG1hdHJpeCxmdW5jdGlvbiggbSwgbyApIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCggbSwgcmVkdWNlKCBvLCBNYXRoLm1heCwgMCApICk7XG4gICAgICAgIH0sIDAgKTtcbiAgICAgICAgYnVmZiA9IEFycmF5KCAoIG1heCArICcnICkubGVuZ3RoICkuam9pbiggJyAnICk7XG5cbiAgICAgICAgc2VwID0gW107XG4gICAgICAgIHdoaWxlICggc2VwLmxlbmd0aCA8IChtYXRyaXhbMF0gJiYgbWF0cml4WzBdLmxlbmd0aCB8fCAwKSApXG4gICAgICAgICAgICBzZXBbIHNlcC5sZW5ndGggXSA9IEFycmF5KCBidWZmLmxlbmd0aCArIDEgKS5qb2luKCAnLScgKTtcbiAgICAgICAgc2VwID0gc2VwLmpvaW4oICctKycgKSArICctJztcblxuICAgICAgICByb3dzID0gbWFwKCBtYXRyaXgsIGZ1bmN0aW9uKCByb3cgKSB7IHZhciBjZWxscztcbiAgICAgICAgICAgIGNlbGxzID0gbWFwKCByb3csIGZ1bmN0aW9uKCBjZWxsICkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoIGJ1ZmYgKyBjZWxsICkuc2xpY2UoIC0gYnVmZi5sZW5ndGggKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGxzLmpvaW4oICcgfCcgKSArICcgJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJvd3Muam9pbiggXCJcXG5cIiArIHNlcCArIFwiXFxuXCIgKTtcbiAgICB9O1xuXG4gICAgLy8gc3RlcHMgdG8gZ2V0IGZyb20gc3RyaW5nIDEgdG8gc3RyaW5nIDJcbiAgICBMZXZlbnNodGVpbi5wcm90b3R5cGUuZ2V0U3RlcHMgPSBmdW5jdGlvbigpICAgICB7XG4gICAgICAgIHZhciBzdGVwcywgbWF0cml4LCB4LCB5LCB1LCBsLCBkLCBtaW47XG4gICAgICAgIHN0ZXBzID0gW107XG4gICAgICAgIG1hdHJpeCA9IHRoaXMuZ2V0TWF0cml4KCk7XG4gICAgICAgIHggPSBtYXRyaXgubGVuZ3RoIC0gMTtcbiAgICAgICAgeSA9IG1hdHJpeFswXS5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSh4ICE9PSAwIHx8IHkgIT09IDApICAgICB7XG4gICAgICAgICAgICB1ID0geSA+IDAgPyBtYXRyaXhbeF1beS0xXSA6IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgICAgICBsID0geCA+IDAgPyBtYXRyaXhbeC0xXVt5XSA6IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgICAgICBkID0geSA+IDAgJiYgeCA+IDAgPyBtYXRyaXhbeC0xXVt5LTFdIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKHUsIGwsIGQpO1xuICAgICAgICAgICAgaWYobWluID09PSBkKSB7XG4gICAgICAgICAgICAgICAgaWYoZCA8IG1hdHJpeFt4XVt5XSkge1xuICAgICAgICAgICAgICAgICAgICBzdGVwcy5wdXNoKFsnc3Vic3RpdHV0ZScsIHksIHhdKTtcbiAgICAgICAgICAgICAgICB9Ly8gIGVsc2Ugc3RlcHMucHVzaChbJ25vLW9wJywgeSwgeF0pXG4gICAgICAgICAgICAgICAgeC0tO1xuICAgICAgICAgICAgICAgIHktLTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihtaW4gPT09IGwpIHtcbiAgICAgICAgICAgICAgICBzdGVwcy5wdXNoKFsnaW5zZXJ0JywgeSwgeF0pO1xuICAgICAgICAgICAgICAgIHgtLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RlcHMucHVzaChbJ2RlbGV0ZScsIHksIHhdKTtcbiAgICAgICAgICAgICAgICB5LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ZXBzO1xuICAgIH07XG5cbiAgICBMZXZlbnNodGVpbi5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWF0cml4LnNsaWNlKCk7XG4gICAgfTtcblxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGV2ZW5zaHRlaW47XG5cbn0pKTtcblxuXG4gIC8vVGhpcyBpcyB0aGUgbWFpbiBwbHVnaW4gZGVmaW5pdGlvblxuICAkLmZuLmdob3N0SHVudGVyICA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG4gICAgLy9IZXJlIHdlIHVzZSBqUXVlcnkncyBleHRlbmQgdG8gc2V0IGRlZmF1bHQgdmFsdWVzIGlmIHRoZXkgd2VyZW4ndCBzZXQgYnkgdGhlIHVzZXJcbiAgICB2YXIgb3B0cyAgICA9ICQuZXh0ZW5kKCB7fSwgJC5mbi5naG9zdEh1bnRlci5kZWZhdWx0cywgb3B0aW9ucyApO1xuICAgIGlmKCBvcHRzLnJlc3VsdHMgKVxuICAgIHtcbiAgICAgIHBsdWdpbk1ldGhvZHMuaW5pdCggdGhpcyAsIG9wdHMgKTtcbiAgICAgIHJldHVybiBwbHVnaW5NZXRob2RzO1xuICAgIH1cbiAgfTtcblxuICAvLyBJZiB0aGUgR2hvc3QgaW5zdGFuY2UgaXMgaW4gYSBzdWJwYXRoIG9mIHRoZSBzaXRlLCBzZXQgc3VicGF0aFxuICAvLyBhcyB0aGUgcGF0aCB0byB0aGUgc2l0ZSB3aXRoIGEgbGVhZGluZyBzbGFzaCBhbmQgbm8gdHJhaWxpbmcgc2xhc2hcbiAgLy8gKGkuZS4gXCIvcGF0aC90by9pbnN0YW5jZVwiKS5cbiAgJC5mbi5naG9zdEh1bnRlci5kZWZhdWx0cyA9IHtcbiAgICByZXN1bHRzRGF0YSAgICAgOiBmYWxzZSxcbiAgICBvblBhZ2VMb2FkICAgICAgOiB0cnVlLFxuICAgIG9uS2V5VXAgICAgICAgOiBmYWxzZSxcbiAgICByZXN1bHRfdGVtcGxhdGUgICA6IFwiPGEgaWQ9J2doLXt7cmVmfX0nIGNsYXNzPSdnaC1zZWFyY2gtaXRlbScgaHJlZj0ne3tsaW5rfX0nPjxwPjxoMj57e3RpdGxlfX08L2gyPjxoND57e3ByZXR0eVB1YkRhdGV9fTwvaDQ+PC9wPjwvYT5cIixcbiAgICBpbmZvX3RlbXBsYXRlICAgOiBcIjxwPk51bWJlciBvZiBwb3N0cyBmb3VuZDoge3thbW91bnR9fTwvcD5cIixcbiAgICBkaXNwbGF5U2VhcmNoSW5mbyA6IHRydWUsXG4gICAgemVyb1Jlc3VsdHNJbmZvICAgOiB0cnVlLFxuICAgIGJlZm9yZSAgICAgICAgOiBmYWxzZSxcbiAgICBvbkNvbXBsZXRlICAgICAgOiBmYWxzZSxcbiAgICBpbmNsdWRlcGFnZXMgICAgOiBmYWxzZSxcbiAgICBmaWx0ZXJmaWVsZHMgICAgOiBmYWxzZSxcbiAgICBzdWJwYXRoICAgICAgIDogXCJcIixcbiAgICBpdGVtX3ByZXByb2Nlc3NvciA6IGZhbHNlLFxuICAgIGluZGV4aW5nX3N0YXJ0ICAgIDogZmFsc2UsXG4gICAgaW5kZXhpbmdfZW5kICAgIDogZmFsc2VcbiAgfTtcbiAgdmFyIHByZXR0eURhdGUgPSBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIGQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICB2YXIgbW9udGhOYW1lcyA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdO1xuICAgICAgcmV0dXJuIGQuZ2V0RGF0ZSgpICsgJyAnICsgbW9udGhOYW1lc1tkLmdldE1vbnRoKCldICsgJyAnICsgZC5nZXRGdWxsWWVhcigpO1xuICB9O1xuXG4gIHZhciBnZXRTdWJwYXRoS2V5ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFwvLywgXCJcIikucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgfTtcblxuICB2YXIgbGFzdFRpbWVvdXRJRCA9IG51bGw7XG5cbiAgLy8gV2UgYWRkIGEgcHJlZml4IHRvIG5ldyBJRHMgYW5kIHJlbW92ZSBpdCBhZnRlciBhIHNldCBvZlxuICAvLyB1cGRhdGVzIGlzIGNvbXBsZXRlLCBqdXN0IGluIGNhc2UgYSBicm93c2VyIGZyZWFrcyBvdmVyXG4gIC8vIGR1cGxpY2F0ZSBJRHMgaW4gdGhlIERPTS5cbiAgdmFyIHNldHRsZUlEcyA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5naC1zZWFyY2gtaXRlbScpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHZhciBvbGRBdHRyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICB2YXIgbmV3QXR0ciA9IG9sZEF0dHIucmVwbGFjZSgvXm5ldy0vLCBcIlwiKTtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpZCcsIG5ld0F0dHIpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciB1cGRhdGVTZWFyY2hMaXN0ID0gZnVuY3Rpb24obGlzdEl0ZW1zLCBhcGlEYXRhLCBzdGVwcykge1xuICAgIGZvciAodmFyIGk9MCxpbGVuPXN0ZXBzLmxlbmd0aDtpPGlsZW47aSsrKSB7XG4gICAgICB2YXIgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgaWYgKHN0ZXBbMF0gPT0gXCJkZWxldGVcIikge1xuICAgICAgICBsaXN0SXRlbXMuZXEoc3RlcFsxXS0xKS5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBsdW5ycmVmID0gYXBpRGF0YVtzdGVwWzJdLTFdLnJlZjtcbiAgICAgICAgdmFyIHBvc3REYXRhID0gdGhpcy5ibG9nRGF0YVtsdW5ycmVmXTtcbiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLmZvcm1hdCh0aGlzLnJlc3VsdF90ZW1wbGF0ZSxwb3N0RGF0YSk7XG4gICAgICAgIGlmIChzdGVwWzBdID09PSBcInN1YnN0aXR1dGVcIikge1xuICAgICAgICAgIGxpc3RJdGVtcy5lcShzdGVwWzFdLTEpLnJlcGxhY2VXaXRoKGh0bWwpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZXBbMF0gPT09IFwiaW5zZXJ0XCIpIHtcbiAgICAgICAgICB2YXIgcG9zO1xuICAgICAgICAgIGlmIChzdGVwWzFdID09PSAwKSB7XG4gICAgICAgICAgICBwb3MgPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSAoc3RlcFsxXS0xKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGlzdEl0ZW1zLmVxKHBvcykuYWZ0ZXIoaHRtbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc2V0dGxlSURzKCk7XG4gIH07XG5cbiAgdmFyIGdyYWJBbmRJbmRleCA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gY29uc29sZS5sb2coJ2dob3N0SHVudGVyOiBncmFiQW5kSW5kZXgnKTtcbiAgICB0aGlzLmJsb2dEYXRhID0ge307XG4gICAgdGhpcy5sYXRlc3RQb3N0ID0gMDtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgbGltaXQ6IFwiYWxsXCIsXG4gICAgICBpbmNsdWRlOiBcInRhZ3NcIixcbiAgICAgIGZvcm1hdHM6IFtcInBsYWludGV4dFwiXVxuICAgIH07XG4gICAgaWYgICggdGhpcy5pbmNsdWRlcGFnZXMgKXtcbiAgICAgIHBhcmFtcy5maWx0ZXI9XCIocGFnZTp0cnVlLHBhZ2U6ZmFsc2UpXCI7XG4gICAgfVxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgJC5nZXQoZ2hvc3QudXJsLmFwaSgncG9zdHMnLHBhcmFtcykpLmRvbmUoZnVuY3Rpb24oZGF0YSl7XG4gICAgICB2YXIgaWR4U3JjID0gZGF0YS5wb3N0cztcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiZ2hvc3RIdW50ZXI6IGluZGV4aW5nIGFsbCBwb3N0c1wiKVxuICAgICAgbWUuaW5kZXggPSBsdW5yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZWYoJ2lkJyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ3RpdGxlJyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ3BsYWludGV4dCcpO1xuICAgICAgICB0aGlzLmZpZWxkKCdwdWJEYXRlJyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ3RhZycpO1xuICAgICAgICBpZHhTcmMuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXlJdGVtKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJzdGFydCBpbmRleGluZyBhbiBpdGVtOiBcIiArIGFycmF5SXRlbS5pZCk7XG4gICAgICAgICAgLy8gVHJhY2sgdGhlIGxhdGVzdCB2YWx1ZSBvZiB1cGRhdGVkX2F0LCAgdG8gc3Rhc2ggaW4gbG9jYWxTdG9yYWdlXG4gICAgICAgICAgdmFyIGl0ZW1EYXRlID0gbmV3IERhdGUoYXJyYXlJdGVtLnVwZGF0ZWRfYXQpLmdldFRpbWUoKTtcbiAgICAgICAgICB2YXIgcmVjb3JkZWREYXRlID0gbmV3IERhdGUobWUubGF0ZXN0UG9zdCkuZ2V0VGltZSgpO1xuICAgICAgICAgIGlmIChpdGVtRGF0ZSA+IHJlY29yZGVkRGF0ZSkge1xuICAgICAgICAgICAgbWUubGF0ZXN0UG9zdCA9IGFycmF5SXRlbS51cGRhdGVkX2F0O1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdGFnX2FyciA9IGFycmF5SXRlbS50YWdzLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICByZXR1cm4gdi5uYW1lOyAvLyBgdGFnYCBvYmplY3QgaGFzIGFuIGBuYW1lYCBwcm9wZXJ0eSB3aGljaCBpcyB0aGUgdmFsdWUgb2YgdGFnLiBJZiB5b3UgYWxzbyB3YW50IG90aGVyIGluZm8sIGNoZWNrIEFQSSBhbmQgZ2V0IHRoYXQgcHJvcGVydHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZihhcnJheUl0ZW0ubWV0YV9kZXNjcmlwdGlvbiA9PT0gbnVsbCkgeyBhcnJheUl0ZW0ubWV0YV9kZXNjcmlwdGlvbiA9ICcnOyB9XG4gICAgICAgICAgdmFyIGNhdGVnb3J5ID0gdGFnX2Fyci5qb2luKFwiLCBcIik7XG4gICAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA8IDEpe1xuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcGFyc2VkRGF0YSAgPSB7XG4gICAgICAgICAgICBpZCAgICAgIDogU3RyaW5nKGFycmF5SXRlbS5pZCksXG4gICAgICAgICAgICB0aXRsZSAgICAgOiBTdHJpbmcoYXJyYXlJdGVtLnRpdGxlKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogU3RyaW5nKGFycmF5SXRlbS5jdXN0b21fZXhjZXJwdCksXG4gICAgICAgICAgICBwbGFpbnRleHQgICA6IFN0cmluZyhhcnJheUl0ZW0ucGxhaW50ZXh0KSxcbiAgICAgICAgICAgIHB1YkRhdGUgICA6IFN0cmluZyhhcnJheUl0ZW0ucHVibGlzaGVkX2F0KSxcbiAgICAgICAgICAgIHRhZyAgICAgOiBjYXRlZ29yeVxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5hZGQocGFyc2VkRGF0YSk7XG4gICAgICAgICAgdmFyIGxvY2FsVXJsID0gbWUuc3VicGF0aCArIGFycmF5SXRlbS51cmw7XG4gICAgICAgICAgbWUuYmxvZ0RhdGFbYXJyYXlJdGVtLmlkXSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiBhcnJheUl0ZW0udGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYXJyYXlJdGVtLm1ldGFfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwdWJEYXRlOiBwcmV0dHlEYXRlKHBhcnNlZERhdGEucHViRGF0ZSksXG4gICAgICAgICAgICBsaW5rOiBsb2NhbFVybCxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ19hcnJcbiAgICAgICAgICB9O1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbWV0YWRhdGEgXCJwcmVcIi1wcm9jZXNzb3IgZm9yIHRoZSBpdGVtLCBydW4gaXQgaGVyZS5cbiAgICAgICAgICBpZiAobWUuaXRlbV9wcmVwcm9jZXNzb3IpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWUuYmxvZ0RhdGFbYXJyYXlJdGVtLmlkXSwgbWUuaXRlbV9wcmVwcm9jZXNzb3IoYXJyYXlJdGVtKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZG9uZSBpbmRleGluZyB0aGUgaXRlbVwiKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBzdWJwYXRoS2V5ID0gZ2V0U3VicGF0aEtleShtZS5zdWJwYXRoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfbHVuckluZGV4XCIpLCBKU09OLnN0cmluZ2lmeShtZS5pbmRleCkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9ibG9nRGF0YVwiKSwgSlNPTi5zdHJpbmdpZnkobWUuYmxvZ0RhdGEpKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfbGF0ZXN0UG9zdFwiKSwgbWUubGF0ZXN0UG9zdCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcImdob3N0SHVudGVyOiBzYXZlIHRvIGxvY2FsU3RvcmFnZSBmYWlsZWQ6IFwiICsgZSk7XG4gICAgICB9XG4gICAgICBpZiAobWUuaW5kZXhpbmdfZW5kKSB7XG4gICAgICAgIG1lLmluZGV4aW5nX2VuZCgpO1xuICAgICAgfVxuICAgICAgbWUuaXNJbml0ID0gdHJ1ZTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcGx1Z2luTWV0aG9kcyA9IHtcblxuICAgIGlzSW5pdCAgICAgIDogZmFsc2UsXG5cbiAgICBpbml0ICAgICAgOiBmdW5jdGlvbiggdGFyZ2V0ICwgb3B0cyApe1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRzKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2hvc3RIdW50ZXI6IGluaXRcIik7XG4gICAgICB2YXIgbWlhbSA9IGZ1bmN0aW9uKCl7fTtcbiAgICAgIGlmICggb3B0cy5vblBhZ2VMb2FkICkge1xuICAgICAgICBtaWFtID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgdGhhdC5sb2FkQVBJKCk7XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KG1pYW0sIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LmZvY3VzKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdGhhdC5sb2FkQVBJKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQuY2xvc2VzdChcImZvcm1cIikuc3VibWl0KGZ1bmN0aW9uKGUpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoYXQuZmluZCh0YXJnZXQudmFsKCkpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmKCBvcHRzLm9uS2V5VXAgKSB7XG4gICAgICAgIC8vIEluIHNlYXJjaC1hcy15b3UtdHlwZSBtb2RlLCB0aGUgRW50ZXIga2V5IGlzIG1lYW5pbmdsZXNzLFxuICAgICAgICAvLyBzbyB3ZSBkaXNhYmxlIGl0IGluIHRoZSBzZWFyY2ggZmllbGQuIElmIGVuYWJsZWQsIHNvbWUgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCBzYXZlIGRhdGEgdG8gaGlzdG9yeSAoZXZlbiB3aGVuIGF1dG9jb21wbGV0ZT1cImZhbHNlXCIpLCB3aGljaFxuICAgICAgICAvLyBpcyBhbiBpbnRydXNpdmUgaGVhZGFjaGUsIHBhcnRpY3VsYXJseSBvbiBtb2JpbGUuXG4gICAgICAgIHRhcmdldC5rZXlkb3duKGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGFyZ2V0LmtleXVwKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgdGhhdC5maW5kKHRhcmdldC52YWwoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICB9LFxuXG4gICAgbG9hZEFQSSAgICAgOiBmdW5jdGlvbigpe1xuICAgICAgLy8gY29uc29sZS5sb2coJ2dob3N0SHVudGVyOiBsb2FkQVBJJyk7XG4gICAgICBpZighdGhpcy5pc0luaXQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2dob3N0SHVudGVyOiB0aGlzLmlzSW5pdCBpcyB0cnVlJyk7XG4gICAgICAgIGlmICh0aGlzLmluZGV4aW5nX3N0YXJ0KSB7XG4gICAgICAgICAgdGhpcy5pbmRleGluZ19zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGlzSW5pdCBpcyBmYWxzeSwgY2hlY2sgZm9yIGRhdGEgaW4gbG9jYWxTdG9yZSxcbiAgICAgICAgLy8gcGFyc2UgaW50byBtZW1vcnksIGFuZCBkZWNsYXJlIGlzSW5pdCB0byBiZSB0cnVlLlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBzdWJwYXRoS2V5ID0gZ2V0U3VicGF0aEtleSh0aGlzLnN1YnBhdGgpO1xuICAgICAgICAgIHRoaXMuaW5kZXggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sdW5ySW5kZXhcIikpO1xuICAgICAgICAgIHRoaXMuYmxvZ0RhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9ibG9nRGF0YVwiKSk7XG4gICAgICAgICAgdGhpcy5sYXRlc3RQb3N0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfbGF0ZXN0UG9zdFwiKSk7XG4gICAgICAgICAgaWYgKHRoaXMubGF0ZXN0UG9zdCAmJiB0aGlzLmluZGV4ICYmIHRoaXMuYmxvZ0RhdGEpIHtcbiAgICAgICAgICAgIHRoaXMubGF0ZXN0UG9zdCA9IHRoaXMubGF0ZXN0UG9zdDtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSBsdW5yLkluZGV4LmxvYWQoSlNPTi5wYXJzZSh0aGlzLmluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLmJsb2dEYXRhID0gSlNPTi5wYXJzZSh0aGlzLmJsb2dEYXRhKTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgIGNvbnNvbGUud2FybihcImdob3N0SHVudGVyOiByZXRyaWV2ZSBmcm9tIGxvY2FsU3RvcmFnZSBmYWlsZWQ6IFwiICsgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzSW5pdCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IHRoaXMuaXNJbml0IHJlY2hlY2sgaXMgdHJ1ZScpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgbmV3IG9yIGVkaXRlZCBwb3N0c1xuICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgIGxpbWl0OiBcImFsbFwiLFxuICAgICAgICAgIGZpbHRlcjogXCJ1cGRhdGVkX2F0Oj5cXCdcIiArIHRoaXMubGF0ZXN0UG9zdC5yZXBsYWNlKC9cXC4uKi8sIFwiXCIpLnJlcGxhY2UoL1QvLCBcIiBcIikgKyBcIlxcJ1wiLFxuICAgICAgICAgIGZpZWxkczogXCJpZFwiXG4gICAgICAgIH07XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICQuZ2V0KGdob3N0LnVybC5hcGkoJ3Bvc3RzJywgcGFyYW1zKSkuZG9uZShmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICBpZiAoZGF0YS5wb3N0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBncmFiQW5kSW5kZXguY2FsbChtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtZS5pbmRleGluZ19lbmQpIHtcbiAgICAgICAgICAgICAgbWUuaW5kZXhpbmdfZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZS5pc0luaXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IHRoaXMuaXNJbml0IHJlY2hlY2sgaXMgZmFsc2UnKTtcbiAgICAgICAgZ3JhYkFuZEluZGV4LmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcblxuXG4gICAgZmluZCAgICAgIDogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgY2xlYXJUaW1lb3V0KGxhc3RUaW1lb3V0SUQpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IFwiXCI7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsYXN0VGltZW91dElEID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gUXVlcnkgc3RyYXRlZ3kgaXMgbGlmdGVkIGZyb20gY29tbWVudHMgb24gYSBsdW5yLmpzIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vb2xpdmVybm4vbHVuci5qcy9pc3N1ZXMvMjU2XG4gICAgICAgIHZhciB0aGluZ3NGb3VuZCA9IFtdO1xuICAgICAgICAvLyBUaGUgcXVlcnkgaW50ZXJmYWNlIGV4cGVjdHMgc2luZ2xlIHRlcm1zLCBzbyB3ZSBzcGxpdC5cbiAgICAgICAgdmFyIHZhbHVlU3BsaXQgPSB2YWx1ZS5zcGxpdCgvXFxzKy8pO1xuXG4gICAgICAgIGZvciAodmFyIGk9MCxpbGVuPXZhbHVlU3BsaXQubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgICAgICAvLyBGZXRjaCBhIGxpc3Qgb2YgbWF0Y2hlcyBmb3IgZWFjaCB0ZXJtLlxuICAgICAgICAgIHZhciB2ID0gdmFsdWVTcGxpdFtpXTtcbiAgICAgICAgICBpZiAoIXYpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaW5nc0ZvdW5kLnB1c2godGhpcy5pbmRleC5xdWVyeShmdW5jdGlvbiAocSkge1xuICAgICAgICAgICAgLy8gRm9yIGFuIGV4cGxhbmF0aW9uIG9mIGx1bnIgaW5kZXhpbmcgb3B0aW9ucywgc2VlIHRoZSBsdW5yLmpzXG4gICAgICAgICAgICAvLyBkb2N1bWVudGF0aW9uIGF0IGh0dHBzOi8vbHVucmpzLmNvbS9kb2NzL2x1bnIuUXVlcnkuaHRtbCN+Q2xhdXNlXG5cbiAgICAgICAgICAgIC8vIGxvb2sgZm9yIGFuIGV4YWN0IG1hdGNoIGFuZCBhcHBseSBhIGxhcmdlIHBvc2l0aXZlIGJvb3N0XG4gICAgICAgICAgICBxLnRlcm0odiwge1xuICAgICAgICAgICAgICB1c2VQaXBlbGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgYm9vc3Q6IDEwMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gbG9vayBmb3IgdGVybXMgdGhhdCBtYXRjaCB0aGUgYmVnaW5uaW5nIG9mIHRoaXMgcXVlcnlUZXJtIGFuZCBhcHBseSBhIG1lZGl1bSBib29zdFxuICAgICAgICAgICAgcS50ZXJtKHYsIHtcbiAgICAgICAgICAgICAgdXNlUGlwZWxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICBib29zdDogMTAsXG4gICAgICAgICAgICAgIHdpbGRjYXJkOiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGxvb2sgZm9yIHRlcm1zIHRoYXQgbWF0Y2ggd2l0aCBhbiBlZGl0IGRpc3RhbmNlIG9mIDEgYW5kIGFwcGx5IGEgc21hbGwgYm9vc3RcbiAgICAgICAgICAgIHEudGVybSh2LCB7XG4gICAgICAgICAgICAgIHVzZVBpcGVsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgZWRpdERpc3RhbmNlOiAxLFxuICAgICAgICAgICAgICBib29zdDogMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWFyY2hSZXN1bHQ7XG4gICAgICAgIGlmICh0aGluZ3NGb3VuZC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgd2UgaGFkIG11bHRpcGxlIHRlcm1zLCB3ZSdsbCBoYXZlIG11bHRpcGxlIGxpc3RzLiBXZSBmaWx0ZXJcbiAgICAgICAgICAvLyB0aGVtIGhlcmUgdG8gdXNlIG9ubHkgaXRlbXMgdGhhdCBwcm9kdWNlIHJldHVybnMgZm9yIGFsbFxuICAgICAgICAgIC8vIHRlcm1zLiBUaGlzIHNwb29mcyBhbiBBTkQgam9pbiBiZXR3ZWVuIHRlcm1zLCB3aGljaCBsdW5yLmpzIGNhbid0XG4gICAgICAgICAgLy8geWV0IGRvIGludGVybmFsbHkuXG4gICAgICAgICAgLy8gQnkgdXNpbmcgdGhlIGZpcnN0IGxpc3Qgb2YgaXRlbXMgYXMgbWFzdGVyLCB3ZSBnZXQgd2VpZ2h0aW5nc1xuICAgICAgICAgIC8vIGJhc2VkIG9uIHRoZSBmaXJzdCB0ZXJtIGVudGVyZWQsIHdoaWNoIGlzIG1vcmUgb3IgbGVzc1xuICAgICAgICAgIC8vIHdoYXQgd2Ugd291bGQgZXhwZWN0LlxuICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IHRoaW5nc0ZvdW5kWzBdO1xuICAgICAgICAgIHRoaW5nc0ZvdW5kID0gdGhpbmdzRm91bmQuc2xpY2UoMSk7XG4gICAgICAgICAgZm9yICggaT1zZWFyY2hSZXN1bHQubGVuZ3RoLTE7aT4tMTtpLS0pIHtcbiAgICAgICAgICAgIHZhciByZWYgPSBzZWFyY2hSZXN1bHRbaV0ucmVmO1xuICAgICAgICAgICAgZm9yIChqPTAsamxlbj10aGluZ3NGb3VuZC5sZW5ndGg7ajxqbGVuO2orKykge1xuICAgICAgICAgICAgICB2YXIgb3RoZXJSZWZzID0ge307XG4gICAgICAgICAgICAgIGZvciAodmFyIGs9MCxrbGVuPXRoaW5nc0ZvdW5kW2pdLmxlbmd0aDtrPGtsZW47aysrKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJSZWZzW3RoaW5nc0ZvdW5kW2pdW2tdLnJlZl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghb3RoZXJSZWZzW3JlZl0pIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hSZXN1bHQgPSBzZWFyY2hSZXN1bHQuc2xpY2UoMCwgaSkuY29uY2F0KHNlYXJjaFJlc3VsdC5zbGljZShpKzEpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGluZ3NGb3VuZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYWQganVzdCBvbmUgdGVybSBhbmQgb25lIGxpc3QsIHJldHVybiB0aGF0LlxuICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IHRoaW5nc0ZvdW5kWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHRoZXJlIHdhcyBubyBzZWFyY2ggcmVzdWx0LCByZXR1cm4gYW4gZW1wdHkgbGlzdC5cbiAgICAgICAgICBzZWFyY2hSZXN1bHQgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHRzICAgICA9ICQodGhpcy5yZXN1bHRzKTtcbiAgICAgICAgdmFyIHJlc3VsdHNEYXRhICAgPSBbXTtcbiAgICAgICAgaWYgKHNlYXJjaFJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXN1bHRzLmVtcHR5KCk7XG4gICAgICAgICAgaWYgKHRoaXMuZGlzcGxheVNlYXJjaEluZm8gJiYgdGhpcy56ZXJvUmVzdWx0c0luZm8pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRoaXMuZm9ybWF0KHRoaXMuaW5mb190ZW1wbGF0ZSx7XCJhbW91bnRcIjowfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc3BsYXlTZWFyY2hJbmZvKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0cy5jaGlsZHJlbigpLmVxKDApLnJlcGxhY2VXaXRoKHRoaXMuZm9ybWF0KHRoaXMuaW5mb190ZW1wbGF0ZSx7XCJhbW91bnRcIjpzZWFyY2hSZXN1bHQubGVuZ3RofSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZCh0aGlzLmZvcm1hdCh0aGlzLmluZm9fdGVtcGxhdGUse1wiYW1vdW50XCI6c2VhcmNoUmVzdWx0Lmxlbmd0aH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmJlZm9yZSkge1xuICAgICAgICAgIHRoaXMuYmVmb3JlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdGhlIGJsb2dEYXRhIGZvciB0aGUgZnVsbCBzZXQsIGZvciBvbkNvbXBsZXRlXG4gICAgICAgIGZvciAoIGkgPSAwOyBpIDwgc2VhcmNoUmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGx1bnJyZWYgICA9IHNlYXJjaFJlc3VsdFtpXS5yZWY7XG4gICAgICAgICAgdmFyIHBvc3REYXRhICAgID0gdGhpcy5ibG9nRGF0YVtsdW5ycmVmXTtcbiAgICAgICAgICBpZiAocG9zdERhdGEpIHtcbiAgICAgICAgICAgIHBvc3REYXRhLnJlZiA9IGx1bnJyZWY7XG4gICAgICAgICAgICByZXN1bHRzRGF0YS5wdXNoKHBvc3REYXRhKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiZ2hvc3RIdW50ZXI6IGluZGV4L2RhdGEgbWlzbWF0Y2guIE91Y2guXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBHZXQgYW4gYXJyYXkgb2YgSURzIHByZXNlbnQgaW4gY3VycmVudCByZXN1bHRzXG4gICAgICAgIHZhciBsaXN0SXRlbXMgPSAkKCcuZ2gtc2VhcmNoLWl0ZW0nKTtcbiAgICAgICAgdmFyIGN1cnJlbnRSZWZzID0gbGlzdEl0ZW1zXG4gICAgICAgICAgLm1hcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWQuc2xpY2UoMyk7XG4gICAgICAgICAgfSkuZ2V0KCk7XG4gICAgICAgIGlmIChjdXJyZW50UmVmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBmb3IgKCBpPTAsaWxlbj1yZXN1bHRzRGF0YS5sZW5ndGg7aTxpbGVuO2krKykge1xuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQodGhpcy5mb3JtYXQodGhpcy5yZXN1bHRfdGVtcGxhdGUscmVzdWx0c0RhdGFbaV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0dGxlSURzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gR2V0IGFuIGFycmF5IG9mIElEcyBwcmVzZW50IGluIHNlYXJjaFJlc3VsdFxuICAgICAgICAgIHZhciBuZXdSZWZzID0gW107XG4gICAgICAgICAgZm9yICggaT0wLGlsZW49c2VhcmNoUmVzdWx0Lmxlbmd0aDtpPGlsZW47aSsrKSB7XG4gICAgICAgICAgICBuZXdSZWZzLnB1c2goc2VhcmNoUmVzdWx0W2ldLnJlZik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEdldCB0aGUgTGV2ZW5zaHRlaW4gc3RlcHMgbmVlZGVkIHRvIHRyYW5zZm9ybSBjdXJyZW50IGludG8gc2VhcmNoUmVzdWx0XG4gICAgICAgICAgdmFyIGxldmVuc2h0ZWluID0gbmV3IExldmVuc2h0ZWluKGN1cnJlbnRSZWZzLCBuZXdSZWZzKTtcbiAgICAgICAgICB2YXIgc3RlcHMgPSBsZXZlbnNodGVpbi5nZXRTdGVwcygpO1xuICAgICAgICAgIC8vIEFwcGx5IHRoZSBvcGVyYXRpb25zXG4gICAgICAgICAgdXBkYXRlU2VhcmNoTGlzdC5jYWxsKHRoaXMsIGxpc3RJdGVtcywgc2VhcmNoUmVzdWx0LCBzdGVwcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGlkeSB1cFxuICAgICAgICBpZih0aGlzLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICB0aGlzLm9uQ29tcGxldGUocmVzdWx0c0RhdGEpO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcyksIDEwMCk7XG4gICAgfSxcblxuICAgIGNsZWFyICAgICAgIDogZnVuY3Rpb24oKXtcbiAgICAgICQodGhpcy5yZXN1bHRzKS5lbXB0eSgpO1xuICAgICAgLy8gdGhpcy50YXJnZXQudmFsKFwiXCIpO1xuICAgIH0sXG5cbiAgICBmb3JtYXQgICAgICA6IGZ1bmN0aW9uICh0LCBkKSB7XG4gICAgICByZXR1cm4gdC5yZXBsYWNlKC97eyhbXnt9XSopfX0vZywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgdmFyIHIgPSBkW2JdO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHIgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiByID09PSAnbnVtYmVyJyA/IHIgOiBhO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG59KSggalF1ZXJ5ICk7XG4iLCIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbiAoJCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8qKlxuICAgICAqIGdldCBoZWFkZXIgbGV2ZWxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVyOiBoZWFkZXIncyB0YWcgbmFtZVxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqL1xuICAgIHZhciBnZXRMZXZlbCA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBoZWFkZXIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWNzID0gaGVhZGVyLm1hdGNoKC9cXGQvZyk7XG4gICAgICAgIHJldHVybiBkZWNzID8gTWF0aC5taW4uYXBwbHkobnVsbCwgZGVjcykgOiAxO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGUgb3JkZXJlZCBsaXN0XG4gICAgICogQHBhcmFtIHtqUXVlcnR9ICR3cmFwcGVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IGxpc3RcbiAgICAgKi9cbiAgICB2YXIgY3JlYXRlTGlzdCA9IGZ1bmN0aW9uICgkd3JhcHBlciwgY291bnQpIHtcbiAgICAgICAgd2hpbGUgKGNvdW50LS0pIHtcbiAgICAgICAgICAgICR3cmFwcGVyID0gJCgnPG9sLz4nKS5hcHBlbmRUbygkd3JhcHBlcik7XG5cbiAgICAgICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgICAgICR3cmFwcGVyID0gJCgnPGxpLz4nKS5hcHBlbmRUbygkd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJHdyYXBwZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBwb3NpdGlvbiBqdW1wIGJhY2tcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGN1cnJlbnRXcmFwcGVyOiBjdXJyZW50IGluc2VydCBwb2ludFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQ6IGRpc3RhbmNlIGJldHdlZW4gY3VycmVudCdzIGFuZCB0YXJnZXQncyBkZXB0aFxuICAgICAqXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSBpbnNlcnQgcG9pbnRcbiAgICAgKi9cbiAgICB2YXIganVtcEJhY2sgPSBmdW5jdGlvbiAoJGN1cnJlbnRXcmFwcGVyLCBvZmZzZXQpIHtcbiAgICAgICAgd2hpbGUgKG9mZnNldC0tKSB7XG4gICAgICAgICAgICAkY3VycmVudFdyYXBwZXIgPSAkY3VycmVudFdyYXBwZXIucGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGN1cnJlbnRXcmFwcGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzZXQgZWxlbWVudCBocmVmL2lkIGFuZCBjb250ZW50XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvdmVyd3JpdGU6IHdoZXRoZXIgb3ZlcndyaXRlIHNvdXJjZSBlbGVtZW50IGV4aXN0ZWQgaWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4OiBwcmVmaXggdG8gcHJlcGVuZCB0byBocmVmL2lkXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB2YXIgc2V0QXR0cnMgPSBmdW5jdGlvbiAob3ZlcndyaXRlLCBwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkc3JjLCAkdGFyZ2V0LCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAkc3JjLnRleHQoKTtcbiAgICAgICAgICAgIHZhciBwcmUgPSBwcmVmaXggKyAnLScgKyBpbmRleDtcbiAgICAgICAgICAgICR0YXJnZXQudGV4dChjb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIHNyYyA9ICRzcmNbMF07XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJHRhcmdldFswXTtcbiAgICAgICAgICAgIHZhciBpZCA9IG92ZXJ3cml0ZSA/IHByZSA6IChzcmMuaWQgfHwgcHJlKTtcblxuICAgICAgICAgICAgaWQgPSBlbmNvZGVVUklDb21wb25lbnQoaWQpO1xuXG4gICAgICAgICAgICBzcmMuaWQgPSBpZDtcbiAgICAgICAgICAgIHRhcmdldC5ocmVmID0gJyMnICsgaWQ7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGJ1aWxkIHRhYmxlIG9mIGNvbnRlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0gbGlzdFxuICAgICAqL1xuICAgIHZhciBidWlsZFRPQyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IG9wdGlvbnMuc2VsZWN0b3I7XG4gICAgICAgIHZhciBzY29wZSA9IG9wdGlvbnMuc2NvcGU7XG5cbiAgICAgICAgdmFyICRyZXQgPSAkKCc8b2wvPicpO1xuICAgICAgICB2YXIgJHdyYXBwZXIgPSAkcmV0O1xuICAgICAgICB2YXIgJGxhc3RMaSA9IG51bGw7XG5cbiAgICAgICAgdmFyIHByZXZEZXB0aCA9IGdldExldmVsKHNlbGVjdG9yKTtcbiAgICAgICAgdmFyIF9zZXRBdHRycyA9IHNldEF0dHJzKG9wdGlvbnMub3ZlcndyaXRlLCBvcHRpb25zLnByZWZpeCk7XG5cbiAgICAgICAgJChzY29wZSlcbiAgICAgICAgICAgIC5maW5kKHNlbGVjdG9yKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREZXB0aCA9IGdldExldmVsKGVsZW0udGFnTmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IGN1cnJlbnREZXB0aCAtIHByZXZEZXB0aDtcblxuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGVyID0gY3JlYXRlTGlzdCgkbGFzdExpLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3VsZCBiZSBvbmNlIG1vcmUgbGV2ZWwgdG8ganVtcCBiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIGVnOiBoMiArIGgzICsgaDIsIG9mZnNldCA9IGgyIC0gaDMgPSAtMVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBvbCA8LS0tLS0tKyB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gICBsaSAgICAgIHxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIG9sIC0tLSsgY3VycmVudFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBsaVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBqdW1wYmFjayA9IHRhcmdldCAtIGN1cnJlbnQgPSAyXG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGVyID0ganVtcEJhY2soJHdyYXBwZXIsIC1vZmZzZXQgKiAyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISR3cmFwcGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkd3JhcHBlciA9ICRyZXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyICRsaSA9ICQoJzxsaS8+Jyk7XG4gICAgICAgICAgICAgICAgdmFyICRhID0gJCgnPGEvPicpO1xuXG4gICAgICAgICAgICAgICAgX3NldEF0dHJzKCQoZWxlbSksICRhLCBpbmRleCk7XG5cbiAgICAgICAgICAgICAgICAkbGkuYXBwZW5kKCRhKS5hcHBlbmRUbygkd3JhcHBlcik7XG5cbiAgICAgICAgICAgICAgICAkbGFzdExpID0gJGxpO1xuICAgICAgICAgICAgICAgIHByZXZEZXB0aCA9IGN1cnJlbnREZXB0aDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAkcmV0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBpbml0IHRhYmxlIG9mIGNvbnRlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25dOiBUT0Mgb3B0aW9ucywgYXZhaWxhYmxlIHByb3BzOlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1N0cmluZ30gW3NlbGVjdG9yXTogaGVhZGVycyBzZWxlY3RvciwgZGVmYXVsdCBpcyAnaDEsIGgyLCBoMywgaDQsIGg1LCBoNidcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtTdHJpbmd9IFtzY29wZV06IHNlbGVjdG9yIHRvIHNwZWNpZnkgZWxlbWVudHMgc2VhcmNoIHNjb3BlLCBkZWZhdWx0IGlzICdib2R5J1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0Jvb2xlYW59IFtvdmVyd3JpdGVdOiB3aGV0aGVyIHRvIG92ZXJ3cml0ZSBleGlzdGVkIGhlYWRlcnMnIGlkLCBkZWZhdWx0IGlzIGZhbHNlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7U3RyaW5nfSBbcHJlZml4XTogc3RyaW5nIHRvIHByZXBlbmQgdG8gaWQvaHJlZiBwcm9wLCBkZWZhdWx0IGlzICd0b2MnXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9ICR0aGlzXG4gICAgICovXG4gICAgJC5mbi5pbml0VE9DID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRzID0ge1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdoMSwgaDIsIGgzLCBoNCwgaDUsIGg2JyxcbiAgICAgICAgICAgIHNjb3BlOiAnYm9keScsXG4gICAgICAgICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgICAgICAgcHJlZml4OiAndG9jJ1xuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0T3B0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgdmFyIHNlbGVjdG9yID0gb3B0aW9ucy5zZWxlY3RvcjtcblxuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2VsZWN0b3IgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxlY3Rvci5tYXRjaCgvXig/OmhbMS02XSw/XFxzKikrJC9nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2VsZWN0b3IgbXVzdCBjb250YWlucyBvbmx5IGgxLTYnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcykuYXBwZW5kKGJ1aWxkVE9DKG9wdGlvbnMpKTtcblxuICAgICAgICB2YXIgY3VycmVudEhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXG4gICAgICAgIGlmIChjdXJyZW50SGFzaCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGN1cnJlbnRIYXNoLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICBpZiAoYW5jaG9yKSBhbmNob3Iuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICQodGhpcyk7XG4gICAgfTtcbn0pKTtcbiJdfQ==
